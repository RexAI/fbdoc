<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Documentation Project

     The FreeBSD Spanish Documentation Project
     %SOURCE% en_US.ISO8859-1/books/handbook/ports/chapter.xml
     %SRCID%    1.284

     $FreeBSD$
     $FreeBSDes: doc/es_ES.ISO8859-1/books/handbook/ports/chapter.xml,v 1.2 2004/10/08 21:26:03 jesusr Exp $
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="ports">
  <title>Instalación de aplicaciones: «packages» y ports</title>

  <sect1 xml:id="ports-synopsis">
    <title>Sinopsis</title>

    <indexterm><primary>ports</primary></indexterm>
    <indexterm><primary>packages</primary></indexterm>

    <para>&os; viene con una excelente colección de herramientas
      de sistema como parte del sistema base.  A pesar de esto, existe gran
      cantidad de cosas que uno requiere hacer para poner las cosas realmente en
      marcha, para lo cual se necesita instalar software adicional de
      terceros.
      &os; ofrece dos tecnologías complementarias para instalar
      software de terceros en nuestro sistema: la Colección de Ports de
      &os; y «packages»(paquetes)  binarios.  Cualquiera de los dos
      sistemas puede usarse para instalar las versiones más recientes,
      de forma local o directamente desde la red.</para>

    <para>Después de leer este capítulo usted
      sabrá:</para>

    <itemizedlist>
      <listitem>
	<para>Cómo instalar packages binarios de software
	de terceros.</para>
      </listitem>
      <listitem>
	<para>Cómo compilar software de terceros desde la
	  Colección de Ports.</para>
      </listitem>
      <listitem>
	<para>Cómo eliminar packages o ports instalados
	  previamente.</para>
      </listitem>
      <listitem>
        <para>Cómo sobreescribir los valores por omisión
	  que utiliza la colección de ports.</para>
      </listitem>
      <listitem>
        <para>Cómo encontrar la aplicación adecuada.</para>
      </listitem>
      <listitem>
        <para>Cómo actualizar aplicaciones.</para>
      </listitem>

    </itemizedlist>
  </sect1>

  <sect1 xml:id="ports-overview">
    <title>Aproximación a la instalación de software</title>

    <para>Si ha usado un sistema &unix; con anterioridad sabrá que el
      procedimiento típico para instalar software de terceros es algo
      similar a esto:</para>

    <procedure>
      <step>
	<para>Descargar el software, que puede distribuirse en formato de
	  código fuente o binario.</para>
      </step>

      <step>
	<para>Desempaquetar el software de su formato de distribución
	  (normalmente en un «tarball» comprimido con &man.compress.1;,
	  &man.gzip.1; o &man.bzip2.1;).</para>
      </step>

      <step>
	<para>Consultar la documentación (quizás un fichero
	  <filename>INSTALL</filename> o
	  <filename>README</filename>, o los ficheros del subdirectorio
	  <filename>doc/</filename>) para ver como instalar el software.</para>
      </step>

      <step>
	<para>Si el software se distribuye como fuente, compilarlo.  Esto
	  puede requerir que editemos el fichero <filename>Makefile</filename>
	  o que ejecutemos el «script»
	  <command>configure</command>, entre otras cosas.</para>
      </step>

      <step>
	<para>Instalar y probar el software.</para>
      </step>
    </procedure>

    <para>Y esto solamente si todo marcha bien.  Si está instalando un
      software que no ha sido portado específicamente para &os;, puede
      que sea necesario editar el código para que funcione
      correctamente.
      </para>

    <para>Si lo desea puede continuar instalando software de la forma
      «tradicional» en &os;, aunque &os; dispone de
      dos tecnologías que le pueden ahorrar gran cantidad de tiempo y
      esfuerzo: los packages y los ports.  En el momento de escribir esto
      existen más de &os.numports; aplicaciones de terceros.</para>

    <para>En cualquier aplicación el paquete de &os;
      es un solo fichero que tiene que descargar.  Los paquetes contienen
      copia de los programas binarios precompilados de la aplicación,
      así como cualquier fichero de configuración o
      documentación.  Los paquetes descargados se pueden
      manipular con las herramientas de gestión de paquetes de &os;:
      &man.pkg.add.1;, &man.pkg.delete.1;,
      &man.pkg.info.1;, etc.  Instalar una aplicación nueva puede
      realizarse con una sola orden.</para>

    <para>Un port de &os; es una colección de ficheros
      diseñada para automatizar el proceso de
      compilación desde el código fuente.</para>

    <para>Recuerde que existen ciertos pasos que deberá llevar a cabo
      para compilar un programa por usted mismo (descargar,
      desempaquetar, parchear, compilar e instalar).  Los ficheros que
      conforman un port permiten que el sistema se encargue de todo esto.
      Usted ejecuta un conjunto simple de órdenes
      y el código fuente se descarga, desempaqueta, parchea,
      compila e instala.</para>

    <para>De hecho el sistema de ports también se puede usar para crear
      paquetes que posteriormente se pueden manipular con
      <command>pkg_add</command> y las
      demás utilidades de gestión de packages que veremos en
      breve.</para>

    <para>Tanto el sistema de ports como el de paquetes entienden las
      <emphasis>dependencias</emphasis>.  Suponga que desea instalar una
      aplicación que depende de que una biblioteca
      específica esté instalada.  Tanto la biblioteca como la
      aplicación existen en &os; como paquete o port.  Si utiliza
      <command>pkg_add</command> o el sistema de ports para instalar
      la aplicación ambos notarán que la biblioteca no
      está instalada y procederán a instalarla antes que
      nada.</para>

    <para>Dado que ambas tecnologís son similares quizás se
      pregunte por qué &os; se toma la molestía de contar con
      ambas.  Los Packages y los Ports tienen sus propias ventajas,
      así que cuál utilizar dependerá de su
      elección en cada momento.</para>

    <itemizedlist>
      <title>Ventajas de los Paquetes</title>

      <listitem>
	<para>El fichero tarball de un package es normalmente más
	  pequeño que el tarball con el código fuente de
	  la aplicación.</para>
      </listitem>

      <listitem>
	<para>Los paquetes no requieren compilación.
	  En el caso de aplicaciones grandes, como
	  <application>Mozilla</application>,
	  <application>KDE</application>, o
	  <application>GNOME</application> este detalle puede ser importante,
	  especialmente si usa un equipo lento.</para>
      </listitem>

      <listitem>
	<para>Los paquetes no requieren que comprenda el proceso que envuelve
	  el compilar software bajo &os;.</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <title>Ventajas de los Ports</title>

      <listitem>
	<para>Normalmente los paquetes se compilan con opciones conservadoras,
	  en virtud del gran número de equipos donde se
	  instalarán.  Al instalar como port puede usted editar las
	  preferencias para (por ejemplo) generar código
	  específico para un procesador
	  Pentium IV o Athlon.</para>
      </listitem>

      <listitem>
	<para>Algunas aplicaciones tienen opciones sobre lo que pueden y lo
	  que no pueden hacer.  Por ejemplo
	  <application>Apache</application> se puede configurar con
	  una gran variedad de opciones.  Al compilarlo desde los
	  ports usted no tiene por que aceptar las opciones
	  predefinidas, puede seleccionar que opciones desea.</para>

	<para>En algunos casos existen varios paquetes para la misma
	  aplicación con diferentes opciones.  Por ejemplo,
	  <application>Ghostscript</application> está disponible
	  como paquete
	  <filename>ghostscript</filename> y como paquete
	  <filename>ghostscript-nox11</filename>, dependiendo de si usted
	  cuenta o no con servidor X11.  En este caso decidir puede ser
	  sencillo e incluso pueden facilitarse packages con ambas opciones,
	  pero elegir se puede volver un problema si hay más de
	  una o dos opciones de compilación.</para>
      </listitem>

      <listitem>
	<para>Las condiciones de la licencia de algunas aplicaciones
	  prohiben la distribución de binarios.  Solo permiten la
	  distribución del código fuente.</para>
      </listitem>

      <listitem>
	<para>Existe gente que no confía en los binarios.  Al
	  menos puede usted (en teoría) revisar el código fuente
	  y localizar problemas potenciales.</para>
      </listitem>

      <listitem>
	<para>Si tiene parches locales necesitará el código
	  fuente para poder aplicarlos.</para>
      </listitem>

      <listitem>
	<para>Hay gente a la que le gusta tener el código fuente para
	  poder leerlo en ratos de ocio, modificarlo, tomar partes prestadas
	  (cuando la licencia lo permite, claro está), etc.</para>
      </listitem>
    </itemizedlist>

    <para>Para tener constancia de los ports actualizados, suscríbase
      a la &a.ports; y a la &a.ports-bugs;.</para>

    <warning>
      <para>&nbsp;Antes de instalar cualquier aplicación
        consulte <uri xlink:href="http://vuxml.freebsd.org">http://vuxml.freebsd.org</uri> para
        comprobar los posibles problemas de seguridad relacionados con
	ella.</para>

      <para>También puede instalar <package>security/portaudit</package> que automáticamente
        comprobará las vulnerabilidades conocidas de todas las
        aplicaciones instaladas; también lo comprobará antes de
        compilar cualquier port.  Mientras tanto, puede usar
        <command>portaudit -F -a</command> después de instalar
        algunos packages.</para>
    </warning>

    <para>El resto de este capítulo le explicará cómo
      usar los ports y los packages para instalar software de terceros en
      &os;.</para>
  </sect1>

  <sect1 xml:id="ports-finding-applications">
    <title>Cómo encontrar aplicaciones</title>

    <para>Antes de poder instalar cualquier software debe saber qué
      es lo que quiere instalar y cómo se llama la
      aplicación.</para>

    <para>La lista de software disponible para &os; crece constantemente.
      Afortunadamente existen varias formas de localizar lo que busca:</para>

    <itemizedlist>
      <listitem>
	<para>El sitio web de &os; mantiene una lista (actualizada y que
	  admite búsquedas) de todas las
	  aplicaciones disponibles para &os; en la dirección
	  <link xlink:href="http://www.freebsd.org/ports/index.html">http://www.FreeBSD.org/ports/
	  </link>.  Esta base esta dividida en categorías, y puede
	  buscar por nombre (si lo sabe) o bien listar las aplicaciones
	  disponibles en cierta categoría.</para>
      </listitem>

      <listitem>
	<indexterm><primary>FreshPorts</primary></indexterm>

	<para>Dan Langille mantiene FreshPorts en
	  <uri xlink:href="http://www.FreshPorts.org/">http://www.FreshPorts.org/</uri>.
	  FreshPorts verifica los cambios en las aplicaciones del árbol
	  de ports, y le permite «seguir» uno o más
	  ports, sobre los que le enviarán un correo cada vez
	  que se actualicen.</para>
      </listitem>

      <listitem>
	<indexterm><primary>FreshMeat</primary></indexterm>

	<para>Si no conoce el nombre de la aplicación que desea
	  pruebe a usar un sitio como FreshMeat (<link xlink:href="http://www.freshmeat.net/">http://www.freshmeat.net/</link>)
	  para encontrar una aplicación; después consulte
	  el sitio web de &os; para ver si la aplicación ha sido
	  portada.</para>
      </listitem>

      <listitem>
	<para>Si sabe el nombre exacto del port y solo necesita saber
          en qué categoria está puede usar
          &man.whereis.1;.  Simplemente escriba <command>whereis
          fichero</command>, donde
          <replaceable>fichero</replaceable> es el programa que quiera
          instalar.  Si está en su sistema, le dirá dónde
          está:</para>

      <screen>&prompt.root; <userinput>whereis lsof</userinput>
lsof: /usr/ports/sysutils/lsof</screen>

      <para>Esto nos dice que <command>lsof</command> (una utilidad de
	sistema) está en el directorio
	<filename>/usr/ports/sysutils/lsof</filename>.</para></listitem>

      <listitem>
	<para>Otra forma de encontrar un port en particular es usando
        el mecanismo de búsqueda integrado en la colección de
        ports.  Para poder usar esta opción de búsqueda
        debe estar en el directorio <filename>/usr/ports</filename>.  Una
        vez en ese directorio ejecute <command>make search
        name=nombre-del-programa</command>, donde
        <replaceable>nombre-del-programa</replaceable> es el nombre
        del programa que desea encontrar.  Por ejemplo, si busca
        <command>lsof</command>:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports</userinput>
&prompt.root; <userinput>make search name=lsof</userinput>
Port:   lsof-4.56.4
Path:   /usr/ports/sysutils/lsof
Info:   Lists information about open files (similar to fstat(1))
Maint:  obrien@FreeBSD.org
Index:  sysutils
B-deps:
R-deps: </screen>

      <para>Debe prestar especial atención a la línea
        «Path:»de la salida, porque es la que indica
        dónde puede encontrar el port.  El resto de información
        no se necesita para instalar el port.</para>

      <para>Si quiere hacer una búsqueda más a fondo
       utilice <command>make
       search key=cadena</command> donde
       <replaceable>cadena</replaceable> es el término que busca.
       Podrá buscar nombres de ports, comentarios,
       descripciones y dependencias; también se puede usar
       para encontrar ports que tengan relación con
       algún tema en particular si no conoce el nombre del
       programa que busca.</para>

      <para>En ambos casos la cadena de búsqueda no distingue entre
       mayúsculas y minúsculas.  Buscar «LSOF»
       dará los mismos resultados que buscar
       «lsof».</para>
      </listitem>

    </itemizedlist>

  </sect1>

  <sect1 xml:id="packages-using">
    <info><title>Uso del sistema de packages</title>
      <authorgroup>
        <author><personname><firstname>Chern</firstname><surname>Lee</surname></personname><contrib>Texto de </contrib></author>
      </authorgroup>
    
    </info>

    

    <sect2>
      <title>Instalar un package</title>
      <indexterm>
        <primary>packages</primary>
        <secondary>installing</secondary>
      </indexterm>

      <indexterm>
        <primary><command>pkg_add</command></primary>
      </indexterm>
      <para>Puede usar &man.pkg.add.1; para instalar un
      package de &os; desde un fichero local o desde
      un servidor remoto vía red.</para>

      <example>
        <title>Descarga de un paquete manualmente e instalación en
	  nuestro sistema</title>

        <screen>&prompt.root; <userinput>ftp -a ftp2.FreeBSD.org</userinput>
Connected to ftp2.FreeBSD.org.
220 ftp2.FreeBSD.org FTP server (Version 6.00LS) ready.
331 Guest login ok, send your email address as password.
230-
230-     This machine is in Vienna, VA, USA, hosted by Verio.
230-         Questions? E-mail freebsd@vienna.verio.net.
230-
230-
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
<prompt>ftp&gt;</prompt> <userinput>cd /pub/FreeBSD/ports/packages/sysutils/</userinput>
250 CWD command successful.
<prompt>ftp&gt;</prompt> <userinput>get lsof-4.56.4.tgz</userinput>
local: lsof-4.56.4.tgz remote: lsof-4.56.4.tgz
200 PORT command successful.
150 Opening BINARY mode data connection for 'lsof-4.56.4.tgz' (92375 bytes).
100% |**************************************************| 92375       00:00 ETA
226 Transfer complete.
92375 bytes received in 5.60 seconds (16.11 KB/s)
<prompt>ftp&gt;</prompt> <userinput>exit</userinput>
&prompt.root; <userinput>pkg_add lsof-4.56.4.tgz</userinput></screen>
      </example>

      <para>Si no tiene una fuente local de packages (por ejemplo
        un CDROM de &os;) probablemente la mejor
        opción sea utilizar el argumento <option>-r</option> de
        &man.pkg.add.1;, que hará que determine
        automáticamente el formato del objeto correcto, para
        posteriormente descargarlo e instalarlo desde un FTP.</para>

      <indexterm>
        <primary><command>pkg_add</command></primary></indexterm>
      <screen>&prompt.root; <userinput>pkg_add -r lsof</userinput></screen>

      <para>En el ejemplo anterior el package correspondiente se
        descargará e instalará sin intervención
        del usuario.  Si desea utilizar una réplica
	(«mirror») de packages que no sea el sitio principal
        de &os; solo tiene configurar la variable de entorno
        <envar>PACKAGESITE</envar> correctamente para
        sobreescribir el sitio predefinido.  &man.pkg.add.1; utiliza
        &man.fetch.1; para descargar los ficheros, tomando como
        referencia varias variables de entorno, como
        <envar>FTP_PASSIVE_MODE</envar>, <envar>FTP_PROXY</envar> y
        <envar>FTP_PASSWORD</envar>.  Quizás deba modificar alguna de
        estas si se encuentra detrás de un cortafuegos, o usa un
        proxy FTP/HTTP.  Consulte &man.fetch.3; si quiere ver una lista
        completa.  Observe también que en el ejemplo anterior
        usamos <literal>lsof</literal> en vez de
	<literal>lsof-4.56.4</literal>.
        Cuando usamos la opción de descarga remota no es
        necesario especificar la versión del paquete.
        &man.pkg.add.1; descargará automáticamente la
        última versión de la aplicación.</para>

      <note>
	<para>&man.pkg.add.1; descargará la última
	  versión de su aplicación si usa &os.current; o
	  &os.stable;, pero si usa una versión -RELEASE,
	  descargará la versión del package que se
	  construyó con dicha versión.  Es posible configurar
	  esto sobreescribiendo la variable de entorno
	  <envar>PACKAGESITE</envar>.</para>
      </note>

      <para>Los packages se destribuyen en formatos
          <filename>.tgz</filename> y <filename>.tbz</filename>.
          Puede encontrarlos en <uri xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/</uri>,
          o en la distribución de &os; en CD-ROM.  Todos los
          CDs en el set de 4 CDs de &os; (y en el PowerPak, etc.)
          contienen packages en el directorio
          <filename>/packages</filename>.  La estructura de los
          packages es similar a la del arbol de
          <filename>/usr/ports</filename>.  Cada categoría
          tiene su propio directorio, y todos los paquetes se pueden
          encontrar dentro del directorio <filename>All</filename>.
      </para>

      <para>La estructura del directorio de packageckages es idéntica a la
        de los ports, y funcionan como un todo para conformar el sistema de
        paquetes/ports.
        </para>

    </sect2>

    <sect2>
      <title>Eliminar un package</title>
      <indexterm>
        <primary><command>pkg_delete</command></primary>
      </indexterm>
      <indexterm>
        <primary>packages</primary>
        <secondary>deleting</secondary>
      </indexterm>
      <para>Para eliminar un package instalado en el sistema utilice
	    &man.pkg.delete.1;.</para>

      <screen>&prompt.root; <userinput>pkg_delete xchat-1.7.1</userinput></screen>
    </sect2>

    <sect2>
      <title>Miscelánea</title>
      <para>Toda la información de los packages se guarda en
        <filename>/var/db/pkg</filename>.  Ahíl encontrará
        la lista completa de paquetes instalados y las descripciones de
	los mismos.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="ports-using">
    <title>Uso de la colección de ports</title>

    <para>La siguiente sección incluye las instrucciones
      básicas para instalar o eliminar programas mediante la
      Colección de Ports de su sistema.</para>

    <sect2 xml:id="ports-tree">
      <title>Cómo obtener la Colección de Ports</title>

      <para>Para poder instalar ports primero debe hacerse, obviamente, con
        la Colección de Ports&mdash;; en esencia está compuesta
        por <filename>Makefiles</filename>, parches y ficheros con la
        descripción de los ports y está en
        <filename>/usr/ports</filename>.</para>

      <para>Cuando instaló su sistema &os; el programa
	    <application>sysinstall</application> le preguntó si
	    querí instalar la Colección de Ports.
	    Si contestó que no siga estas instrucciones:</para>

      <procedure>
	<title>Mediante CVSup</title>

	<para>Este es un método rápido de conseguir y
	  mantener una copia de la Colección de Ports al dia mediante
	  el protocolo <application>CVSup</application>.  Si quiere saber
	  más sobre <application>CVSup</application> consulte <link linkend="cvsup">Uso de CVSup</link>.</para>

	<note>
	  <para>La implementación del protocolo
	    <application>CVSup</application> que se incluye en &os; se llama
	    <application>csup</application>.  Apareció en &os;&nbsp;6.2.
	    Los usuarios de releases anteriores de &os; puden instalar <package>net/csup</package> como port o package.</para>
	</note>

	<para>Asegúrese de que <filename>/usr/ports</filename>
	  está vacío antes de ejecutar <application>csup</application>
	  por primera vez.  Si ya tiene la Colección de Ports porque la
	  ha instalado por otros medios  <application>csup</application>
	  no purgará los parches de ports eliminados.</para>

	<step>
	  <para>Ejecute <command>csup</command>:</para>

	  <screen>&prompt.root; <userinput>csup -L 2 -h cvsup.FreeBSD.org /usr/share/examples/cvsup/ports-supfile</userinput></screen>

	  <para>Cambie
	    <replaceable>cvsup.FreeBSD.org</replaceable> por algún
	    otro servidor <application>CVSup</application> que tenga cerca.
	    Consulte <link linkend="cvsup-mirrors">Réplicas CVSup</link> (<xref linkend="cvsup-mirrors"/>), donde encontrará una lista
	    completa de las réplicas CVSup.</para>

	  <note>
	    <para>Puede usar una versión de
	      <filename>ports-supfile</filename> confeccionada a su gusto,
	      por ejemplo para evitar tener que indicarle el nombre del
	      servidor <application>CVSup</application> a mano.</para>

	    <procedure>
	      <step>
		<para>Haga lo siguiente: como <systemitem class="username">root</systemitem> copie
		  <filename>/usr/share/examples/cvsup/ports-supfile</filename>
		  en otro sitio, por ejemplo
		  <filename>/root</filename> o su directorio /home.</para>
	      </step>

	      <step>
		<para>Edite <filename>ports-supfile</filename>.</para>
	      </step>

	      <step>
		<para>Reemplace
		  <replaceable>CHANGE_THIS.FreeBSD.org</replaceable>
		  por un servidor <application>CVSup</application> que
		  esté cerca de donde esté usted.  Consulte
		  <link linkend="cvsup-mirrors">Réplicas
		  CVSup</link> (<xref linkend="cvsup-mirrors"/>) si necesita
		  ver una lista completa de las mismas.</para>
	      </step>

	      <step>
		<para>Ejecute <command>csup</command>del siguiente
		  modo:</para>

		<screen>&prompt.root; <userinput>csup -L 2 /root/ports-supfile</userinput></screen>
	      </step>
	    </procedure>
	  </note>
	</step>

	<step>
	  <para>Al ejecutar &man.csup.1; descargará y
	    aplicará todos los cambios recientes que haya sufrido
	    la Colección de Ports, pero tenga en cuenta que no
	    actualizará ninguno de los ports que ya tenga instalados
	    en su sistema.</para>
	</step>
      </procedure>

      <procedure>
	<title>Mediante portsnap</title>

	<para><application>Portsnap</application> es un método
	   alternativo de distribuir la Colección de Ports.  Se
	   incluyó por primera vez en &os;&nbsp;6.0.  Puede
	   instalar &man.portsnap.8; en versiones anteriores de &os;
	   como port (<package>ports-mgmt/portsnap</package>) o como
	    package:</para>

	<screen>&prompt.root; <userinput>pkg_add -r portsnap</userinput></screen>

	<step>
	  <para>Puede saltarse esta paso a partir de &os;&nbsp;6.1-RELEASE
	    y en versiones recientes de
	    <application>Portsnap</application> (port o package).
	    <filename>/usr/ports</filename> se creará
	    automáticamente la primera vez que ejecute
	    &man.portsnap.8;.  En versiones anteriores de
	    <application>portsnap</application> había que crear
	    un <filename>/usr/ports</filename> vacío si
	    no existía previamente:</para>

	  <screen>&prompt.root; <userinput>mkdir /usr/ports</userinput></screen>
	</step>

	<step>
	  <para>Descargue una instantánea comprimida de la
	    Colección de Ports en
	    <filename>/var/db/portsnap</filename>.  Hecho esto
	    puede desconectar de Internet si quiere.</para>

	  <screen>&prompt.root; <userinput>portsnap fetch</userinput></screen>
	</step>

	<step>
	  <para>Si está ejecutando <application>Portsnap</application> por
	    vez primera debe extraer la instantánea en <filename>/usr/ports</filename>:
	  </para>

	  <screen>&prompt.root; <userinput>portsnap extract</userinput></screen>

	  <para>Si ya tiene un <filename>/usr/ports</filename> y solamente está
	    actualizando su árbol de ports ejecute lo siguiente:</para>

	  <screen>&prompt.root; <userinput>portsnap update</userinput></screen>
	</step>

      </procedure>



      <procedure>
	<title>Mediante Sysinstall</title>

	<para>Este método implica el uso de
	  <application>sysinstall</application> para
	  instalar la Colección de Ports.</para>

	<step>
	  <para>Como usuario <systemitem class="username">root</systemitem> ejecute
	    <command>sysinstall</command>
	    (<command>/stand/sysinstall</command> en cualquier versión
	    previa a &os;&nbsp;5.2); del siguiente modo:</para>

	  <screen>&prompt.root; <userinput>sysinstall</userinput></screen>
	</step>

	<step>
	  <para>Posiciónese en la opción
	    <guimenuitem>Configure</guimenuitem>
	    y pulse <keycap>Intro</keycap>.</para>
	</step>

	<step>
	  <para>Seleccione la opción
	  <guimenuitem>Distributions</guimenuitem>
	  y pulse <keycap>Intro</keycap>.</para>
	</step>

	<step>
	  <para>Seleccione la opción <guimenuitem>ports</guimenuitem>
	    y pulse la <keycap>barra espaciadora</keycap>.</para>
	</step>

	<step>
	  <para>Seleccione el medio de instalación deseado (CDROM,
	    FTP, etc.)</para>
	</step>

	<step>
	  <para>Diríjase a la opción
	    <guimenuitem>Exit</guimenuitem> y
	    pulse <keycap>Intro</keycap>.</para>
	</step>

	<step>
	  <para>Pulse <keycap>X</keycap> para salir de
            <application>sysinstall</application>.</para>
	</step>
      </procedure>
    </sect2>

    <sect2 xml:id="ports-skeleton">
      <title>Instalación de ports</title>

      <indexterm>
        <primary>ports</primary>
        <secondary>installing</secondary>
      </indexterm>
      <para>Al hablar de la Colección de Ports lo primero que
        hay que explicar es a qué nos referimos cuando hablamos de
        un «esqueleto» (skeleton).  El esqueleto de un
	port es un conjunto mínimo de ficheros que
	indican a &os; cómo compilar e instalar un programa.
        Cada esqueleto incluye:</para>

      <itemizedlist>
	<listitem>
	  <para>Un <filename>Makefile</filename>.  Este
	    <filename>Makefile</filename> contiene diversas sentencias
	    que le indican al sistema cómo compilarlo y dónde
	    instalarlo en su sistema.</para>
	</listitem>

	<listitem>
	  <para>Un fichero <filename>distinfo</filename>.  Este fichero
	    contiene información sobre los ficheros que se debe
	    descargar para poder compilar el programa, así como el
	    identificador «checksum», que se usa para comprobar
	    mediante &man.md5.1; que la descarga ha sido correcta y que el
	    la integridad del fichero está garantizada.</para>
	</listitem>

	<listitem>
	  <para>Un directorio <filename>files</filename>.  Este directorio
	    contiene  los parches necesarios para compilar e instalar
	    el programa en su sistema &os;.  Básicamente los parches
	    son pequeños ficheros que especifican cambios en ficheros
	    concretos.  Su formato es en texto plano y suelen decir cosas
	    como «borra la línea 10» o
	    «Cambia la línea 26 por esto».
	    Estos parches también se conocen como
	    «diffs» ya que se generan con
	    &man.diff.1;.</para>

	  <para>Es posible que este directorio tambié contenga
	    algún otro fichero necesario para compilar e instalar
	    el port.</para>
	</listitem>

	<listitem>
	  <para>Un fichero <filename>pkg-descr</filename>.  Es una
	    descripción más detallada del programa.
	    En algunas ocasiones ocupa varias líneas.</para>
	</listitem>

	<listitem>
	  <para>Un fichero <filename>pkg-plist</filename>.  Es una lista de
	    todos los ficheros que instalará el port.
	    También le indica al sistema de ports qué ficheros
	    eliminar durante la desinstalación del programa.</para>
	</listitem>
      </itemizedlist>

      <para>Algunos ports tienen otros ficheros, como
        <filename>pkg-message</filename>.  El sistema de ports los usa para
        gestionar situaciones especiales.  Si desea conocer los detalles,
        incluso sobre los ports en general, consulte el libro <link xlink:href="http://www.FreeBSD.org/doc/en_EN.ISO8859-1/books/porters-handbook/index.html">&os; Porter's Handbook</link>.</para>

      <para>El port incluye las instrucciones necesarias para obtener
        software a partir del código fuente, pero no incluye el
        código.  Puede obtener el código desde un CDROM
        o desde Internet.  El código se distribuye del modo
        que el autor estime oportuno.  Normalmente es un fichero tar
        comprimido con gzip, pero puede comprimirse con otra herramienta o
        incluso no estar comprimido.  El código del programa,
        venga como venga, se llama «distfile».  A
	continuación veremos los dos métodos de
	instalación de un port.</para>

      <note>
        <para>Debe ser el usuario <systemitem class="username">root</systemitem> para
          instalar ports.</para>
      </note>

      <warning>
	<para>&nbsp;Antes de instalar cualquier port asegúrese de tener
	  la Colección de Ports actualizada y de comprobar en <uri xlink:href="http://vuxml.freebsd.org/">http://vuxml.freebsd.org/</uri> la existencia de posibles
	  problemas de seguridad que pudiera tener el port.</para>

	<para>Puede realizar la comprobación de seguridad
	  con <application>portaudit</application> antes de instalar
	  cualquier  aplicación.  Esta herramienta está
	  en la Colección de Ports (<package>security/portaudit</package>).  Le rogamos
	  que al menos considere ejecutar
	  <command>portaudit -F</command> antes de instalar un port nuevo
	  para que descargue la nueva base de datos de vulnerabilidades.
	  Durante la comprobación diaria de seguridad
	  actualizará la base de datos y hará una
	  auditoría del sistema.  Para más información
	  lea las páginas de manúal de
	  &man.portaudit.1; y &man.periodic.8;.</para>
      </warning>


      <para>La Colección de  Ports asume que tiene usted conexión
        con Internet.  Si no es así tendrá que disponer de una
	copia del distfile en <filename>/usr/ports/distfiles</filename>.</para>

	<para>El primer paso es ubicarse en el directorio del port que desea
	  instalar:</para>

        <screen>&prompt.root; <userinput>cd /usr/ports/sysutils/lsof</userinput></screen>

        <para>Una vez en el directorio <filename>lsof</filename> puede
	  ver el esqueleto del port.  El siguiente paso es compilar el
	  port.  Solamente tiene que teclear
	  <command>make</command> en el prompt.  Una vez hecho
	  verá algo como esto:</para>

        <screen>&prompt.root; <userinput>make</userinput>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.57
...
[La salida de la descompresión se ha eliminado]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[La salida de la configuración se ha eliminado]
...
===&gt;  Building for lsof-4.57
...
[La salida de la compilación se ha eliminado]
...
&prompt.root;</screen>

        <para>Una vez que acabe la compilación
	  se le devolverá el control del prompt.  El siguiente
	  paso es instalar el port.  Para ello bastará con que
	  añada una palabra a la orden
	  <command>make</command>: esa palabra es
	  <buildtarget>install</buildtarget>:</para>


        <screen>&prompt.root; <userinput>make install</userinput>
===&gt;  Installing for lsof-4.57
...
[La salida de la instalación se ha eliminado]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
&prompt.root;</screen>

	<para>Una vez que vuelva usted al prompt podrá ejecutar la
	  aplicación que acaba de instalar.  Dado que
	  <command>lsof</command> es un programa que se ejecuta con
	  privilegios altos se le ha mostrado una advertencia de
	  seguridad.  Durante la compilación e instalación
	  es posible que hayan aparecido otros.</para>

	<para>Le recomendamos que borre el directorio que contiene todos
	  los ficheros temporales necesarios durante la compilación.
	  No solo consume valioso espacio en disco sino que puede dar
	  problemas cuando vaya a actualizar el port a una versión
          más reciente.</para>

	<screen>&prompt.root; <userinput>make clean</userinput>
===&gt;  Cleaning for lsof-4.57
&prompt.root;</screen>

        <note>
          <para>Puede ahorrarse teclear dos pasos si para instalar un port
	    teclea <command>make
	    install clean</command> en lugar de
	    <command>make</command>,
	    <command>make install</command> y
	    <command>make clean</command>
	    como tres pasos separados.</para>
	</note>

	<note>
	  <para>Algunas shells mantienen una caché de
	    órdenes disponibles en los directorios que aparecen
	    en la variable de entorno
	    <envar>PATH</envar> con el fin de acelerar las operaciones
	    de búsqueda de ejecutables de esas órdenes.
	    Si usa una de esas shells tendrá que utilizar la
	    orden <command>rehash</command> tras instalar un port o
	    no podrá ejecutar aplicaciones recién
	    instaladas.  Esta orden funciona en shells como
	    <command>tcsh</command>.  Utilice <command>hash -r</command>
	    en shells <command>sh</command>.  Para más
	    información consulte la documentación de
	    su shell.</para>
	</note>

	<para>Algunos DVD-ROM de terceros, como el &os; Toolkit
	  de <link xlink:href="http://www.freebsdmall.com/">&os;
	  Mall</link> contienen distfiles. Puede usarlos con la Colección
	  de Ports.  Monte el DVD-ROM en <filename>/cdrom</filename>.  Si
	  utiliza un punto de montaje diferente asigne a
	  <varname>CD_MOUNTPTS</varname> el valor adecuado.  Los
	  distfiles se irán copiando automáticamente
	  a medida que vayan siendo necesarios.</para>

	<note>
	  <para>Por favor, tenga en cuenta que la licencia de unos
	    cuantos ports muy concretos no permite su distribución
	    en CD-ROM.  Puede deberse a que es necesario rellenar un
	    formulario de registro antes de descargarlo, porque la
	    redistribución no esté permitida o por otra
	    razón.  Si quiere instalar un port que no está
	    en el CD-ROM tendrá que tener salida a Internet.</para>
	</note>

	<para>El sistema de ports utiliza &man.fetch.1; para descargar
	  ficheros; en este proceso intervienen varias variables de
	  entorno, como <envar>FTP_PASSIVE_MODE</envar>, <envar>FTP_PROXY</envar>,
	  y <envar>FTP_PASSWORD</envar>.  Si está detrás de
	  un cortafuegos tendrá que asignar valores a una o
	  más de estas variables, así como si necesita
	  utilizar un proxy FTP/HTTP.  Consulte &man.fetch.3;, donde
	  econtrará una lista detallada.</para>

	<para>La opción <command>make
	  fetch</command> se creó para
	  los usuarios que no disponen de conexión contínua.
	  Ejecute esta orden en el directorio raíz
	  (<filename>/usr/ports</filename>) y se descargarán todos
	  los ficheros necesarios.  Esta orden también funciona en
	  directorios situados más abajo, por ejemplo
	  <filename>/usr/ports/net</filename>.  Tenga en cuenta que si un
	  port depende de librerías u otros ports éstos
	  distfiles <emphasis>no</emphasis> se descargarán, a
	  menos que reemplace <buildtarget>fetch</buildtarget> por
	  <buildtarget>fetch-recursive</buildtarget>, que se encargará
	  de descargar todas las dependencias de cada port.</para>

	<note><para>Si quiere compilar todos los ports de una
	  categoría y de una sola vez ejecutando la orden
	  <command>make</command> en el directorio raíz, de muy
	  similar manera que lo que se acaba de ver con
	  <command>makefetch</command>.  Tenga en
	  cuenta que esto es bastante peligroso porque algunos ports no
	  pueden coexistir.  También se dan casos de ports que
	  instalan instalan dos ficheros diferentes con el mismo
	  nombre.</para></note>

	<para>En algunos casos (raros) el usuario tendrá que
	  descargar los tarball de un sitio que no es el que se guarda
	  en la variable de entorno <varname>MASTER_SITES</varname>
	  (el sitio desde el que se descargan todos los demás
	  normalmente).  Puede sobreescribir la opción
	  <varname>MASTER_SITES</varname> con la siguiente
	  orden:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/directory</userinput>
&prompt.root; <userinput>make MASTER_SITE_OVERRIDE= \
ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ fetch</userinput></screen>

	<para>En este ejemplo vamos a darle a la opción
	  <varname>MASTER_SITES</varname> el valor <systemitem class="fqdomainname">ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/</systemitem>.</para>

	<note><para>Algunos ports permiten (o incluso exigen) que se le
	  faciliten opciones de compilación para activar o desactivar
	  partes de la aplicación que no se necesiten, determinadas
	  opciones de seguridad, etc.  Casos típicos de esto son
	  <package>www/mozilla</package>, <package>security/gpgme</package>, and <package>mail/sylpheed-claws</package>.  Cuando debe
	  usted tomar este tipo de decisiones se le muestra un mensaje
	  con las opciones disponibles.</para></note>


      <sect3>
        <title>Sobreescribir directorios por omisión de ports</title>

	<para>Algunas veces es útil (u obligatorio) utilizar un
	  directorio de trabajo o un «target» distinto al
	  que tenemos por omisión.  Las variables de entorno
	  <varname>WRKDIRPREFIX</varname> y <varname>PREFIX</varname>
	  pueden sobreescribirse según nuestra conveniencia.  Veamos
	  un ejemplo:</para>

	<screen>&prompt.root; <userinput>make WRKDIRPREFIX=/usr/home/ejemplo/ports install</userinput></screen>

	<para>compilará el port en
	    <filename>/usr/home/ejemplo/ports</filename> y lo instalará
	    en <filename>/usr/local</filename>.</para>

	<screen>&prompt.root; <userinput>make PREFIX=/usr/home/ejemplo/local install</userinput></screen>

	<para>lo compilará en <filename>/usr/ports</filename> y lo
	  instalará en
	  <filename>/usr/home/ejemplo/local</filename>.</para>

	<para>Y por supuesto,</para>

	<screen>&prompt.root; <userinput>make WRKDIRPREFIX=../ports PREFIX=../local install</userinput></screen>

	<para>combinará ambas; (ocupa demasiado para mostrarlo en una
	  página, pero la idea general queda clara).</para>

	<para>Puede asignar valores a estas variables del mismo modo
	  que a cualquier otra de su entorno.  Consulte la
	  documentación de su shell para más
	  información.</para>
      </sect3>

      <sect3>
	<title>Uso de <command>imake</command></title>

	<para>Algunos ports que usan <command>imake</command>
	  (un componente del Sistema X Window) no funcionan correctamente
	  con <varname>PREFIX</varname> e  insistirán en instalarse
	  en <filename>/usr/X11R6</filename>.  Del mismo modo
	  algunos ports de Perl ignoran <varname>PREFIX</varname> y se
	  instalan en el árbol de Perl.  Hacer que estos ports
	  respeten <varname>PREFIX</varname> es difícil y a veces
	  imposible.</para>
      </sect3>

      <sect3>
	<title>Reconfigurar ports</title>

	<para>Al compilar ciertos ports se le presentará un
	  menú basado en ncurses en el cual podrá elegir
	  entre más o menos opciones de compilación.  No es
	  raro que los usuarios quieran volver a usar ese menú para
	  añadir, quitar o cambiar opciones una vez que el port ya
	  está compilado.  Hay bastantes formas de hacerlo.  Una
	  manera es entrar al directorio que contiene el port y teclear
	  <command>make
	  config</command>, que hará que se
	  le presente de nuevo el menú con las opciones que estuvieran
	  seleccionadas previamente.  Otra opción es usar la orden
	  <command>make showconfig</command>, que
	  le mostrará todas las opciones de configuración del
	  port.  Hay otra opción más, <command>make
	  rmconfig</command>, que borrará
	  todas las opciones que estuvieran seleccionadas y le permitirá
	  por tanto empezar desde cero.  Todas estas opciones y muchas
	  más las encontrará descritas con gran detalle en
	  &man.ports.7;.</para>
      </sect3>


    </sect2>

    <sect2 xml:id="ports-removing">
      <title>Cómo desinstalar ports</title>

      <indexterm>
        <primary>ports</primary>
        <secondary>removing</secondary>
      </indexterm>
      <para>Ahora que sabe instalar ports probablemente quiera saber
        cómo eliminarlos; puede que haya instalado alguno y
        posteriormente se haya dado cuenta de que ha instalado el port
	incorrecto.  Vamos a desinstalar el port del ejemplo anterior
        (que, para todos aquellos que no estaban atentos,  era
	<command>lsof</command>).  Igual que al instalar ports, lo primero
	que debemos hacer es ubicarnos en el directorio del port que
	deseamos eliminar del sistema, en nuestro caso
	<filename>/usr/ports/sysutils/lsof</filename>.   Los ports se
	desinstalan exactamente igual que los packages; esto se
	explica en la <link linkend="packages-using">sección de packages</link>) utilizando
	la orden &man.pkg.delete.1;:</para>

      <screen>&prompt.root; <userinput>pkg_delete lsof-4.57</userinput></screen>
    </sect2>


    <sect2 xml:id="ports-upgrading">
      <title>Actualización de ports</title>

      <indexterm>
	<primary>ports</primary>
	<secondary>upgrading</secondary>
      </indexterm>
      <para>Antes de nada necesita ver una lista de ports instalados de
        los cuales exista una nueva versión en la Colección
	de Ports.  Utilice &man.pkg.version.1;:</para>

      <screen>&prompt.root; <userinput>pkg_version -v</userinput></screen>

      <sect3 xml:id="ports-file-updating">
	<title><filename>/usr/ports/UPDATING</filename></title>

	<para>Una vez actualizada la Colección de Ports (y
	  <emphasis>antes</emphasis> de intentar actualizar ningún
	  port) debe consultar
	  <filename>/usr/ports/UPDATING</filename>.  Este fichero describe
	  todas las novedades, problemas que pueden encontrarse y pasos que
	  deben seguir los usuarios al actualizar un port; hay cambios de
	  formato, cambios de ubicación de ficheros de
	  configuración o incompatibilidades con versiones
	  anteriores.</para>

	<para>Si <filename>UPDATING</filename> se contradice de cualquier modo
	  con lo que lea aquí tenga muy encuenta que lo que aparezca en
	  <filename>UPDATING</filename> tiene prioridad absoluta.</para>
      </sect3>

      <sect3 xml:id="portupgrade">
	<title>Actualización de ports con portupgrade</title>

	<indexterm>
	  <primary>portupgrade</primary>
	</indexterm>

      <para>La aplicación <application>portupgrade</application>
        se diseñó para actualizar fácilmente los ports
	instalados en un sistema.  Puede instalarla desde el port <package>ports-mgmt/portupgrade</package>.  La
	instalación es como al de cualquier otro port, use la orden
	<command>make install
	clean</command> command:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/ports-mgmt/portupgrade</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>Compruebe la lista de ports instalados con <command>pkgdb
	-F</command> y arregle todas las inconsistencias que aparezcan.  Le
	recomendamos que haga esta comprobación de forma regular y
	siempre antes de una actualización.</para>

      <para>Si ejecuta <command>portupgrade -a</command>
	<application>portupgrade</application> intentará actualizar
	todos y cada uno de los ports instalados en su sistema.  Utilice el
	parámetro <option>-i</option> si quiere que le pida
	confirmación antes de actualizar cada uno de los ports.</para>

      <screen>&prompt.root; <userinput>portupgrade -ai</userinput></screen>

      <para>Si solamente quiere actualizar una sola aplicación (y no
        absolutamente todos los ports) utilice la orden <command>portupgrade
	nombre-de-aplicación</command>.
	Añada el modificador <option>-R</option> si quiere que
	<application>portupgrade</application> actualice antes todos los
	ports de los que depende la aplicación en cuestión.</para>

      <screen>&prompt.root; <userinput>portupgrade -R firefox</userinput></screen>

      <para>Si quiere usar packages en lugar de ports use el modificador
	<option>-P</option> flag.  Con esta opción
	<application>portupgrade</application> busca en los directorios
	locales que aparezcan en <envar>PKG_PATH</envar> o descarga los
	packages desde un sitio remoto si es que no los encuentra en
	local.  Si es imposible encontrar los packages ni en local ni en
	remoto&nbsp;<application>portupgrade</application> utilizará
	ports.  Si no quiere usar ports pase lo que pase utilice el
	modificador <option>-PP</option>.</para>

      <screen>&prompt.root; <userinput>portupgrade -PP gnome2</userinput></screen>

      <para>Si quiere solamente descargar los distfiles (o los packages,
	usando <option>-P</option>) sin compilar ni instalar nada,
	use <option>-F</option>.  Para más información
	consulte &man.portupgrade.1;.</para>
      </sect3>

      <sect3 xml:id="portmanager">
	<title>Actualización de ports con portmanager</title>

	<indexterm>
	  <primary>portmanager</primary>
	</indexterm>

	<para><application>Portmanager</application> es otra aplicación
	  pensada para la actualización sencilla de ports instalados
	  en el sistema.  Puede encontrarla en
	  <package>ports-mgmt/portmanager</package>:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/ports-mgmt/portmanager</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	<para>Puede actualizar todos los ports que tenga instalados con
	  una sola orden:</para>

	<screen>&prompt.root; <userinput>portmanager -u</userinput></screen>

	<para>Si usa el modificador <option>-ui</option> se le pedirá
	  confirmación a cada paso que <application>Portmanager</application>
	  vaya a dar.  <application>Portmanager</application> también
	  puede usarse para instalar nuevos ports.  A diferencia del habitual
	  <command>make install clean</command>
	  actualizará todos los ports que dependan antes de compilar e
	  instalar ese port que queramos instalar.</para>

	<screen>&prompt.root; <userinput>portmanager x11/gnome2</userinput></screen>

	<para>Si aparecen problemas con las dependencias del port que quiere
	  instalar puede usar <application>Portmanager</application> para
	  recompilar todos ello en el orden correcto.  Una vez que acabe el
	  port que estaba dando problemas será también
	  recompilado.</para>

	<screen>&prompt.root; <userinput>portmanager graphics/gimp -f</userinput></screen>

	<para>Para más información consulte &man.portmanager.1;.</para>
      </sect3>

      <sect3 xml:id="portmaster">
	<title>Actualización de ports con portmaster</title>

	<indexterm>
	  <primary>portmaster</primary>
	</indexterm>

	<para><application>Portmaster</application> es otra aplicación
	  para actualizar ports.  <application>Portmaster</application> se
	  diseñó para que utilizara las herramientas del sistema
	  «base» (es decir, no depende de otros ports) y utiliza
	  la información que se almacena en el directorio
	  <filename>/var/db/pkg/</filename> para determinar
	  qué port es el que hay que actualizar.  Puede encontrarlo en
	  <package>ports-mgmt/portmaster</package>:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/ports-mgmt/portmaster</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

	<para><application>Portmaster</application> agrupa los ports en cuatro
	  categorías:</para>

	<itemizedlist>
	  <listitem>
	    <para>«Root ports» (no tienen dependencias, ningún port depende de ellos)</para>
	    </listitem>
	  <listitem>
	    <para>«Trunk ports» (no tienen dependencias, otros ports dependen de ellos)</para>
	    </listitem>
	  <listitem>
	    <para>«Branch ports» (tienen dependencias, otros ports dependen de ellos)</para>
	    </listitem>
	  <listitem>
	    <para>«Leaf ports» (tienen dependencias, ningún port depende de ellos)</para>
	    </listitem>
	</itemizedlist>

	<para>Puede ver una lista de los ports instalados y
	  buscar actualizaciones para ellos usando el modificador
	  <option>-L</option> :</para>

<screen>&prompt.root; <userinput>portmaster -L</userinput>
===&gt;&gt;&gt; Root ports (No dependencies, not depended on)
===&gt;&gt;&gt; ispell-3.2.06_18
===&gt;&gt;&gt; screen-4.0.3
        ===&gt;&gt;&gt; New version available: screen-4.0.3_1
===&gt;&gt;&gt; tcpflow-0.21_1
===&gt;&gt;&gt; 7 root ports
...
===&gt;&gt;&gt; Branch ports (Have dependencies, are depended on)
===&gt;&gt;&gt; apache-2.2.3
        ===&gt;&gt;&gt; New version available: apache-2.2.8
...
===&gt;&gt;&gt; Leaf ports (Have dependencies, not depended on)
===&gt;&gt;&gt; automake-1.9.6_2
===&gt;&gt;&gt; bash-3.1.17
        ===&gt;&gt;&gt; New version available: bash-3.2.33
...
===&gt;&gt;&gt; 32 leaf ports

===&gt;&gt;&gt; 137 total installed ports
        ===&gt;&gt;&gt; 83 have new versions available
</screen>

	<para>Con la siguiente orden puede actualizar todos los ports
	  del sistema:</para>

	<screen>&prompt.root; <userinput>portmaster -a</userinput></screen>

	<note><para>Por omisión <application>Portmaster</application>
	  guardará una copia de seguridad (un package) de cada port
	  antes de borrarlo.  Si la instalación de la nueva versión
	  funciona <application>Portmaster</application> borrará el package.
	  Si utiliza <option>-b</option> le dirá a
	  <application>Portmaster</application> que no borre automáticamente
	  el package.  Si usa el modificador <option>-i</option> arrancará
	  <application>Portmaster</application> en modo interactivo, lo que significa
	  que le pedirá confirmación antes de actualizar cada
	  port.</para></note>

	<para>Si se encuentra con errores durante el proceso de
	  actualización puede utilizar el modificador
	  <option>-f</option> para actualizar o recompilar todos
	  los ports:</para>

	<screen>&prompt.root; <userinput>portmaster -af</userinput></screen>

	<para>También puede usar
	  <application>Portmaster</application> para
	  instalar nuevos ports en el sistema, actualizando todas sus
	  dependencias antes de compilar e instalar el nuevo port:</para>

	<screen>&prompt.root; <userinput>portmaster shells/bash</userinput></screen>

	<para>Por favor, consulte &man.portmaster.8; para más
	  información.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="ports-disk-space">
      <title>Los ports y el espacio en disco</title>

      <indexterm>
        <primary>ports</primary>
        <secondary>disk-space</secondary>
      </indexterm>
      <para>Usar la Colección de Ports consume mucho espacio de
        disco según pasa el tiempo.  Por culpa de la tendencia del
        árbol de ports a crecer sin parar le recomendamos
	que después de compilar e instalar sofware desde los ports
        recuerde limpiar los directorios temporales <filename>work</filename> mediante la orden
        <command>make clean</command>.  Puede
	limpiar de un plumazo los directorios temporales de toda la
	Colección de Ports con la siguiente orden:</para>

	<screen>&prompt.root; <userinput>portsclean -C</userinput></screen>

      <para>Rápidamente acumulará gran cantidad de viejas
        distribuciones de código en
	<filename>distfiles</filename>.  Puede borrarlos
	a mano, pero también puede usar la siguiente orden para
	borrar todos los distfiles que no tengan relación con
	ningún port:</para>

      <screen>&prompt.root; <userinput>portsclean -D</userinput></screen>

      <para>También puede borrar todos los distfiles sin relación
      con ningún port instalado en el sistema:</para>

      <screen>&prompt.root; <userinput>portsclean -DD</userinput></screen>

      <note>
	<para><command>portsclean</command> forma parte de la
	  «suite» <application>portupgrade</application>.</para>
      </note>

      <para>No olvide borrar los ports instalados una vez que deja de
         necesitarlos.  Hay una herramienta muy útil para ayudar
	 a automatizar esta tarea:
	<package>ports-mgmt/pkg_cutleaves</package>.</para>

    </sect2>

  </sect1>

  <sect1 xml:id="ports-nextsteps">
    <title>Después de instalar un port</title>

    <para>Una vez que ha instalado una nueva aplicación normalmente
      deberáa leer toda la documentación que incluya, editar los
      ficheros de configuración necesarios, asegurarse de que la
      aplicación se ejecute al arrancar el sistema (si es un
      d&aelig;mon)etc.</para>

    <para>Obviamente los pasos exactos para configurar cada aplicación
      son distintos de una a otra.  De cualquier forma, si acaba de instalar
      aplicación y se pregunta
      «?Y ahora qué?» estos consejos puede que le
      ayuden:</para>

    <itemizedlist>
      <listitem>
	<para>Use &man.pkg.info.1; para ver qué ficheros se instalaron
	  y dónde.  Por ejemplo, si instalón
	  el paquete Un-Package 1.0.0, lo siguiente:</para>

	<screen>&prompt.root; <userinput>pkg_info -L un-package-1.0.0 | less</userinput></screen>

	<para>mostrará los ficheros instalados por el paquete.  Preste
	  especial atención a los ficheros en el directorio
	  <filename>man/</filename>, que son las páginas de ayuda y los
	  del directorio <filename>etc/</filename>, que contiene los ficheros
	  de configuración; bajo el directorio <filename>doc/</filename>
	  podrá encontrar información más
	  detallada.</para>

	<para>Si no está seguro de qué versión del
	  paquete ha instalado, teclée:</para>

	<screen>&prompt.root; <userinput>pkg_info | grep -i un-package</userinput></screen>

	<para>y verá todos los paquetes que se llaman
	  <replaceable>un-package</replaceable>.  Reemplace
	  <replaceable>un-package</replaceable> en la línea de
	  órdenes que tenga que usar en su caso.</para>
      </listitem>

      <listitem>
	<para>Una vez que ha identificado las páginas de manual
	  de la aplicación revíselas mediante &man.man.1;.
	  Revise también los ficheros de configuración,
	  así como cualquier otro tipo de documentación
	  que venga con el software.</para>
      </listitem>

      <listitem>
	<para>Si la aplicación tiene sitio web visítelo.
	  Es muy posible que encuentre más documentación,
	  listas de preguntas frecuentes (FAQ), etc.  Si no sabe cuál
	  puede ser la dirección del sitio web examine la
	  salida de la orden</para>

	<screen>&prompt.root; <userinput>pkg_info un-package-1.0.0</userinput></screen>

	<para>a veces incluye una línea <literal>WWW:</literal>, que
	  contiene la dirección del sitio web de la
	  aplicación.</para>
      </listitem>
      <listitem>
	<para>Los ports que deben arrancar con el sistema (como los
	  servidores de Internet) normalmente instalaran un
	  «script» de
	  ejemplo en <filename>/usr/local/etc/rc.d</filename>.  Debe
	  revisar este «script» para comprobar que todo sea
	  correcto, editarlo o renombrarlo si fuera necesario.  Consulte
	   <link linkend="configtuning-starting-services">Cómo arrancar
	    servicios</link> para más información.</para>

      </listitem>

    </itemizedlist>
  </sect1>
  <sect1 xml:id="ports-broken">
    <title>Ports que no funcionan</title>

      <para>Si encuentra un port que no funciona hay varias cosas
        que puede hacer:</para>

      <orderedlist>
	<listitem>
	  <para>Consulte en la
	    <link xlink:href="http://www.freebsd.org/support.html#gnats">Base
	    de datos de informes de error</link> si ya se ha publicado
	    un parche que lo solucione.  Si es el caso puede aplicar
	    aplicar el parche en su sistema.</para>
         </listitem>

	 <listitem>
	   <para>Pida ayuda al responsable del mantenimiento
	     (conocido como «mantainer») del port.
	     Teclée <command>make maintainer</command> o
	     consulte el
	     <filename>Makefile</filename> del port si no sabe cuál
	     es la dirección de correo del «mantainer».
	     Recuerde que debe incluir el nombre y la versión del
	     port.   Envíe la línea que contiene
	     <literal>&dollar;&os;:</literal> al principio del
	     <filename>Makefile</filename> del port y salida
	     con el error que obtiene al intentar usar la
	     aplicación.</para>

          <note>
	     <para>Algunos ports no son responsabilidad de un individuo
	       sino de <link xlink:href="http://www.freebsd.org/doc/en_US.ISO-8859-1/articles/mailing-list-faq/article.html">una lista de correo.</link>
	       Muchas, aunque no todas, tienen un aspecto parecido a
	       <email role="nolink">freebsd-nombredelalista@FreeBSD.org</email>.
	       Por favor, téngalo en cuenta cuando envie ese correo
	       sobre el port que no funciona.</para>

            <para>Hay un caso especial: Los ports que tienen como
	       «mantainer»
               <email role="nolink">freebsd-ports@FreeBSD.org</email> en
	       realidad no son responsabilidad de nadie.  Los parches
	       y el soporte, en caso de existir, vienen de la comunidad de
	       usuarios y desarrolladores que están suscritos
	       a la lista.  Por cierto, siempre hacen falta más
	       voluntarios.</para>
	  </note>

            <para>Si no recibe respuesta utilice &man.send-pr.1; para
	      enviar un informe de errores.  Consulte
	      <link xlink:href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/problem-reports/article.html">Cómo escribir informes de error</link>)
	      <footnote><para>
	        Hay traducción al castellano de este artículo.
		Está aquí: <uri xlink:href="http://www.freebsd.org/doc/es_ES.ISO8859-1/articles/problem-reports/article">http://www.freebsd.org/doc/es_ES.ISO8859-1/articles/problem-reports/article</uri>
	      </para></footnote>
	      </para>
	 </listitem>



        <listitem>
	  <para><emphasis>Arreglarlo</emphasis>. El «Porter's
	    Handbook» incluye información detallada
	    sobre la infraestructura de los ports, así que
	    puede arreglar un port roto o incluso enviar su propio
	    port.</para>
	</listitem>


	<listitem>
	  <para>Descargue el paquete de algún sitio FTP.  El
	    servidor «principal» de la colección
	    de paquetes está en el
	    <link xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/">directorio
	    de paquetes</link> de
	    <systemitem class="fqdomainname">ftp.FreeBSD.org</systemitem>
	    <emphasis>pero asegúrese de mirar antes en la
	    réplica más próxima</emphasis>.
	    Esta es una forma de instalar aplicaciones más
	    fácil y más rápida.
	    Instale el paquete mediante &man.pkg.add.1;.</para>
	</listitem>
      </orderedlist>
  </sect1>

</chapter>
