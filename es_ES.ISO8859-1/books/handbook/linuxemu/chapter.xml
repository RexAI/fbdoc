<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Documentation Project


     The FreeBSD Spanish Documentation Project

     %SOURCE% en_US.ISO8859-1/books/handbook/linuxemu/chapter.xml
     %SRCID%    1.136

     $FreeBSD$
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="linuxemu">
  <info><title>Compatibilidad binaria con Linux</title>
    <authorgroup>
      <author><personname><firstname>Jim</firstname><surname>Mock</surname></personname><contrib>Reestructurado y actualizado por </contrib></author>
      <!-- 22 Mar 2000 -->
    </authorgroup>
    <authorgroup>
      <author><personname><firstname>Brian N.</firstname><surname>Handy</surname></personname><contrib>Escrito por </contrib></author>
      <author><personname><firstname>Rich</firstname><surname>Murphey</surname></personname></author>
    </authorgroup>
  </info>

  

  <sect1 xml:id="linuxemu-synopsis">
    <title>Sinopsis</title>
    <indexterm><primary>compatibilidad binaria con Linux</primary></indexterm>
    <indexterm>
      <primary>compatibilidad binaria</primary>
      <secondary>Linux</secondary>
    </indexterm>

    <para>&os; proporciona compatibilidad de binarios con muchos otros
      sistemas operativos tipo &unix;, incluyendo Linux.
      Puede estarse preguntando ?por qué necesita
      &os; ejecutar binarios de Linux?  La
      respuesta a esa pregunta es muy simple.  Muchos desarrolladores y
      compañías desarrollan sólo para Linux, ya
      que últimamente es el blanco de todas las miradas dentro del
      mundo de las tecnologís de la información.
      Esto hace que la comunidad &os; tenga que exigir a esas
      compañías y desarrolladores que produzcan versiones
      nativas de sus aplicaciones para &os;.
      El problema es que la mayoría de esas compañías
      no suelen saber realmente cuánta gente utilizaría
      su producto si existieran esas versiones para &os;, y
      la mayoría continúa desarrollando únicamente
      para Linux.
      Vista la situación ?que puede hacer un usuario de &os;?
      Aquí es donde entra en juego la compatibilidad binaria con
      Linux.</para>

    <para>Para expresarlo en pocas palabras, dicha compabitilidad permite
      a los usuarios de &os; cerca del 90% de las aplicaciones de Linux sin
      tener que modificarlas en absoluto.  Entre estas está
      <application>&staroffice;</application>,
      la versión Linux de <application>&netscape;</application>,
      <application>&adobe;&nbsp;&acrobat;</application>,
      <application>RealPlayer</application>,
      <application>VMware</application>,
      <application>&oracle;</application>,
      <application>WordPerfect</application>, <application>Doom</application>,
      <application>Quake</application> y muchas más. En determinados
       casos los binarios Linux rinden mejor en &os; que en Linux.</para>

    <para>Existen, por desgracia, ciertas características
      específicas de Linux que no funcionan en &os;.
      Los binarios Linux no funcionarán en &os; si recurren a
      llamadas específicas de &i386; como la activación
      del modo virtual 8086.</para>

    <para>Tras leer este capítulo sabrá usted:</para>
    <itemizedlist>
      <listitem>
        <para>cómo activar la compatibilidad binaria con Linux en su
          sistema.</para>
      </listitem>

      <listitem>
        <para>cómo instalar bibliotecas compartidas de Linux que pueda
          necesitar.
	  </para>
	</listitem>

      <listitem>
        <para>cómo instalar aplicaciones de Linux en su sistema &os;.</para>
      </listitem>

      <listitem>
        <para>cuáles son los detalles de la implementación de
          compatibilidad binaria con Linux en &os;.</para>
      </listitem>
    </itemizedlist>

    <para>Antes de leer este capítulo es necesario que sepa:</para>

    <itemizedlist>
      <listitem>
        <para>cómo instalar software de
          terceros (<xref linkend="ports"/>).</para>
      </listitem>
    </itemizedlist>

  </sect1>

  <sect1 xml:id="linuxemu-lbc-install">
    <title>Instalación</title>

    <indexterm><primary>KLD (objeto cargable del kernel)</primary></indexterm>

    <para>La compatibilidad binaria con Linux no viene activada
      por omisión.  La forma más sencilla de habilitarla
      es cargar el KLD (<quote>objeto cargable en el kernel</quote>)
      <literal>linux</literal>.  Como usuario
      <systemitem class="username">root</systemitem> proceda del siguiente modo:</para>

    <screen>&prompt.root; <userinput>kldload linux</userinput></screen>

    <para>Si quiere que la compatibilidad con Linux esté
      siempre activada tendrá que añadir la siguiente
      línea en <filename>/etc/rc.conf</filename>:</para>

    <programlisting>linux_enable="YES"</programlisting>

    <para>Utilice &man.kldstat.8; para verificar que el KLD
      esté cargado:</para>

    <screen>&prompt.user; <userinput>kldstat</userinput>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</screen>
    <indexterm>
      <primary>kernel options</primary>
      <secondary>LINUX</secondary>
    </indexterm>

    <para>Si por alguna razón no desea o no puede cargar el KLD,
      entonces puede enlazar estáticamente la compatibilidad de binarios
      Linux en el kernel agregando <literal>options COMPAT_LINUX</literal>
      a su fichero de configuración del kernel. Luego instale
      su nuevo kernel como se describe en
      <xref linkend="kernelconfig"/>.</para>

    <sect2>
      <title>Instalación de bibliotecas de ejecución Linux</title>
      <indexterm>
	<primary>Linux</primary>
	<secondary>instalación de bibliotecas Linux</secondary>
      </indexterm>

      <para>Puede hacerse de dos maneras, ya sea usando
        el port <link linkend="linuxemu-libs-port">linux_base</link>,
        o instalándolas
	<link linkend="linuxemu-libs-manually">de forma manual</link>.</para>

      <sect3 xml:id="linuxemu-libs-port">
	<title>Instalación usando el port linux_base</title>
	<indexterm><primary>colección de ports</primary></indexterm>

        <para>Este es con mucho el método mas sencillo
          para instalar bibliotecas de ejecución.  Es como
          instalar cualquier otro port de la
          <link xlink:href="file://localhost/usr/ports/">Colección
          de Ports</link>. Es tan sencillo como esto:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/emulators/linux_base</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

        <para>Hecho esto debería disponer de compatibilidad binaria con
          Linux.  Algunos programas pueden <quote>quejarse</quote> por
          la presencia de versiones antiguas de algunas bibliotecas del
          sistema.  Generalmente esto no suele ser un problema muy
	  grave.</para>

        <note><para>Pueden coexistir múltiples versiones
          del port <package>emulators/linux_base</package>
          disponibles correspondientes a distintas versiones de diversas
          distribuciones de Linux.  Tendrá que instalar el port
          que más se ajuste a las necesidades de las aplicaciones
          de Linux que quiera instalar.</para></note>

      </sect3>

      <sect3 xml:id="linuxemu-libs-manually">
	<title>Instalación manual de bibliotecas</title>

        <para>Si, por el motivo que fuese, no tiene instalada
          la colección de ports puede instalar las bibliotecas
          que necesite de forma manual.
          Necesitará las bibliotecas compartidas Linux de
          las que depende el programa y el enlazador en tiempo de
          ejecución (<quote>runtime linker</quote>).
          Necesitará también
          crear un directorio
          <filename>/compat/linux</filename> donde alojar las bibliotecas
          Linux en su sistema &os;  Cualquier biblioteca compartida a la
          que haya recurrido un programa de Linux ejecutado en &os;
          buscará en primer lugar en dicho directorio.
          Por lo tanto, si se carga un
          programa Linux, por ejemplo <filename>/lib/libc.so</filename>,
          &os; intentará en primer lugar abrir
          <filename>/compat/linux/lib/libc.so</filename> y, si no
          existe, lo intentará con
	  <filename>/lib/libc.so</filename>.  Las bibliotecas
	  compartidas deben instalarse en
	  <filename>/compat/linux/lib</filename> en lugar de las rutas que
	  el <command>ld.so</command> de Linux proporcione.</para>

        <para>En general, necesitará buscar las bibliotecas
          compartidas de las que los binarios Linux dependen
          sólamente las primeras veces que instale un programa
          Linux en su &os;.  Más adelante tendrá un conjunto
          suficiente de bibliotecas compartidas Linux en su sistema
          para poder ejecutar binarios Linux sin que tenga que hacer nada
          más.</para>
      </sect3>

      <sect3>
        <title>Cómo instalar bibliotecas compartidas adicionales</title>
	<indexterm><primary>bibliotecas compartidas</primary></indexterm>

        <para>?Que pasaría si instalara el port
	  <filename>linux_base</filename> y su aplicación
	  todavía tuviera problemas debido a bibliotecas compartidas
          que no encuentra en el sistema?
	  ?Cómo saber qué bibliotecas compartidas
	  necesitan los binarios Linux? Básicamente hay dos
          posibilidades (para poder ejecutar las siguientes instrucciones
	  necesitará estar como <systemitem class="username">root</systemitem>
	  </para>

        <para>Si tiene acceso a un sistema Linux busque en él
          qué bibliotecas necesita la aplicación, y
          cópielas a su sistema &os;.  Veamos unos ejemplos:
          </para>

	<informalexample>
          <para>Asumiremos que utilizó FTP para conseguir los
            binarios Linux de <application>Doom</application> y los
            puso en un sistema Linux.
            Para ver qué bibliotecas compartidas necesitará
            ejecute <command>ldd linuxdoom</command>:</para>

	  <screen>&prompt.user; <userinput>ldd linuxdoom</userinput>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</screen>

	  <indexterm><primary>enlaces simbólicos</primary></indexterm>
          <para>Necesitaría todos los ficheros de la
            segunda columna, y tendrá que ponerlos en
            <filename>/compat/linux</filename> con los nombres de
            la primera columna como enlaces
            simbólicos apuntando hacia ellos.  De este modo
            tendría en su sistema &os; los siguientes ficheros:
            </para>

	  <screen>/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</screen>

	  <blockquote>
	    <note>
              <para>Recuerde que si ya tiene una biblioteca
                compartida Linux con un número de versión
                mayor que coincida con la primera columna de la salida de
                <command>ldd</command> no necesitará copiar el
                fichero que aparece en la última columna;
                el que tiene debería funcionar, aunque se aconseja
                copiar la biblioteca compartida de todas maneras
                si es una nueva versión.  Puede eliminar la vieja
                siempre que haga que el enlace simbólico apunte
                a la nueva.  Si tiene estas bibliotecas
                en su sistema:</para>

	      <screen>/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</screen>

              <para>y  un binario requiere
                una versión más reciente (como indica la
                siguiente salida de <command>ldd</command>):</para>

	      <screen>libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</screen>

              <para>si solo ve una o dos versiones desfasadas en los
                últimos dígitos no se preocupe
                de copiar <filename>/lib/libc.so.4.6.29</filename>,
                el programa debería funcionar
                bien con una versión ligeramente antigua.
                De todas formas, si así lo prefiere, puede actualizar
                <filename>libc.so</filename>; el resultado sería
                este:</para>

	      <screen>/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</screen>
	    </note>
	  </blockquote>

	  <blockquote>
	    <note>
              <para>El mecanismo de enlazado simbólico
                <emphasis>sólamente</emphasis> es necesario con
                binarios Linux.  El enlazador en tiempo de ejecución
                de &os; se encarga de buscar él mismo las versiones
                correctas, así que no tendrá que preocuparse
                usted de hacerlo.</para>
	    </note>
	  </blockquote>
	</informalexample>
      </sect3>
    </sect2>

    <sect2>
      <title>Instalar binarios ELF Linux</title>
      <indexterm>
	<primary>Linux</primary>
	<secondary>binarios ELF</secondary>
      </indexterm>

      <para>Los binarios ELF algunas veces requieren un paso extra de
        <quote>marcado</quote>.  Si trata de ejecutar un binario ELF no
        marcado recibirá un mensaje de error como el siguiente:</para>

      <screen>&prompt.user; <userinput>./mi-binario-elf</userinput>
ELF binary type not known
Abort</screen>

      <para>Para ayudar al kernel de FreeBSD a distinguir entre un binario
        ELF de &os; y uno de Linux utilice &man.brandelf.1;.</para>

      <screen>&prompt.user; <userinput>brandelf -t Linux mi-binario-elf-de-linux</userinput></screen>

      <indexterm><primary>GNU toolchain</primary></indexterm>
      <para>Las herramientas GNU se encargan de ubicar automáticamente
        la marca apropiada en los binarios ELF, por lo tanto este
        paso será innecesario en un futuro próximo.</para>

    </sect2>

    <sect2>
      <title>Configuración de la resolución de nombres de
       equipos</title>

      <para>Si el DNS no funciona u obtiene este mensaje:</para>

      <screen>resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</screen>

      <para>Necesitará un fichero
        <filename>/compat/linux/etc/host.conf</filename>
        con el siguiente contenido:</para>

      <programlisting>order hosts, bind
multi on</programlisting>

      <para>Significa que
        <filename>/etc/hosts</filename> seráanalizado en primer lugar
        y después se usará DNS.
	Si <filename>/compat/linux/etc/host.conf</filename> no
        está instalado, las aplicaciones Linux usan el
	<filename>/etc/host.conf</filename> de &os; y chocan con la
	sintaxis (incompatible) de &os;.  Borre
	<literal>bind</literal> de su <filename>/etc/resolv.conf</filename>
        si no tiene configurado un servidor de nombres.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="linuxemu-mathematica">
    <info><title>Instalación de &mathematica;</title>
      <authorgroup>
	<author><personname><firstname>Hollas</firstname><surname>Boris</surname></personname><contrib>Actualizado para Mathematica 5.X por </contrib></author>
      </authorgroup>
     </info>
    

    <indexterm>
      <primary>aplicaciones</primary>
      <secondary><application>Mathematica</application></secondary>
    </indexterm>

    <para>Este documento describe el proceso de instalación
      de la versión para Linux de
      <application>&mathematica; 5.X</application> en un sistema
      &os;.</para>

    <para>Puede pedir a Wolfram, el fabricante, La versión para
      para Linux de <application>&mathematica;</application> o
      la versión de
      <application>&mathematica; para estudiantes</application>
      en su sitio web,
      <uri xlink:href="http://www.wolfram.com/">http://www.wolfram.com/</uri>.</para>


    <sect2>
      <title>El instalador de &mathematica;</title>

      <para>Lo primero que tiene que hacer es decirle a &os;
	que los binarios de <application>&mathematica;</application>
	para Linux utilizan la ABI Linux.  La forma más
	sencilla de hacerlo es marcar por omisión todos los
	binarios sin marcas como Linux ELF.</para>

      <screen>&prompt.root; <userinput>sysctl kern.fallback_elf_brand=3</userinput></screen>

      <para>Hecho esto &os; asumirá que cualquier binario
        sin marca que encuentre utiliza la ABI Linux; de este modo
	podrá ejecutar el binario directamente desde el
	CDROM.</para>

      <para>Copie el fichero <filename>MathInstaller</filename> en su
        disco duro</para>

      <screen>&prompt.root; <userinput>mount /cdrom</userinput>
&prompt.root; <userinput>cp /cdrom/Unix/Installers/Linux/MathInstaller /directoriolocal/</userinput></screen>

      <para>Edite este fichero y sustituya la primera línea,
        <literal>/bin/sh</literal>, por
	<literal>/compat/linux/bin/sh</literal> para asegurarnos de
	que lo que ejecute el instalador sea la verión
	de &man.sh.1; de Linux.  El siguiente paso es sustituir todos
	los <literal>Linux)</literal> por <literal>FreeBSD)</literal>
	con un editor de texto on con el script que encontrará
	en la siguiente sección.  Esto se hace para ayudar al
	instalador de <application>&mathematica;</application>,
	el cual en un cierto momento invoca a
	<command>uname -s</command> para determinar el sistema operativo,
	a tratar a &os; como si fuera un sistema operativo muy similar
	a Linux.  Hecho todo esto, cuando ejecute
	<command>MathInstaller</command> podrá instalar
	<application>&mathematica;</application>.</para>
    </sect2>

    <sect2>
      <title>Modificación de los ejecutables de &mathematica;</title>

      <para>Debe modificar los scripts de shell que
	<application>&mathematica;</application> creó durante
	la instalación antes de usarlos.  Si eligió
	ubicar en
	<filename>/usr/local/bin</filename>
	los ejecutables de
	<application>&mathematica;</application> verá que
	en ese directorio hay enlaces simbólicos a ficheros
	como <filename>math</filename>, <filename>mathematica</filename>,
	<filename>Mathematica</filename> y
	<filename>MathKernel</filename>.  En cada uno de esos ficheros debe
	sustituir <literal>Linux)</literal> por <literal>FreeBSD)</literal>
	con un editor de texto o bien con el siguiente script de
	shell:</para>

      <programlisting>#!/bin/sh
cd /usr/local/bin
for i in math mathematica Mathematica MathKernel
  do sed 's/Linux)/FreeBSD)/g' $i &gt; $i.tmp
  sed 's/\/bin\/sh/\/compat\/linux\/bin\/sh/g' $i.tmp &gt; $i
  rm $i.tmp
  chmod a+x $i
done</programlisting>
    </sect2>

    <sect2>
      <title>Cómo obtener una contraseña de &mathematica;</title>

      <indexterm>
	<primary>Ethernet</primary>
	<secondary>MAC address</secondary>
      </indexterm>

      <para>Cuando arranque <application>&mathematica;</application>
	por primera vez se le pedirá una contraseña.  Si
	Wolfram no le ha enviado ya necesita un <quote>machine ID</quote>,
	para lo cual debe ir al directorio de instalación y ejecutar
	<command>mathinfo</command>.  Este <quote>machine IDE</quote>
	se obtiene de la dirección MAC de la primera tarjeta
	Ethernet de la máquina y tiene como objetivo que no
	pueda ejecutar <application>&mathematica;</application> en
	más de una máquina.</para>

      <para>Durante el proceso de registro en Wolfram (ya sea por
        correo electrónico, teléfono o fax) les dará
	el <quote>machine ID</quote> y Wolfram le enviará una
	contraseña relacionada con él, consistente en grupos
	de números.</para>
    </sect2>

    <sect2>
      <title>Ejecución del «frontend» de &mathematica;
        través de una red</title>

      <para><application>&mathematica;</application> usa unos cuantos
        tipos especiales para mostrar caracteres que no están
	en ningún conjunto estándar de tipos: integrales,
	sumas, letras griegas, etc.  El protocolo X exige que los
	tipos estén instalados
	<emphasis>en local</emphasis>, es decir, tiene que copiar los
	tipos del CDROM o la máquina desde la que ha instalado
	<application>&mathematica;</application> a su
	máquina.  Los tipos están en el directorio del CDDROM
	<filename>/cdrom/Unix/Files/SystemFiles/Fonts</filename> y se
	supone que deben estar en su disco duro en el directorio
	<filename>/usr/local/mathematica/SystemFiles/Fonts</filename>.  Los
	tipos están realmente en los subdirectorios
	<filename>Type1</filename> y <filename>X</filename>.  Hay varias
	formas de utilizarlos.</para>

      <para>La primera es copiarlos en uno de los directorios de tipos
	que hay en <filename>/usr/X11R6/lib/X11/fonts</filename>, antes
	de lo cual tendrá que añadir a
	<filename>fonts.dir</filename> los nombres de los tipos;
	tendrá también que cambiar el número de
	tipos en la primera línea.  Por otra parte, todo esto
	puede hacerse ejecutando &man.mkfontdir.1; en el directorio
	donde haya copiado los tipos.</para>

      <para>La segunda forma de utilizar estos tipos es copiarlos
        bajo
	<filename>/usr/X11R6/lib/X11/fonts</filename>:</para>

      <screen>&prompt.root; <userinput>cd /usr/X11R6/lib/X11/fonts</userinput>
&prompt.root; <userinput>mkdir X</userinput>
&prompt.root; <userinput>mkdir MathType1</userinput>
&prompt.root; <userinput>cd /cdrom/Unix/Files/SystemFiles/Fonts</userinput>
&prompt.root; <userinput>cp X/* /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>cp Type1/* /usr/X11R6/lib/X11/fonts/MathType1</userinput>
&prompt.root; <userinput>cd /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>mkfontdir</userinput>
&prompt.root; <userinput>cd ../MathType1</userinput>
&prompt.root; <userinput>mkfontdir</userinput></screen>

      <para>Añada los nuevos directorios de tipos a su ruta de
        tipos:</para>

      <screen>&prompt.root; <userinput>xset fp+ /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>xset fp+ /usr/X11R6/lib/X11/fonts/MathType1</userinput>
&prompt.root; <userinput>xset fp rehash</userinput></screen>

      <para>Si usa el servidor <application>&xorg;</application>
        puede cargar los tipos automáticamente
	añadiéndolos al fichero
	<filename>xorg.conf</filename>.</para>

      <note><para>En servidores <application>&xfree86;</application>
	el fichero de configuración es
	<filename>XF86Config</filename>.</para></note>
      <indexterm><primary>fonts</primary></indexterm>

      <para>Si <emphasis>no</emphasis> tiene ya en su sistema un
	directorio <filename>/usr/X11R6/lib/X11/fonts/Type1</filename>
	puede cambiarle el nombre al directorio
	<filename>MathType1</filename> del ejemplo anterior
	por <filename>Type1</filename>.</para>
    </sect2>


  </sect1>

  <sect1 xml:id="linuxemu-maple">
    <info><title>Instalación de &maple;</title>
      <authorgroup>
	<author><personname><firstname>Aaron</firstname><surname>Kaplan</surname></personname><contrib>Escrito por </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Robert</firstname><surname>Getschmann</surname></personname><contrib>Gracias a </contrib></author>
      </authorgroup>
    </info>
    

    <indexterm>
      <primary>aplicaciones</primary>
      <secondary><application>Maple</application></secondary>
    </indexterm>

    <para><application>&maple;</application> es un programa comercial
      de matemáticas
      similar a <application>&mathematica;</application>.  Puede adquirir
      este software en
      <uri xlink:href="http://www.maplesoft.com/">http://www.maplesoft.com/</uri>;  tras registrarlo
      recibirá un fichero de licencia.  Si quiere instalar este
      software en &os; siga los siguienes pasos:</para>

      <procedure>
        <step><para>Ejecute el <quote>script</quote> de shell
          <filename>INSTALL</filename>
          desde el lugar de instalación del producto.  Elija
          la opción <quote>RedHat</quote> cuando
          le pregunte el programa de instalación.
          <filename>/usr/local/maple</filename>
	  es un buen sitio para instalar el software.</para></step>

        <step><para>Si no lo ha hecho ya, solicite una licencia
	  para <application>&maple;</application>
          a Maple Waterloo Software (<uri xlink:href="http://register.maplesoft.com/">http://register.maplesoft.com/</uri>)
          y cópiela a
	  <filename>/usr/local/maple/license/license.dat</filename>.</para></step>

        <step><para>Instale el gestor de licencias
	  <application>FLEXlm</application>
          ejecutando el <quote>script</quote> de shell de instalación
          <filename>INSTALL_LIC</filename>
          que viene con <application>&maple;</application>.  Introduzca
          el nombre de su máquina (el servidor de licencias
          lo necesita).</para></step>

        <step><para>Parchée el fichero
          <filename>/usr/local/maple/bin/maple.system.type</filename>
          con lo siguiente:</para>

<programlisting>   ----- snip ------------------
*** maple.system.type.orig      Sun Jul  8 16:35:33 2001
--- maple.system.type   Sun Jul  8 16:35:51 2001
***************
*** 72,77 ****
--- 72,78 ----
          # the IBM RS/6000 AIX case
          MAPLE_BIN="bin.IBM_RISC_UNIX"
          ;;
+     "FreeBSD"|\
      "Linux")
          # the Linux/x86 case
        # We have two Linux implementations, one for Red Hat and
   ----- snip end of patch -----</programlisting>

        <para>Tenga muy presente que después de
          <literal>"FreeBSD"|\</literal>
          no debe haber ningún espacio en blanco.</para>

        <para>Este parche le dice a <application>&maple;</application>
          que interprete <quote>FreeBSD</quote> como un tipo de sistema
          Linux.  El <quote>script</quote> de shell
          <filename>bin/maple</filename>
          llama al <quote>script</quote> de shell
          <filename>bin/maple.system.type</filename>,
          que a su vez recurre a <command>uname -a</command> para
          dictaminar el nombre del sistema operativo.  Dependiendo de
          cuál sea sabrá qué binarios
          utilizar.</para></step>

      <step><para>Inicio del servidor de licencias.</para>

        <para>El siguiente <quote>script</quote>, sito en
          <filename>/usr/local/etc/rc.d/lmgrd.sh</filename>,  le
          permitirá arrancar <command>lmgrd</command>:</para>

	<programlisting>   ----- snip ------------

#! /bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
PATH=${PATH}:/usr/local/maple/bin:/usr/local/maple/FLEXlm/UNIX/LINUX
export PATH

LICENSE_FILE=/usr/local/maple/license/license.dat
LOG=/var/log/lmgrd.log

case "$1" in
start)
	lmgrd -c ${LICENSE_FILE} 2&lt;&lt; ${LOG} 1&lt;&amp;2
	echo -n " lmgrd"
	;;
stop)
	lmgrd -c ${LICENSE_FILE} -x lmdown 2&lt;&lt; ${LOG} 1&lt;&amp;2
	;;
*)
	echo "Usage: `basename $0` {start|stop}" 1&lt;&amp;2
	exit 64
	;;
esac

exit 0
   ----- snip ------------</programlisting></step>


      <step><para>Prueba de arranque de <application>&maple;</application>:</para>
	<screen>&prompt.user; <userinput>cd /usr/local/maple/bin</userinput>
&prompt.user; <userinput>./xmaple</userinput></screen>

        <para>Todo debería funcionar perfectamente.  Si es así
          aún le queda un último paso: escribir a
          Maplesoft y decirles que sería genial una versión
          nativa para &os;.</para></step>
    </procedure>

    <sect2>
      <title>Problemas frecuentes</title>

      <itemizedlist>
        <listitem><para>El gestor de licencias
	  <application>FLEXlm</application> puede ser un tanto
          difícil de usar.  En caso de necesitarla tiene
          más información en
          <uri xlink:href="http://www.globetrotter.com/">http://www.globetrotter.com/</uri>.</para></listitem>

        <listitem><para><command>lmgrd</command> tiene una reconocida fama
          de ser muy meticuloso en todo lo relacionado con el fichero de
          licencia; suele generar volcados de memoria si se encuentra con
          algún problema.  Un fichero de licencia correcto tiene
          que parecerse mucho a este:</para>

<programlisting># =======================================================
# License File for UNIX Installations ("Pointer File")
# =======================================================
SERVER chillig ANY
#USE_SERVER
VENDOR maplelmg

FEATURE Maple maplelmg 2000.0831 permanent 1 XXXXXXXXXXXX \
         PLATFORMS=i86_r ISSUER="Waterloo Maple Inc." \
         ISSUED=11-may-2000 NOTICE=" Technische Universitat Wien" \
         SN=XXXXXXXXX</programlisting>

          <note><para>El número de serie y la clave han sido
            sobreescritos con X.
            <systemitem>chillig</systemitem> es el nombre de un equipo.</para></note>

          <para>Puede editar el fichero de licencia siempre que no
            toque la línea <quote>FEATURE</quote> (que está
            protegida por la clave de la licencia).</para></listitem>
      </itemizedlist>
    </sect2>
  </sect1>

  <sect1 xml:id="linuxemu-matlab">
    <info><title>Instalación de &matlab;</title>
      <authorgroup>
	<author><personname><firstname>Dan</firstname><surname>Pelleg</surname></personname><contrib>Escrito por </contrib></author>
	<!-- daniel+handbook@pelleg.org -->
      </authorgroup>
    </info>
    

    <indexterm>
      <primary>aplicaciones</primary>
      <secondary><application>MATLAB</application></secondary>
    </indexterm>

    <para>Este documento describe el proceso de instalación de
      la versión para Linux de
      <application>&matlab; version 6.5</application>
      en &os;.  En general funciona bastante bien, excepción
      hecha de <application>&java.virtual.machine;</application>
      (consulte la <xref linkend="matlab-jre"/>).</para>

    <para>La versión Linux de <application>&matlab;</application>
      puede pedirse directamente en el sitio de  The MathWorks,
      <uri xlink:href="http://www.mathworks.com">http://www.mathworks.com</uri>.  Tiene que
      recibir también el fichero de licencia o instrucciones
      de cómo crearlo.  Al hacer su pedido aproveche para decirles
      que sería muy buena idea que ofrecieran una versión
      nativa de su software para &os;.</para>

    <sect2>
      <title>Instalación de &matlab;</title>

      <para>Para instalar <application>&matlab;</application>
        haga lo siguiente:</para>

      <procedure>
	<step>
          <para>Inserte el CD de instalación y móntelo.
            Conviértase en <systemitem class="username">root</systemitem> e
            inicie la instalación:</para>

	  <screen>&prompt.root; <userinput>/compat/linux/bin/sh /cdrom/install</userinput></screen>

	  <tip>
            <para>El instalador es gráfico. Si obtiene errores
              acerca de no ser capaz de abrir un display teclée
              <command>setenv HOME ~USUARIO</command>,
              donde <replaceable>USUARIO</replaceable> es el nombre del
              usuario con el que hizo &man.su.1;.</para>
	  </tip>
	</step>

	<step>
          <para>Teclée
	    <userinput>/compat/linux/usr/local/matlab</userinput>
            donde el instalador le pida el directorio raíz de
            <application>&matlab;</application>.</para>

	  <tip>
            <para>Esto último le facilitará la entrada de datos
              durante el resto de la instalación.  Introduzca lo
              siguiente en el <quote>prompt</quote> de su shell:
	      <command>set MATLAB=/compat/linux/usr/local/matlab</command></para>
	  </tip>
	</step>

	<step>
          <para>Edite el fichero de licencia tal y como consta en las
            instrucciones de la licencia de <application>&matlab;</application>.</para>

	  <tip>
            <para>Puede tenerlo ya editado y copiado a
              <filename>$MATLAB/license.dat</filename> desde antes de que
              el instalador se lo pida.</para>
	  </tip>
	</step>

	<step>
	  <para>Complete el proceso de instalación.</para>
	</step>
      </procedure>

      <para>La instalación <application>&matlab;</application>
        ha finalizado. Los siguientes pasos aplicarán el
        <quote>pegamento</quote> necesario para conectarlo a su
        sistema &os;.</para>
    </sect2>

    <sect2>
      <title>Inicio del administrador de licencias</title>
      <procedure>
	<step>
	  <para>Crée los enlaces simbólicos que necesitan los
            <quote>scripts</quote> del administrador
            de licencias:</para>

	  <screen>&prompt.root; <userinput>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</userinput>
&prompt.root; <userinput>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</userinput></screen>
	</step>

	<step>
          <para>Crée un fichero de inicio en
            <filename>/usr/local/etc/rc.d/flexlm.sh</filename>.
            El siguiente ejemplo es una versión modificada de
            <filename>$MATLAB/etc/rc.lm.glnx86</filename> que viene con
            la distribución de <application>&matlab;</application>.
            Los cambios que se han hecho en él obedecen a la
            ubicación de los ficheros y el arranque del
            administrador de licencias bajo emulación de Linux.
            </para>

	  <programlisting>#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <replaceable>nombre-de-usuario</replaceable> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</programlisting>

	  <important>
            <para>El fichero debe ser ejecutable:</para>

	    <screen>&prompt.root; <userinput>chmod +x /usr/local/etc/rc.d/flexlm.sh</userinput></screen>

            <para>Tendrá que reemplazar la entrada
              <replaceable>nombre-de-usuario</replaceable> de
              nuestro ejemplo por un nombre de usuario
              válido en su sistema
              (que no sea <systemitem class="username">root</systemitem>).</para>
	  </important>
	</step>

	<step>
	  <para>Arranque el administrador de licencias:</para>

	  <screen>&prompt.root; <userinput>/usr/local/etc/rc.d/flexlm.sh start</userinput></screen>
	</step>
      </procedure>
    </sect2>

    <sect2 xml:id="matlab-jre">
      <title>Enlace del entorno de ejecución &java;</title>

      <para>Cambie el enlace del entorno de ejecución
        <application>&java;</application>
        (JRE) a uno que funcione en &os;:</para>

      <screen>&prompt.root; <userinput>cd $MATLAB/sys/java/jre/glnx86/</userinput>
&prompt.root; <userinput>unlink jre; ln -s ./jre1.1.8 ./jre</userinput></screen>
    </sect2>

    <sect2>
      <title>Creación de un <quote>script</quote> de arranque
        para &matlab;</title>

      <procedure>
	<step>
	  <para>Coloque el siguiente <quote>script</quote> de arranque en
	    <filename>/usr/local/bin/matlab</filename>:
	  </para>

	  <programlisting>#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</programlisting>
	</step>

	<step>
	  <para>Escriba
	    <command>chmod +x /usr/local/bin/matlab</command>.</para>
	</step>
      </procedure>

      <tip>
        <para>Dependiendo de su versión de
          <package>emulators/linux_base</package> tal
          vez obtenga errores al ejecutar este <quote>script</quote>.
          Para evitarlo edite
          <filename>/compat/linux/usr/local/matlab/bin/matlab</filename>
          y cambie la línea en la que aparece:</para>

	<programlisting>if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</programlisting>

	<para>(en la versión 13.0.1 es en la línea 410) por
	  esta otra línea:</para>

	<programlisting>if test -L $newbase; then</programlisting>
      </tip>
    </sect2>

    <sect2>
      <title>Creación de un <quote>script</quote> para detener
        &matlab;</title>

      <para>Este <quote>script</quote> solucionará
        las dificultades que pueda tener para detener &matlab;
        correctamente.</para>

      <procedure>
	<step>
          <para>Crée un fichero llamado
            <filename>$MATLAB/toolbox/local/finish.m</filename> y
            ponga en él una sola línea con este
	    texto:</para>

	  <programlisting>! $MATLAB/bin/finish.sh</programlisting>

	  <note><para><literal>$MATLAB</literal> debe escribirse
	    tal cual.</para></note>

	  <tip>
            <para>En el mismo directorio encontrará los
              ficheros <filename>finishsav.m</filename> y
              <filename>finishdlg.m</filename>, que le
              permiten guardar su trabajo antes de
              salir de la aplicación.  Si quiere usar alguno de ellos,
              inserte la línea de arriba inmediatamente
              después de
              <literal>save</literal>.</para></tip>
	</step>

	<step>
          <para>Crée un fichero
            <filename>$MATLAB/bin/finish.sh</filename> con el siguiente
            contenido:</para>

	  <programlisting>#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &amp;
exit 0</programlisting>
	</step>

	<step>
	  <para>El fichero tiene que ser ejecutable:</para>

	  <screen>&prompt.root; <userinput>chmod +x $MATLAB/bin/finish.sh</userinput></screen>
	</step>
      </procedure>
    </sect2>

    <sect2 xml:id="matlab-using">
      <title>Uso de &matlab;</title>

      <para>Desde este momento ya puede usted teclear
        <command>matlab</command> y empezar a
        usarlo.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="linuxemu-oracle">
    <info><title>Instalación de &oracle;</title>
      <authorgroup>
	<author><personname><firstname>Marcel</firstname><surname>Moolenaar</surname></personname><contrib>Escrito por </contrib></author>
	<!-- marcel@cup.hp.com -->
      </authorgroup>
    </info>
    

    <indexterm>
      <primary>aplicaciones</primary>
      <secondary><application>Oracle</application></secondary>
    </indexterm>

    <sect2>
      <title>Prefacio</title>
      <para>Este texto describe el proceso de instalación de
        <application>&oracle; 8.0.5</application>
        y <application>&oracle; 8.0.5.1 Enterprise Edition</application>
        para Linux en una
        máquina &os;.</para>
    </sect2>

    <sect2>
      <title>Instalación del entorno Linux</title>

      <para>Debe tener instalados los ports
        <package>emulators/linux_base</package>
        y <package>devel/linux_devtools</package>.
        Si tiene dificultades con estos ports es posible que tenga que
        usar los paquetes o quizás versiones más antiguas
        de dichas aplicaciones que encontrará en la Colección
        de Ports.</para>

      <para>Si quiere usar el agente inteligente también
        tendrá que instalar el paquete Tcl de Red Hat,
        <filename>tcl-8.0.3-20.i386.rpm</filename>.  La orden
        genérica para instalar paquetes con el port oficial
        de <application>RPM</application>
        (<package>archivers/rpm</package>) es:</para>

      <screen>&prompt.root; <userinput>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm paquete</userinput></screen>

      <para>La instalación de dicho <replaceable>paquete</replaceable> no debe generar ningún error.</para>
    </sect2>

    <sect2>
      <title>Creación del entorno &oracle;</title>

      <para>Antes de instalar <application>&oracle;</application>
        tendrá que configurar un entorno apropiado.  Este documento
        solamente explica lo que hay que hacer
        <emphasis>especialmente</emphasis> para utilizar la versión
        de Linux para <application>&oracle;</application> &os;, no
        lo que figura en la guía de instalación de
        <application>&oracle;</application>.</para>

      <sect3 xml:id="linuxemu-kernel-tuning">
        <title>Personalización del kernel</title>
	<indexterm><primary>personalización del kernel</primary></indexterm>

        <para>Tal y como consta en la guía de instalación de
          <application>&oracle;</application>, debe configurar
          la cantidad máxima de memoria compartida.
          No utilice <literal>SHMMAX</literal> en &os;.
          <literal>SHMMAX</literal> se calcula a partir de
          <literal>SHMMAXPGS</literal> y <literal>PGSIZE</literal>,
          así que defina <literal>SHMMAXPGS</literal>.  Todas
          las demás opciones pueden usarse tal y como se describen
          en la guía.  Por ejemplo:</para>

	<programlisting>options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</programlisting>

        <para>Configure estas opciones para que se ajusten al uso que
          pretenda darle a
          <application>&oracle;</application>.</para>

        <para>Asegúrese también de que las siguientes
          opciones están en el fichero de configuración de
          su kernel:</para>

<programlisting>options SYSVSHM #SysV shared memory
options SYSVSEM #SysV semaphores
options SYSVMSG #SysV interprocess communication</programlisting>
      </sect3>

      <sect3 xml:id="linuxemu-oracle-account">

        <title>Cuenta &oracle;</title>

        <para>Crée una cuenta <systemitem class="username">oracle</systemitem> según
          el procedimiento habitual de creación de usuarios.
          La cuenta <systemitem class="username">oracle</systemitem>, empero, tiene algo
          especial puesto que debe teer una shell <emphasis>de</emphasis>
          Linux. Añada
          <literal>/compat/linux/bin/bash</literal> a
          <filename>/etc/shells</filename> y asigne a la
          cuenta <systemitem class="username">oracle</systemitem>
          <filename>/compat/linux/bin/bash</filename> como shell
          por omisión.</para>
      </sect3>

      <sect3 xml:id="linuxemu-environment">
        <title>Entorno</title>

        <para>Además de las variables normales para
          <application>&oracle;</application>,
          como <envar>ORACLE_HOME</envar> y <envar>ORACLE_SID</envar>, debe
          configurar las siguientes variables de entorno:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
          <colspec colwidth="1*"/>
          <colspec colwidth="2*"/>
	    <thead>
	      <row>
		<entry>Variable</entry>

		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><envar>LD_LIBRARY_PATH</envar></entry>

		<entry><literal>$ORACLE_HOME/lib</literal></entry>
	      </row>

	      <row>
		<entry><envar>CLASSPATH</envar></entry>

		<entry><literal>$ORACLE_HOME/jdbc/lib/classes111.zip</literal></entry>
	      </row>

	      <row>
		<entry><envar>PATH</envar></entry>

		<entry><literal>/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</literal></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

        <para>Le aconsejamos configurar todas las variables de entorno
          en <filename>.profile</filename>.  Veamos un ejemplo
	  completo:</para>

<programlisting>ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin
PATH=$PATH:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PATH=$PATH:/usr/local/bin:$ORACLE_HOME/bin
export PATH</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>Instalación de &oracle;</title>

      <para>Debido a una pequeña inconsistencia en el emulador
        Linux tendrá que crear un directorio llamado
        <filename>.oracle</filename>
        en <filename>/var/tmp</filename> antes de iniciar el instalador.
        Haga que sea propiedad del usuario <systemitem class="username">oracle</systemitem>.
        Hecho esto deberí poder instalar
	<application>&oracle;</application>
        sin ningún problema.  Si no es así
        <emphasis>revise su distribución</emphasis>
        <application>&oracle;</application> y su
        configuración.  Una vez finalizada la instalación de
        <application>&oracle;</application> aplique los parches
        que se detallan en las dos siguientes subsecciones.</para>

      <para>Un problema que se da con una cierta frecuencia es que el
        adaptador del protocolo TCP
        no está correctamente instalado.  Como consecuencia no
        puede iniciarse ninguna escucha TCP, a las que también se
	les llama directamente «listeners».  Esto le
	ayudará a resolver el problema.:</para>

      <screen>&prompt.root; <userinput>cd $ORACLE_HOME/network/lib</userinput>
&prompt.root; <userinput>make -f ins_network.mk ntcontab.o</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/lib</userinput>
&prompt.root; <userinput>ar r libnetwork.a ntcontab.o</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/network/lib</userinput>
&prompt.root; <userinput>make -f ins_network.mk install</userinput></screen>

      <para><emphasis>No se olvide de ejecutar <filename>root.sh</filename>
        de nuevo</emphasis>.</para>

    <sect3 xml:id="linuxemu-patch-root">
      <title>Cómo parchear root.sh</title>

        <para>Durante la instalación de
          <application>&oracle;</application> algunas
          acciones que requieren ser ejecutadas como
          <systemitem class="username">root</systemitem> deben almacenarse en un
          <quote>script</quote> de shell llamado
          <filename>root.sh</filename>.  Dicho <quote>script</quote>
          está en el directorio <filename>orainst</filename>.
          Aplique el siguiente parche a <filename>root.sh</filename> para
          que utilice la ruta correcta de <command>chown</command> o
          ejecute el <quote>script</quote> bajo una shell nativa
          de Linux.</para>

	<programlisting>*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</programlisting>

        <para>Si no está instalando
          <application>&oracle;</application> desde un CD puede parchear
          las fuentes de <filename>root.sh</filename>.  Se llama
          <filename>rthd.sh</filename> y está en el directorio
          <filename>orainst</filename> del árbol de fuentes.
          </para>
      </sect3>

      <sect3 xml:id="linuxemu-patch-tcl">
	<title>Cómo parchear genclntsh</title>

        <para>El <quote>script</quote> <command>genclntsh</command> se usa
          para crear una biblioteca de cliente compartida y para
          construir los demos. Al aplicar el siguiente parche
          comentará la definición de <envar>PATH</envar>:</para>

	<programlisting>*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>Ejecución de &oracle;</title>

      <para>Una vez seguidas estas instrucciones podrá ejecutar
        <application>&oracle;</application> como si la hubiera instalado
        en Linux.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="sapr3">
    <info><title>Instalación de &sap.r3;</title>
      <authorgroup>
	<author><personname><firstname>Holger</firstname><surname>Kipp</surname></personname><contrib>Escrito por </contrib></author>
      </authorgroup>
      
      <authorgroup>
	<author><personname><firstname>Valentino</firstname><surname>Vaschetto</surname></personname><contrib>Versión original convertida a SGML por </contrib></author>
      </authorgroup>
    </info>

    

    <indexterm>
      <primary>aplicaciones</primary>
      <secondary><application>SAP R/3</application></secondary>
    </indexterm>

    <para>Las instalaciones de sistemas <application>&sap;</application>
      en &os; no reciben soporte técnico de &sap;.
      &sap; solamente lo ofrece si se usan plataformas
      certificadas.</para>

    <sect2 xml:id="preface">
      <title>Introducción</title>

      <para>Este texto expone una forma de instalar
        un <application>&sap.r3; System</application> con
        una <application>&oracle; Database</application>
        para Linux en una máquina &os;, incluyendo la
        instalación de &os; y <application>&oracle;</application>.
        Se muestran dos configuraciones diferentes:</para>

      <itemizedlist>
	<listitem>
	  <para><application>&sap.r3; 4.6B (IDES)</application> con
	  <application>&oracle; 8.0.5</application> en FreeBSD 4.3-STABLE</para>
	</listitem>

	<listitem>
	  <para><application>&sap.r3; 4.6C</application> con
	  <application>&oracle; 8.1.7</application> en FreeBSD 4.5-STABLE</para>
	</listitem>
      </itemizedlist>

      <para>Aunque este documento trate de describir todos
        los pasos importantes con detalle no ha sido escrito como
        sustituto de las guías de instalación de
        <application>&oracle;</application> y
        <application>&sap.r3;</application>.</para>

      <para>Por favor, consulte la documentación de
        <application>&sap.r3;</application>
        que se incluye en la edición para Linux de
        <application>&sap;</application>
        y las preguntas específicas sobre
        <application>&oracle;</application>,
        así como los recursos que estén a su disposición
        sobre  <application>&oracle;</application>
        y <application>&sap; OSS</application>.</para>
    </sect2>

    <sect2 xml:id="software">
      <title>Software</title>

      <para>Durante la instalación de <application>&sap;</application>
        se han utilizado los siguientes CD-ROM:</para>

      <sect3 xml:id="software-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="3">
	  <thead>
	    <row>
	      <entry>Nombre</entry> <entry>Número</entry> <entry>Descripción</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry>KERNEL</entry> <entry>51009113</entry> <entry>SAP Kernel Oracle /
		Installation / AIX, Linux, Solaris</entry>
	    </row>

	    <row>
	      <entry>RDBMS</entry> <entry>51007558</entry> <entry>Oracle / RDBMS 8.0.5.X /
		Linux</entry>
	    </row>

	    <row>
	      <entry>EXPORT1</entry> <entry>51010208</entry> <entry>IDES / DB-Export /
		Disco 1 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT2</entry> <entry>51010209</entry> <entry>IDES / DB-Export /
		Disco 2 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT3</entry> <entry>51010210</entry> <entry>IDES / DB-Export /
		Disco 3 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT4</entry> <entry>51010211</entry> <entry>IDES / DB-Export /
		Disco 4 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT5</entry> <entry>51010212</entry> <entry>IDES / DB-Export /
		Disco 5 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT6</entry> <entry>51010213</entry> <entry>IDES / DB-Export /
		Disco 6 de 6</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>También  utilizamos el CD de <application>&oracle; 8
        Server</application> (versión pre-producción
        8.0.5 para Linux, versión de kernel 2.0.33), que
        no es realmente necesario y FreeBSD 4.3-STABLE (a unos cuantos
        días de la liberación de 4.3-RELEASE).</para>

      </sect3>
      <sect3 xml:id="software-46c">
	<title>&sap.r3; 4.6C SR2, &oracle; 8.1.7</title>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="3">
	    <thead>
	      <row>
		<entry>Nombre</entry> <entry>Número</entry> <entry>Descripción</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>KERNEL</entry> <entry>51014004</entry> <entry>SAP Kernel Oracle /
		  SAP Kernel Version 4.6D / DEC, Linux</entry>
	      </row>

	      <row>
		<entry>RDBMS</entry> <entry>51012930</entry> <entry>Oracle 8.1.7/ RDBMS /
		  Linux</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 1 de 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 2 de 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 3 de 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 4 de 4</entry>
	      </row>

	      <row>
		<entry>LANG1</entry> <entry>51013954</entry> <entry>Release 4.6C SR2 /
		  Language / DE, EN, FR / Disco 1 de 3</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

        <para>Según los idiomas que quiera usar es posible que
          necesite otros CD de idiomas.  Sólo hemos utilizado DE y
          EN, así que nos bastó con el primer CD.
          Para su información, los números de los cuatro CD
          EXPORT son idénticos.  Los tres CD de idiomas también
          tienen el mismo número, aunque esto es distinto en los CD de
          la versión 4.6B IDES.  Al escribir este texto
          (20.03.2002) ejecutamos la instalación en FreeBSD
          4.5-STABLE (20.03.2002).</para>
      </sect3>
    </sect2>

    <sect2 xml:id="sap-notes">
      <title>Notas &sap;</title>

      <para>Las siguientes notas han resultado ser muy útiles
       durante la instalación, así que le recomendamos
       encarecidamente que las lea antes de instalar
        <application>&sap.r3;</application>:</para>

      <sect3 xml:id="sap-notes-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Número</entry>
		<entry>Título</entry>
	      </row>
	    </thead>
	    <tbody>


	      <row>
		<entry>0171356</entry> <entry>SAP Software on Linux: Essential
		  Comments</entry>
	      </row>

	      <row>
		<entry>0201147</entry> <entry>INST: 4.6C R/3 Inst. on UNIX -
		  Oracle</entry>
	      </row>

	      <row>
		<entry>0373203</entry> <entry>Update / Migration Oracle 8.0.5 --&gt;
		  8.0.6/8.1.6 LINUX</entry>
	      </row>

	      <row>
		<entry>0072984</entry> <entry>Release of Digital UNIX 4.0B for
		  Oracle</entry>
	      </row>

	      <row>
		<entry>0130581</entry> <entry>R3SETUP step DIPGNTAB terminates</entry>
	      </row>

	      <row>
		<entry>0144978</entry> <entry>Your system has not been installed
		  correctly</entry>
	      </row>

	      <row>
		<entry>0162266</entry> <entry>Questions and tips for R3SETUP on Windows
		  NT / W2K</entry>
	      </row>

	    </tbody>
	  </tgroup>
	</informaltable>
      </sect3>

      <sect3 xml:id="sap-notes-46c">
	<title>&sap.r3; 4.6C, &oracle; 8.1.7</title>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Número</entry>
		<entry>Título</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>0015023</entry> <entry>Initializing table TCPDB (RSXP0004)
		  (EBCDIC)</entry>
	      </row>

	      <row>
		<entry>0045619</entry> <entry>R/3 with several languages or
		  typefaces</entry>
	      </row>

	      <row>
		<entry>0171356</entry> <entry>SAP Software on Linux: Essential
		  Comments</entry>
	      </row>

	      <row>
		<entry>0195603</entry> <entry>RedHat 6.1 Enterprise version:
		  Known problems</entry>
	      </row>

	      <row>
		<entry>0212876</entry> <entry>The new archiving tool SAPCAR</entry>
	      </row>

	      <row>
		<entry>0300900</entry> <entry>Linux: Released DELL Hardware</entry>
	      </row>

	      <row>
		<entry>0377187</entry> <entry>RedHat 6.2: important remarks</entry>
	      </row>

	      <row>
		<entry>0387074</entry> <entry>INST: R/3 4.6C SR2 Installation on
		  UNIX</entry>
	      </row>

	      <row>
		<entry>0387077</entry> <entry>INST: R/3 4.6C SR2 Inst. on UNIX -
		  Oracle</entry>
	      </row>

	      <row>
		<entry>0387078</entry> <entry>SAP Software on UNIX: OS Dependencies
		  4.6C SR2</entry>
	      </row>


	    </tbody>
	  </tgroup>
	</informaltable>
      </sect3>
    </sect2>

    <sect2 xml:id="hardware-requirements">
      <title>Requisitos de hardware</title>

      <para>El siguiente equipo es suficiente para la instalación
        de un <application>sistema &sap.r3;</application>.  Si pretende
        darle uso productivo necesitará hacer un estudio
        detallado de sus necesidades:</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="3">
	  <thead>
	    <row>
	      <entry>Componente</entry>
	      <entry>4.6B</entry>
	      <entry>4.6C</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry>Procesador</entry>
	      <entry>&pentium; III 800MHz x 2</entry>
	      <entry>&pentium; III 800MHz x 2</entry>
	    </row>

	    <row>
	      <entry>Memoria</entry>
	      <entry>1GB ECC</entry>
	      <entry>2GB ECC</entry>
	    </row>

	    <row>
	      <entry>Espacio en disco</entry>
	      <entry>50-60GB (IDES)</entry>
	      <entry>50-60GB (IDES)</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Para su uso en producción le recomendamos procesadores
        &xeon; con una caché grande, discos de alta
        velocidad (SCSI, controlador de RAID por hardware), USV y
        ECC-RAM.  Un espacio en disco tan grande se debe al sistema
        IDES preconfigurado, que crea ficheros de bases de datos de
        27&nbsp;GB durante la instalación.  Este espacio
        también es suficiente para sistemas de producción
        iniciales y datos de aplicación.</para>

      <sect3 xml:id="hardware-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

      <para>Este es el hardware que utilizamos al escribir este texto:
        placa base dual
        con 2 procesadores &pentium;&nbsp;III a 800&nbsp;MHz, adaptador
        SCSI &adaptec; 29160 Ultra160 (para acceder a una unidad de cinta
        40/80&nbsp;GB DLT y CDROM), &mylex; &acceleraid; (2 canales,
        firmware 6.00-1-00 con 32&nbsp;MB RAM). La controladora &mylex; RAID
        tiene conectados dos discos duros de 17&nbsp;GB
        (replicados) y cuatro discos duros de 36&nbsp;GB (RAID nivel 5).</para>
      </sect3>

      <sect3 xml:id="hardware-46c">
	<title>&sap.r3; 4.6C, &oracle; 8.1.7</title>

      <para>Para esta instalación se usó un &dell; &poweredge;
        2500: placa base dual con 2 procesadores &pentium;&nbsp;III
        a 1000&nbsp;MHz (256&nbsp;kB de Caché), 2&nbsp;GB PC133 ECC
        SDRAM, controladora RAID PERC/3 DC PCI con 128&nbsp;MB y una unidad
        EIDE DVD-ROM.  La controladora RAID tiene conectados dos discos
        duros 18&nbsp;GB (replicados) y cuatro discos duros de
        36&nbsp;GB (RAID nivel 5).</para>

      </sect3>
    </sect2>

    <sect2 xml:id="installation">
      <title>Instalación de &os;</title>

      <para>Lo primero que tiene que hacer es instalar &os;.  Hay muchas
       formas de hacerlo.  Nosotros instalamos &os; 4.3 desde un FTP y
        FreeBSD&nbsp;4.5 desde el CD de la distribución.  Si necesita
        más información sobre los medios de instalación
        de &os; consulte la
        <xref linkend="install-diff-media"/>.</para>

      <sect3 xml:id="disk-layout">
	<title>Esquema de disco</title>

        <para>Quisimos hacer el proceso lo más simple posible,
          así que usamos el esquema de disco de
          <application>&sap.r3; 46B</application> y <application>&sap.r3; 46C
          SR2</application>.  Solo cambiamos los nombres
          de dispositivo debido a que las instalaciones tuvieron lugar en
          hardware diferente (<filename>/dev/da</filename> y
          <filename>/dev/amr</filename> respectivamente.  Si
          utiliza una AMI &megaraid; verá en pantalla
          <filename>/dev/amr0s1a</filename> en lugar de
          <filename>/dev/da0s1a</filename>):</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="4">
	    <thead>
	      <row>
		<entry>Sistema de ficheros</entry>
		<entry>Tamaño (bloques de 1k)</entry>
		<entry>Tamaño (GB)</entry>
		<entry>Montado en</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><filename>/dev/da0s1a</filename></entry>
		<entry>1.016.303</entry>
		<entry>1</entry>
		<entry><filename>/</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da0s1b</filename></entry>
		<entry> </entry>
		<entry>6</entry>
		<entry>swap</entry>
	      </row>

	      <row>
		<entry><filename>/dev/da0s1e</filename></entry>
		<entry>2.032.623</entry>
		<entry>2</entry>
		<entry><filename>/var</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da0s1f</filename></entry>
		<entry>8.205.339</entry>
		<entry>8</entry>
		<entry><filename>/usr</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da1s1e</filename></entry>
		<entry>45.734.361</entry>
		<entry>45</entry>
		<entry><filename>/compat/linux/oracle</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da1s1f</filename></entry>
		<entry>2.032.623</entry>
		<entry>2</entry>
		<entry><filename>/compat/linux/sapmnt</filename></entry>
	      </row>

	      <row>
		<entry><filename>/dev/da1s1g</filename></entry>
		<entry>2.032.623</entry>
		<entry>2</entry>
		<entry><filename>/compat/linux/usr/sap</filename></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

        <para>Configure e inicialice antes que nada las dos unidades
          lógicas con el software &mylex; o PERC/3 RAID.
          El software puede iniciarse durante la fase
          de arranque de <acronym>BIOS</acronym>.</para>

        <para>Por favor, tenga en cuenta que el esquema de disco que
          utilizamos difiere ligeramente de las recomendaciones de
          &sap;, ya que &sap; sugiere montar los subdirectorios
          <application>&oracle;</application>
          (y algunos otros) por separado.  Decidimos
          crearlos como subdirectorios reales para simplificar.
          </para>
      </sect3>

      <sect3 xml:id="makeworldandnewkernel">
	<title><command>make world</command> y un nuevo kernel</title>

        <para>Descargue las fuentes -STABLE más recientes.
          Ejecute <command>make world</command> y compile su kernel
          personalizado.  Recuerde incluir en él tanto los
          <link linkend="kerneltuning">parámetros del kernel</link>
          requeridos por <application>&sap.r3;</application>
          como los que necesita
	  <application>&oracle;</application>.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="installingthelinuxenviornment">
      <title>Instalación del entorno Linux</title>

      <sect3 xml:id="installinglinuxbase-system">
	<title>Instalación del sistema base Linux</title>

        <para>Primero instale el port
          <link linkend="linuxemu-libs-port">linux_base</link>
          (como <systemitem class="username">root</systemitem>):</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/emulators/linux_base</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

      </sect3>


      <sect3 xml:id="installinglinuxdevelopment">
	<title>Instalación del entorno de desarrollo Linux</title>

        <para>El entorno de desarrollo Linux es imprescindible si quiere
          instalar
          <application>&oracle;</application> en &os; según se
          explica en la <xref linkend="linuxemu-oracle"/>:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/devel/linux_devtools</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

        <para>El entorno de desarrollo Linux solo ha de
          instalarse si sigue el proceso para instalar
          <application>&sap.r3; 46B IDES</application>.
          No es necesario si <application>&oracle; DB</application>
          no está reenlazado («relinked») con el sistema
          &os;.  Este sería su caso si está usa el fichero
          comprimido tar de <application>&oracle;</application> de un
	  sistema Linux.</para>

      </sect3>


      <sect3 xml:id="installingnecessaryrpms">
	<title>Instalación de los RPM necesarios</title>
	<indexterm><primary>RPM</primary></indexterm>

        <para>Necesitará soporte PAM para iniciar el programa
          <command>R3SETUP</command>.
          Durante la primera instalación de
          <application>&sap;</application>
          en FreeBSD 4.3-STABLE intentamos instalar PAM con todas
          las dependencias y finalmente forzamos la
          instalación del paquete PAM, y  funcionó.
          En <application>&sap.r3; 4.6C SR2</application> forzamos
          la instalación del RPM PAM, que también
          funcionó, así que parece que las dependencias
          no lo son tanto:</para>


<screen>&prompt.root; <userinput>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm \
pam-0.68-7.i386.rpm</userinput></screen>

        <para>Para que <application>&oracle; 8.0.5</application> pueda
          lanzar el agente inteligente también tendremos que
          instalar el paquete Tcl de RedHat
          <filename>tcl-8.0.5-30.i386.rpm</filename> (si no,
          cuando lo reenlace durante la instalación de
          <application>&oracle;</application> no funcionará).
          Existen otros aspectos relacionados con el
          reenlazado de <application>&oracle;</application> a tener en
          cuenta durante la instalación, pero
          atañen a la versión para Linux de
          <application>&oracle;</application> y no son específicos
          de &os;.</para>

      </sect3>

      <sect3 xml:id="linuxprocandfallbackelfbrand">
	<title>Sugerencias</title>

        <para>Le recomendamos añadir
          <literal>linprocfs</literal> a <filename>/etc/fstab</filename>.
          Consulte &man.linprocfs.5; para más información.
          Otro parámetro que debería configurar es
          <literal>kern.fallback_elf_brand=3</literal> en
          <filename>/etc/sysctl.conf</filename>.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="creatingsapr3env">
      <title>Creación del entorno &sap.r3;</title>

      <sect3 xml:id="filesystemsandmountpoints">
        <title>Creación de los sistemas de ficheros y
	  puntos de montaje necesarios</title>

        <para>Para una instalación sencilla es suficiente con
          crear los siguientes sistemas de ficheros:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>punto de montaje</entry>
		<entry>tamaño en GB</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><filename>/compat/linux/oracle</filename></entry>
		<entry>45 GB</entry>
	      </row>

	      <row>
		<entry><filename>/compat/linux/sapmnt</filename></entry>
		<entry>2 GB</entry>
	      </row>

	      <row>
		<entry><filename>/compat/linux/usr/sap</filename></entry>
		<entry>2 GB</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

        <para>También es necesario crear algunos enlaces.  Si no,
          el instalador <application>&sap;</application>
          tendrá problemas ya que buscará los siguientes
          enlaces:</para>

	<screen>&prompt.root; <userinput>ln -s /compat/linux/oracle /oracle</userinput>
&prompt.root; <userinput>ln -s /compat/linux/sapmnt /sapmnt</userinput>
&prompt.root; <userinput>ln -s /compat/linux/usr/sap /usr/sap</userinput></screen>

        <para>Veamos unos cuantos errores que se le pueden presentar
          durante la instalación (en este caso
          con el sistema <emphasis>PRD</emphasis> y la instalación
          de <application>&sap.r3; 4.6C SR2</application>):</para>

	<screen>INFO 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:200
    Checking existence of symbolic link /usr/sap/PRD/SYS/exe/dbg to
    /sapmnt/PRD/exe. Creating if it does not exist...

WARNING 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:400
    Link /usr/sap/PRD/SYS/exe/dbg exists but it points to file
    /compat/linux/sapmnt/PRD/exe instead of /sapmnt/PRD/exe. The
    program cannot go on as long as this link exists at this
    location. Move the link to another location.

ERROR 2002-03-19 16:45:36 R3LINKS_IND_IND Ins_SetupLinks:0
    can not setup link '/usr/sap/PRD/SYS/exe/dbg' with content
    '/sapmnt/PRD/exe'</screen>
      </sect3>

      <sect3 xml:id="creatingusersanddirectories">
	<title>Creación de usuarios y directorios</title>

        <para><application>&sap.r3;</application> necesita dos usuarios
          y tres grupos.  Los nombres de usuario dependen del
          <quote><application>&sap;</application> system ID</quote>
          (SID), y consisten en tres letras.
          Algunos de estos SID
          están reservados por <application>&sap;</application>
          (por ejemplo <literal>SAP</literal> y <literal>NIX</literal>.
          Tiene una lista completa de ellos en la documentación
          de <application>&sap;</application>).
          Para la instalación de IDES usamos <literal>IDS</literal>
          y para la instalación de 4.6C SR2 <literal>PRD</literal>,
          dado que ese sistema está pensado para un uso de
          producción.  Tenemos por lo tanto los siguientes
          grupos (Los ID de grupo pueden ser diferentes, estos son
          solamente los valores que utilizamos en nuestra
          instalación):</para>

        <informaltable frame="none" pgwide="1">
          <tgroup cols="3">
          <thead>
          <row>
            <entry>ID de grupo</entry>
            <entry>nombre de grupo</entry>
            <entry>descripción</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>100</entry>
            <entry>dba</entry>
            <entry>Administrador de base de datos</entry>
          </row>
          <row>
            <entry>101</entry>
            <entry>sapsys</entry>
            <entry>Sistema &sap;</entry>
          </row>
          <row>
            <entry>102</entry>
            <entry>oper</entry>
            <entry>Operador de base de datos</entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>En una instalación por omisión de
          <application>&oracle;</application> solo se usa el
          grupo <systemitem class="groupname">dba</systemitem>.
          Puede usar el grupo
          <systemitem class="groupname">oper</systemitem> como grupo
          <systemitem class="groupname">dba</systemitem> (consulte la
          documentación de
          <application>&oracle;</application> y
          <application>&sap;</application>
          para más información).</para>

        <para>También necesitaremos los siguientes usuarios:</para>

        <informaltable frame="none" pgwide="1">
          <tgroup cols="6">
          <thead>
          <row>
            <entry>ID de usuario</entry>
            <entry>nombre de usuario</entry>
            <entry>nombre genérico</entry>
            <entry>grupo</entry>
            <entry>grupos adicionales</entry>
            <entry>descripción</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>1000</entry>
            <entry>idsadm/prdadm</entry>
            <entry><replaceable>sid</replaceable>adm</entry>
            <entry>sapsys</entry>
            <entry>oper</entry>
            <entry>Administrador &sap;</entry>
          </row>
          <row>
            <entry>1002</entry>
            <entry>oraids/oraprd</entry>
            <entry>ora<replaceable>sid</replaceable></entry>
            <entry>dba</entry>
            <entry>oper</entry>
            <entry>Administrador &oracle;</entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Al añadir dichos usuarios mediante
          &man.adduser.8; tenga en cuenta que debe incluir
          las siguientes entradas (observe la shell y el
          directorio home) al crear el
          <quote>administrador &sap;</quote>:</para>

        <programlisting>Name: <replaceable>sid</replaceable>adm
Password: ******
Fullname: SAP Administrator <replaceable>SID</replaceable>
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/<replaceable>sid</replaceable>adm
Shell: bash  (/compat/linux/bin/bash)</programlisting>

        <para>y para el <quote>Administrador &oracle;</quote>:</para>

        <programlisting>Name: ora<replaceable>sid</replaceable>
Password: ******
Fullname: Oracle Administrator <replaceable>SID</replaceable>
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/<replaceable>sid</replaceable>
Shell: bash  (/compat/linux/bin/bash)</programlisting>

        <para>Esto también incluye al grupo
          <systemitem class="groupname">oper</systemitem> en caso de que esté
          usando el grupo <systemitem class="groupname">dba</systemitem> y
          el grupo <systemitem class="groupname">oper</systemitem>.</para>

      </sect3>

      <sect3 xml:id="creatingdirectories">
        <title>Creación de directorios</title>

        <para>Estos directorios se crean como sistemas de ficheros
          independientes.  Esto depende totalmente de sus necesidades.
          Nosotros decidimos crearlos como directorios ya que todos
          están en el mismo RAID 5:</para>

        <para>Primero vamos a configurar los propietarios y los
          derechos de algunos directorios (como
          <systemitem class="username">root</systemitem>):</para>

        <screen>&prompt.root; <userinput>chmod 775 /oracle</userinput>
&prompt.root; <userinput>chmod 777 /sapmnt</userinput>
&prompt.root; <userinput>chown root:dba /oracle</userinput>
&prompt.root; <userinput>chown sidadm:sapsys /compat/linux/usr/sap</userinput>
&prompt.root; <userinput>chmod 775 /compat/linux/usr/sap</userinput></screen>

        <para>Luego vamos a crear directorios como el
          usuario <systemitem class="username">ora<replaceable>sid</replaceable></systemitem>.
          Estos serán todos subdirectorios de
	  <filename>/oracle/SID</filename>:</para>

        <screen>&prompt.root; <userinput>su - orasid</userinput>
&prompt.root; <userinput>cd /oracle/SID</userinput>
&prompt.root; <userinput>mkdir mirrlogA mirrlogB origlogA origlogB</userinput>
&prompt.root; <userinput>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</userinput>
&prompt.root; <userinput>mkdir saparch sapreorg</userinput>
&prompt.root; <userinput>exit</userinput></screen>

        <para>Para la instalación de
          <application>&oracle; 8.1.7</application>
          tendrá que crear unos cuantos directorios
	  más:</para>

	<screen>&prompt.root; <userinput>su - orasid</userinput>
&prompt.root; <userinput>cd /oracle</userinput>
&prompt.root; <userinput>mkdir 805_32</userinput>
&prompt.root; <userinput>mkdir client stage</userinput>
&prompt.root; <userinput>mkdir client/80x_32</userinput>
&prompt.root; <userinput>mkdir stage/817_32</userinput>
&prompt.root; <userinput>cd /oracle/SID</userinput>
&prompt.root; <userinput>mkdir 817_32</userinput></screen>

        <note><para>El directorio <filename>client/80x_32</filename> tiene
          que tener exactamente este nombre.  No sustituya la
          <emphasis>x</emphasis>
          por un número ni por ninguna otra
          cosa.</para></note>

        <para>En el tercer paso creamos directorios como usuario
	  <systemitem class="username"><replaceable>sid</replaceable>adm</systemitem>:</para>

        <screen>&prompt.root; <userinput>su - sidadm</userinput>
&prompt.root; <userinput>cd /usr/sap</userinput>
&prompt.root; <userinput>mkdir SID</userinput>
&prompt.root; <userinput>mkdir trans</userinput>
&prompt.root; <userinput>exit</userinput></screen>
      </sect3>

      <sect3 xml:id="entriesinslashetcslashservices">
        <title>Entradas en <filename>/etc/services</filename></title>

        <para><application>&sap.r3;</application> requiere algunas entradas
          en <filename>/etc/services</filename> que es posible que
          no estén correctamente activadas durante
          la instalalación.  Añada
          las siguientes entradas (necesita al menos las entradas
          correspondientes al número de instancia, en
          este caso, <literal>00</literal>.  No hará ningún
          daño añadir todas las entradas de
          <literal>00</literal> hasta <literal>99</literal> para
          <literal>dp</literal>, <literal>gw</literal>, <literal>sp</literal>
          y <literal>ms</literal>).  Si va a utilizar un
          <application>SAProuter</application>
          o necesita acceder a
          <application>&sap;</application> OSS, también
          necesitará <literal>99</literal>, ya que el puerto 3299
          se usa generalmente para el proceso
          <application>SAProuter</application>
          en el sistema destino:</para>

        <programlisting>
sapdp00    3200/tcp # SAP Dispatcher.      3200 + Instance-Number
sapgw00  3300/tcp # SAP Gateway.         3300 + Instance-Number
sapsp00  3400/tcp #                      3400 + Instance-Number
sapms00  3500/tcp #                      3500 + Instance-Number
sapms<replaceable>SID</replaceable> 3600/tcp # SAP Message Server.  3600 + Instance-Number
sapgw00s   4800/tcp # SAP Secure Gateway   4800 + Instance-Number</programlisting>
      </sect3>

      <sect3 xml:id="necessarylocales">
        <title>Locales necesarios</title>
	<indexterm><primary>locales</primary></indexterm>

        <para><application>&sap;</application> requiere al menos dos locales
          que no forman parte de la instalación por defecto de
          RedHat.  &sap; dispone de los paquetes RPMs que pueda necesitar;
          puede descargalos desde su FTP, aunque tenga en cuenta que
	  solo pueden acceder al mismo los clientes con acceso OSS).
          Consulte la nota
          0171356, que contiene una lista de los RPM que necesitará.
          </para>

        <para>También puede crear enlaces
          (por ejemplo desde <emphasis>de_DE</emphasis> y
          <emphasis>en_US</emphasis> ), pero no se lo recomendamos si
          pretende configurar un sistema de producción (no obstante,
          hemos de reconocer que a nosotros nos ha funcionado con
          el sistema IDES sin ningún problema).  Necesitará
          al menos los siguientes locales:</para>

        <programlisting>de_DE.ISO-8859-1
en_US.ISO-8859-1</programlisting>

	<para>Haga los enlaces de esta manera:</para>

	<screen>&prompt.root; <userinput>cd /compat/linux/usr/share/locale</userinput>
&prompt.root; <userinput>ln -s de_DE de_DE.ISO-8859-1</userinput>
&prompt.root; <userinput>ln -s en_US en_US.ISO-8859-1</userinput></screen>

        <para>Si no están habrá algunos
          problemas durante la instalación.  Si se ignoran
          (es decir, si configura el <literal>STATUS</literal>
          de los pasos relacionados con esos locales a
          <literal>OK</literal> en el fichero
          <filename>CENTRDB.R3S</filename>) será imposible
          entrar al sistema <application>&sap;</application> sin
          tener que recurrir a ciertas triquiñuelas.</para>
      </sect3>

      <sect3 xml:id="kerneltuning">
        <title>Personalización del kernel</title>
	<indexterm><primary>Personalización del kernel</primary></indexterm>

        <para>Los sistemas <application>&sap.r3;</application> necesitan muchos
          recursos, por eso hemos añadido los siguientes
          parámetros al fichero de configuración de su
          kernel:</para>

        <programlisting># Set these for memory pigs (SAP and Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)"
# System V options needed.
options SYSVSHM #SYSV-style shared memory
options SHMMAXPGS=262144 #max amount of shared mem. pages
#options SHMMAXPGS=393216 #use this for the 46C inst.parameters
options SHMMNI=256 #max number of shared memory ident if.
options SHMSEG=100 #max shared mem.segs per process
options SYSVMSG #SYSV-style message queues
options MSGSEG=32767 #max num. of mes.segments in system
options MSGSSZ=32 #size of msg-seg. MUST be power of 2
options MSGMNB=65535 #max char. per message queue
options MSGTQL=2046 #max amount of msgs in system
options SYSVSEM #SYSV-style semaphores
options SEMMNU=256 #number of semaphore UNDO structures
options SEMMNS=1024 #number of semaphores in system
options SEMMNI=520 #number of semaphore identifiers
options SEMUME=100       #number of UNDO keys</programlisting>

        <para>Puede consultar los valores mínimos en la
          documentación de &sap;.  Como no hay detalles
          sobre Linux, consulte para mayor información
          la sección de HP-UX (32-bit).
          El sistema de instalación 4.6C SR2 tiene más
          memoria principal, asín que los segmentos compartidos
          pueden ser más extensos tanto para
          <application>&sap;</application> como para
          <application>&oracle;</application>; elija, por tanto,
          un número mayor de páginas
          de memoria compartida.</para>

        <note><para>En la instalación por omisión de
          FreeBSD&nbsp;4.5 en &i386;, configure <literal>MAXDSIZ</literal>
          y <literal>DFLDSIZ</literal> como máximo a 1&nbsp;GB.
          Si no lo hace podrían aparecer errores extraños
          como <errorname>ORA-27102: out of memory</errorname>
          y <errorname>Linux Error: 12: Cannot allocate memory</errorname>.</para></note>
      </sect3>
    </sect2>

    <sect2 xml:id="installingsapr3">
      <title>Instalación de &sap.r3;</title>

      <sect3 xml:id="preparingsapcdroms">
        <title>Preparación de los CDROM</title>

        <para>Hay que montar y desmontar muchos CD-ROM durante la
          instalación.  Si tiene suficientes unidades
          de CDROM, podría montarlos todos.  Nosotros decidimos
          copiar el contenido de los CD-ROM a los directorios
          correspondientes:</para>

	<programlisting>/oracle/<replaceable>SID</replaceable>/sapreorg/<replaceable>nombre-cd</replaceable></programlisting>

        <para>Donde <replaceable>nombre-cd</replaceable> era <filename>KERNEL</filename>,
	  <filename>RDBMS</filename>, <filename>EXPORT1</filename>,
	  <filename>EXPORT2</filename>, <filename>EXPORT3</filename>,
	  <filename>EXPORT4</filename>, <filename>EXPORT5</filename> y
	  <filename>EXPORT6</filename> para la instalación 4.6B/IDES, y
	  <filename>KERNEL</filename>, <filename>RDBMS</filename>,
	  <filename>DISK1</filename>, <filename>DISK2</filename>,
	  <filename>DISK3</filename>, <filename>DISK4</filename> y
	  <filename>LANG</filename> para la instalación 4.6C SR2.
          Todos los nombres de fichero en los CDs montados deben estar
          en mayúsculas; si no es así use la opción
          <option>-g</option> al montar.  Utilice lo siguiente:
          </para>

        <screen>&prompt.root; <userinput>mount_cd9660 -g /dev/cd0a /mnt</userinput>
&prompt.root; <userinput>cp -R /mnt/* /oracle/SID/sapreorg/nombre-cd</userinput>
&prompt.root; <userinput>umount /mnt</userinput></screen>
      </sect3>

      <sect3 xml:id="runningtheinstall-script">
        <title>Ejecución del <quote>script</quote> de
          instalación</title>

        <para>Primero tendrá que preparar un directorio
          <filename>install</filename>:</para>

	<screen>&prompt.root; <userinput>cd /oracle/SID/sapreorg</userinput>
&prompt.root; <userinput>mkdir install</userinput>
&prompt.root; <userinput>cd install</userinput></screen>

        <para>Una vez arrancado el <quote>script</quote> de instalación
          copiará casi todos los ficheros relevantes en el directorio
          <filename>install</filename>:</para>

	<screen>&prompt.root; <userinput>/oracle/SID/sapreorg/KERNEL/UNIX/INSTTOOL.SH</userinput></screen>

        <para>La instalación IDES (4.6B) incluye un sistema de
          demostración &sap.r3; totalmente personalizado, así
          que hay seis CD EXPORT en lugar de solo tres.
          La plantilla de instalación
          <filename>CENTRDB.R3S</filename> está pensada para
          una instancia central estándar
          (<application>&r3;</application> y
          base de datos), no la instancia central IDES, así que
          hay que copiar el <filename>CENTRDB.R3S</filename>
          correspondiente del directorio
          <filename>EXPORT1</filename>.
          Si no lo hace <command>R3SETUP</command> solo pedirá
          tres CD EXPORT.</para>

        <para>La nueva versión de
          <application>&sap; 4.6C SR2</application>
          incluye cuatro CDs EXPORT.  El fichero de parámetros
          que controla los pasos de la instalación es
          <filename>CENTRAL.R3S</filename>.  A diferencia de versiones
          versiones anteriores, no existen patrones de instalación
          por separado para una instancia central con o sin base de datos.
          <application>&sap;</application> utiliza un patrón separado
          para la instalación de la base
          de datos.  Para reiniciar la instalación después es
          suficiente reiniciarla con el fichero original.</para>

        <para>Durante y después de la instalación,
          <application>&sap;</application>
          necesita que <command>hostname</command> devuelva
          <emphasis>sólamente</emphasis> el nombre del sistema,
          no el nombre cualificado de dominio.  Configure el nombre
          del equipo de ese modo, o active un alias mediante
          <command>alias hostname='hostname -s'</command> para
          <systemitem class="username">ora<replaceable>sid</replaceable></systemitem>
          y para <systemitem class="username"><replaceable>sid</replaceable>adm</systemitem>
          (y para <systemitem class="username">root</systemitem> al menos durante los
          pasos de la instalación realizados como
          <systemitem class="username">root</systemitem>).  También puede configurar
          los ficheros <filename>.profile</filename> y
          <filename>.login</filename> de los usuarios que se crean durante
          la instalación <application>&sap;</application>.</para>
      </sect3>

      <sect3 xml:id="startr3setup-46B">
        <title>Inicio de <command>R3SETUP</command> 4.6B</title>

        <para>Asegúrese de que <envar>LD_LIBRARY_PATH</envar>
          esté configurada correctamente:</para>

        <screen>&prompt.root; <userinput>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</userinput></screen>

        <para>Inicie <command>R3SETUP</command> como <systemitem class="username">root</systemitem>
          desde el directorio de instalación:</para>

        <screen>&prompt.root; <userinput>cd /oracle/IDS/sapreorg/install</userinput>
&prompt.root; <userinput>./R3SETUP -f CENTRDB.R3S</userinput></screen>

        <para>El <quote>script</quote> le preguntará algunas cosas;
          le mostramos aquí entre corchetes la respuesta por
          defecto, y después la respuesta que nosotros
          introdujimos:</para>

        <informaltable frame="none" pgwide="1">
          <tgroup cols="3">
          <thead>
          <row>
            <entry>Pregunta</entry>
            <entry>Por omisión</entry>
            <entry>Entrada</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>Enter SAP System ID</entry>
            <entry>[C11]</entry>
            <entry>IDS<keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter SAP Instance Number</entry>
            <entry>[00]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter SAPMOUNT Directory</entry>
            <entry>[/sapmnt]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter name of SAP central host</entry>
            <entry>[troubadix.domain.de]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter name of SAP db host</entry>
            <entry>[troubadix]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Select character set</entry>
            <entry>[1] (WE8DEC)</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter Oracle server version (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</entry>
            <entry> </entry>
            <entry>1<keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Extract Oracle Client archive</entry>
            <entry>[1] (Yes, extract)</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter path to KERNEL CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/KERNEL</entry>
          </row>
          <row>
            <entry>Enter path to RDBMS CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/RDBMS</entry>
          </row>
          <row>
            <entry>Enter path to EXPORT1 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT1</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT1 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD4_DIR]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT2 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT2</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT2 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD5_DIR]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT3 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT3</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT3 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD6_DIR]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT4 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT4</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT4 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD7_DIR]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT5 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT5</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT5 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD8_DIR]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT6 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT6</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT6 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD9_DIR]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter amount of RAM for SAP + DB</entry>
            <entry> </entry>
            <entry>850<keycap>Intro</keycap> (en Megabytes)</entry>
          </row>
          <row>
            <entry>Service Entry Message Server</entry>
            <entry>[3600]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of sapsys</entry>
            <entry>[101]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of oper</entry>
            <entry>[102]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of dba</entry>
            <entry>[100]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of <replaceable>sid</replaceable>adm</entry>
            <entry>[1000]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of ora<replaceable>sid</replaceable></entry>
            <entry>[1002]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Number of parallel procs</entry>
            <entry>[2]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Si no ha copiado los CD a su disco duro el instalador
          <application>&sap;</application> no podrá encontrar
          el CD que necesite (identifica los contenidos mediante
          fichero <filename>LABEL.ASC</filename> de cada CD) y por lo
          tanto le pedirá que introduzca y monte el CD, o que
          confirme o introduzca la ruta de montaje.</para>

        <para><filename>CENTRDB.R3S</filename> puede contener algún
          error.  En nuestro caso, solicitó
          el CD EXPORT4 más de una vez, pero se le indicó
          la clave correcta (6_LOCATION, luego 7_LOCATION, etc),
          así que pudimos continuar introduciendo
          los valores correctos.</para>

        <para>Aparte de algunos problemas que se detallan más
          adelante  deberíamos ir llegando a la instalación
          del software de base de datos &oracle;.</para>
      </sect3>

      <sect3 xml:id="startr3setup-46C">
	<title>Iniciar <command>R3SETUP</command> 4.6C SR2</title>

        <para>Asegúrese de que <envar>LD_LIBRARY_PATH</envar> esté
          correctamente configurada.  Tenga en cuenta de que es un valor
          diferente de la instalación 4.6B con
	  <application>&oracle; 8.0.5</application>:</para>

	<screen>&prompt.root; <userinput>export LD_LIBRARY_PATH=/sapmnt/PRD/exe:/oracle/PRD/817_32/lib</userinput></screen>

        <para>Arranque <command>R3SETUP</command> como el usuario
          <systemitem class="username">root</systemitem>
          desde el directorio de instalación:</para>

	<screen>&prompt.root; <userinput>cd /oracle/PRD/sapreorg/install</userinput>
&prompt.root; <userinput>./R3SETUP -f CENTRAL.R3S</userinput></screen>

        <para>El <quote>script</quote> le preguntará algunas cosas.
          Le presentamos la respuesta por omisión entre corchetes
          y después la respuesta que dimos nosotros):</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="3">
	  <thead>
	  <row>
	    <entry>Pregunta</entry>
	    <entry>Por omisión</entry>
	    <entry>Entrada</entry>
	  </row>
	  </thead>
	  <tbody>
	  <row>
	    <entry>Enter SAP System ID</entry>
	    <entry>[C11]</entry>
	    <entry>PRD<keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter SAP Instance Number</entry>
	    <entry>[00]</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter SAPMOUNT Directory</entry>
	    <entry>[/sapmnt]</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter name of SAP central host</entry>
	    <entry>[majestix]</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter Database System ID</entry>
	    <entry>[PRD]</entry>
	    <entry>PRD<keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter name of SAP db host</entry>
	    <entry>[majestix]</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Select character set</entry>
	    <entry>[1] (WE8DEC)</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter Oracle server version (2) Oracle 8.1.7</entry>
	    <entry> </entry>
	    <entry>2<keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Extract Oracle Client archive</entry>
	    <entry>[1] (Yes, extract)</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter path to KERNEL CD</entry>
	    <entry>[/sapcd]</entry>
	    <entry>/oracle/PRD/sapreorg/KERNEL</entry>
	  </row>
	  <row>
	    <entry>Enter amount of RAM for SAP + DB</entry>
	    <entry>2044</entry>
	    <entry>1800<keycap>Intro</keycap> (in Megabytes)</entry>
	  </row>
	  <row>
	    <entry>Service Entry Message Server</entry>
	    <entry>[3600]</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter Group-ID of sapsys</entry>
	    <entry>[100]</entry>
	    <entry><keycap>Intro</keycap></entry>
	  </row>
	  <row>
            <entry>Enter Group-ID of oper</entry>
            <entry>[101]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of dba</entry>
            <entry>[102]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of <systemitem class="username">oraprd</systemitem></entry>
            <entry>[1002]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of <systemitem class="username">prdadm</systemitem></entry>
            <entry>[1000]</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>LDAP support</entry>
            <entry> </entry>
            <entry>3<keycap>Intro</keycap> (no support)</entry>
          </row>
          <row>
            <entry>Installation step completed</entry>
            <entry>[1] (continue)</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Choose installation service</entry>
            <entry>[1] (DB inst,file)</entry>
            <entry><keycap>Intro</keycap></entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>La creación de usuarios da un
          error durante la instalación en las fases
          OSUSERDBSID_IND_ORA (al crear al usuario
          <systemitem class="username">ora<replaceable>sid</replaceable></systemitem>) y
          OSUSERSIDADM_IND_ORA (al crear el usuario
	  <systemitem class="username"><replaceable>sid</replaceable>adm</systemitem>).</para>

       <para>Más adelante hablaremos de cierto problemas
          que aún tenemos pendientes, pero ha llegado el
          momento de instalar el software
          de base de datos &oracle;.</para>

      </sect3>
    </sect2>

    <sect2 xml:id="installingoracle805">
      <title>Instalación de &oracle; 8.0.5</title>

      <para>Consulte los
        <filename>Readme</filename> de &oracle; y las notas de
        de &sap; sobre Linux y <application>&oracle; DB</application>
        por si hubiera algo que le pueda afectar.  La mayoría de los
        problemas, por no decir todos, tienen su origen en bibliotecas
        incompatibles.</para>

      <para>Para mayor información sobre la instalación
        de <application>&oracle;</application> diríjase al
        <link linkend="linuxemu-oracle">capítulo de
        instalación de &oracle;.</link></para>


      <sect3 xml:id="installingtheoracle805withorainst">
        <title>Instalación de &oracle; 8.0.5 con <command>orainst</command></title>

        <para>Si quiere instalar <application>&oracle; 8.0.5</application>
          necesitará unas cuantas bibliotecas para el enlazado,
          ya que <application>&oracle; 8.0.5</application>
          fué enlazado con una glibc antigua (la de RedHat 6.0),
          pero RedHat 6.1 usa una nueva glibc.  Tendrá que
          instalar los siguientes paquetes para
          asegurarse que el reenlazado funcione:</para>

        <para><filename>compat-libs-5.2-2.i386.rpm</filename></para>
        <para><filename>compat-glibc-5.2-2.0.7.2.i386.rpm</filename></para>
        <para><filename>compat-egcs-5.2-1.0.3a.1.i386.rpm</filename></para>
        <para><filename>compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</filename></para>
        <para><filename>compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</filename></para>

        <para>Para más información consulte las notas
          correspondientes de &sap; o los <filename>Readme</filename>
          de &oracle;.  Si no es posible (durante la instalación
          no tuvimos tiempo suficiente para ello), se
          podrían utilizar los binarios originales, o
          los binarios reenlazados de un sistema original RedHat.</para>

        <para>Instale el paquete Tcl de RedHat para compilar el agente
          inteligente.  Si no puede conseguir
          <filename>tcl-8.0.3-20.i386.rpm</filename> debería
          funcionar una versión más reciente, por ejemplo
          <filename>tcl-8.0.5-30.i386.rpm</filename> para RedHat.</para>

        <para>Aparte del reenlazado, la instalación
          es muy sencilla:</para>

        <screen>&prompt.root; <userinput>su - oraids</userinput>
&prompt.root; <userinput>export TERM=xterm</userinput>
&prompt.root; <userinput>export ORACLE_TERM=xterm</userinput>
&prompt.root; <userinput>export ORACLE_HOME=/oracle/IDS</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/orainst_sap</userinput>
&prompt.root; <userinput>./orainst</userinput></screen>

        <para>Confirme todas las pantallas con <keycap>Intro</keycap> hasta
          que el software esté instalado; todas excepto en la que
          debe quitar la marca de instalación al
	  <emphasis>visualizador de
          textos &oracle; en línea</emphasis>, ya que no
          existe para Linux.  <application>&oracle;</application>
          intentará, gracias a esto, reenlazar con
          <command>i386-glibc20-linux-gcc</command>
          en lugar de <command>gcc</command>,
          <command>egcs</command> o
          <command>i386-redhat-linux-gcc</command>.</para>

        <para>Debido a la falta de tiempo decidimos usar los binarios
          de una versión
          <application>&oracle; 8.0.5 PreProduction</application>,
          después de que nuestro primer intento de que funcionara la
          versión del CD RDBMS fallara y viendo que encontrar y
          utilizar los RPM correctos hubiera sido una pesadilla.</para>

      </sect3>

      <sect3 xml:id="installingtheoracle805preproduction">
        <title>Instalación de &oracle; 8.0.5 <quote>Pre-production
          Release</quote> para Linux (Kernel 2.0.33)</title>

        <para>La instalación es bastante fácil.
          Monte el CD e inicie el instalador.  Le preguntará
          por la ubicación del directorio home de &oracle;,
          y copiará en él todos los binarios.  (Nosotros
          no eliminamos los restos de una instalación
          RDBMS anterior que no terminó de llegó a
	  terminar).</para>

        <para>Tras esto la base de datos <application>&oracle;</application>
          puede arrancar.</para>
      </sect3>
    </sect2>

    <sect2 xml:id="installingoracle817">
      <title>Instalación desde el fichero comprimido de
        Linux &oracle; 8.1.7</title>

      <para>Descomprima el fichero
        <filename>oracle81732.tgz</filename> (creado en el directorio
        de instalación en un sistema Linux) y descomprímalo en
        <filename>/oracle/SID/817_32/</filename>.</para>
    </sect2>

    <sect2 xml:id="continuewithsapr4installation">
      <title>Continúe con la instalación &sap.r3;</title>

      <para>Revise las configuraciones del entorno de los usuarios
        <systemitem class="username">idsamd</systemitem>
        (<replaceable>sid</replaceable>adm) y
        <systemitem class="username">oraids</systemitem> (ora<replaceable>sid</replaceable>).
        Ambos deben tener los ficheros
        <filename>.profile</filename>, <filename>.login</filename> y
        <filename>.cshrc</filename> con
        <command>hostname</command> correctamente configurado.  En caso
        que el nombre del sistema sea el nombre cualificado completo
        tendrá que cambiar <command>hostname</command> a
        <command>hostname -s</command> en los tres ficheros anteriormente
        citados.</para>

      <sect3 xml:id="databaseload">
        <title>Carga de la base de datos</title>

        <para>Hecho esto puede rearrancar <command>R3SETUP</command>
          o volver a arrancar la instalación
          (dependiendo si eligió salir o no).
          <command>R3SETUP</command>
          crea las tablas y carga los datos (en 46B IDES,
          desde EXPORT1 a EXPORT6, en 46C desde DISK1 a DISK4)
          mediante <command>R3load</command>.</para>

        <para>Cuando se termina la carga de la base de datos (que puede
          llevar un par de horas) se le pedirán algunas
          contraseñas.  En una instalación de prueba puede
          usar unas contraseñas de compromiso.
          (<emphasis>use una contraseña de verdad si le preocupa
          siquiera ligeramente la seguridad</emphasis>):</para>

        <informaltable frame="none" pgwide="1">
          <tgroup cols="2">
          <thead>
          <row>
            <entry>Pregunta</entry>
            <entry>Entrada</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>Enter Password for sapr3</entry>
            <entry>sap<keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Confirum Password for sapr3</entry>
            <entry>sap<keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Enter Password for sys</entry>
            <entry>change_on_install<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Confirm Password for sys</entry>
            <entry>change_on_install<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Password for system</entry>
            <entry>manager<keycap>Intro</keycap></entry>
          </row>
          <row>
            <entry>Confirm Password for system</entry>
            <entry>manager<keycap>Intro</keycap></entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Aquí tuvimos problemas con
	  <command>dipgntab</command> en la instalación de
          4.6B.</para>
      </sect3>

      <sect3 xml:id="listener">
        <title>Las escuchas</title>

        <para>Arranque las escuchas de <application>&oracle;</application>
          con el usuario <systemitem class="username">ora<replaceable>sid</replaceable></systemitem>
          de la siguiente manera:</para>

        <screen>&prompt.user; <userinput>umask 0; lsnrctl start</userinput></screen>

        <para>Si no lo hace así verá un error
          <errorcode>ORA-12546</errorcode>,
          ya que los sockets no tendrán los permisos correctos.
          Consulte la nota 072984 de &sap;.</para>
      </sect3>

      <sect3 xml:id="mnlstables">
	<title>Actualización de tablas MNLS</title>

        <para>Si tiene previsto importar idiomas que no sean Latin-1
          en <application>&sap;</application> tiene que actualizar
          las tablas <quote>Multi National Language Support</quote>.
          Tiene más información sobre esto en las notas de
          &sap; OSS 15023 y 45619.  Si no es su caso puede saltarse
          esta parte de la instalación de
	  <application>&sap;</application>.</para>

        <note><para>Aunque no necesite soporte MNLS sigue siendo necesario
          que revise la tabla TCPDB y que la inicialice si no lo ha hecho ya.
          Consulte las notas 0015023 y 0045619 de &sap; para más
          información.</para></note>
      </sect3>
    </sect2>

    <sect2 xml:id="postinstallationsteps">
      <title>Pasos para después de la instalación</title>

      <sect3 xml:id="requestsapr3licensekey">
        <title>Solicitar una licencia &sap.r3;</title>

        <para>Tiene que solicitar una licencia de
          <application>&sap.r3;</application>.  No tendrá más
          remedio, puesto que la licencia temporal que se usa durante la
          instalación tiene un límite de validez de
          cuatro semanas.  Necesitará la llave
          hardware.  Entre al sistema como usuario
          <systemitem class="username">idsadm</systemitem>
          y ejecute <command>saplicense</command>:</para>

        <screen>&prompt.root; <userinput>/sapmnt/IDS/exe/saplicense -get</userinput></screen>

        <para>Si ejecuta <command>saplicense</command> sin parámetros
          verá una lista de opciones.  Una vez que tenga la licencia
          en su poder la podrá instalar del siguiente modo:
          </para>

        <screen>&prompt.root; <userinput>/sapmnt/IDS/exe/saplicense -install</userinput></screen>

        <para>Se le solicitará que introduzca los siguientes
          valores:</para>

        <programlisting>SAP SYSTEM ID   = <replaceable>SID, 3 caracteres</replaceable>
CUSTOMER KEY    = <replaceable>llave hardware, 11 caracteres</replaceable>
INSTALLATION NO = <replaceable>instalación, 10 caracteres</replaceable>
EXPIRATION DATE = <replaceable>yyyymmdd, normalmente "99991231"</replaceable>
LICENSE KEY     = <replaceable>licencia, 24 caracteres</replaceable></programlisting>
      </sect3>

      <sect3 xml:id="creatingusers">
        <title>Crear usuarios</title>

        <para>Cree un usuario dentro del cliente 000 (es necesario
          para algunas tareas que requieren hacerse dentro del cliente 000,
          pero con un usuario que no sea ni
          <systemitem class="username">sap*</systemitem>
          ni <systemitem class="username">ddic</systemitem>).  Nosotros solemos elegir
          para este usuario el nombre de <systemitem class="username">wartung</systemitem>
          (o <systemitem class="username">service</systemitem>, ambos
          <quote>servicio</quote> en castellano).
          Los perfiles son <literal>sap_new</literal> y
          <literal>sap_all</literal>.  Para mayor seguridad
          las contraseñas para usuarios por defecto dentro de
          todos los clientes deben cambiarse (incluidos los
          usuarios <systemitem class="username">sap*</systemitem> y
          <systemitem class="username">ddic</systemitem>).</para>
      </sect3>

      <sect3 xml:id="configtranssysprofileopermodesetc">
        <title>Configurar sistema de transporte, perfil,
	  modos de operación, etc.</title>

        <para>Dentro del cliente 000 y con un usuario que no sea
          <systemitem class="username">ddic</systemitem>
          ni <systemitem class="username">sap*</systemitem>, haga al menos lo siguiente:</para>

        <informaltable frame="none" pgwide="1">
          <tgroup cols="2">
          <thead>
          <row>
            <entry>Tarea</entry>
            <entry>Transacción</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>Configurar sistema de transporte, por ejemplo como
              <emphasis>Stand-Alone
              Transport Domain Entity</emphasis></entry>
	    <entry>STMS</entry>
          </row>
          <row>
            <entry>Crear / editar perfil para el sistema</entry>
            <entry>RZ10</entry>
          </row>
          <row>
            <entry>Mantener modos de operación e instancias</entry>
            <entry>RZ04</entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Todos estos (y muchos más) pasos para ejecutar
          después de la instalación se explican de forma
          detallada en las guías de instalación de
          <application>&sap;</application>.</para>
      </sect3>

      <sect3 xml:id="editintsidsap">
        <title>Editar <filename>initsid.sap</filename> (<filename>initIDS.sap</filename>)</title>

        <para>El fichero <filename>/oracle/IDS/dbs/initIDS.sap</filename>
          contiene la copia de seguridad del perfil de de
	  <application>&sap;</application>.
          Aquí es donde debe definir el tamaño de la cinta a
          utilizar, tipo de conpresión, etc. Las siguientes
          modificaciones nos permitirían ejecutar
          <command>sapdba</command> /
          <command>brbackup</command>:</para>

        <programlisting>compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</programlisting>

        <para>Explicación:</para>

        <para><varname>compress</varname>: La cinta que usamos es una
           HP DLT1 que tiene compresión por hardware.</para>

        <para><varname>archive_function</varname>: Define el
          comportamiento por omisión del almacenaje de los
          logs de &oracle;: los nuevos ficheros de log se guardan en cinta,
          los ficheros de log que ya han sido guardados
          se guardan de nuevo y luego se borran.  Así se
          evitan muchos problemas si necesita recuperar la base de datos
          y una de las cintas está dañada.</para>

        <para><varname>cpio_flags</varname>: por omisión se usa
          <option>-B</option>, que asigna un tamaño de bloque de
          5120&nbsp;Bytes.  HP recomienda un tamaño de bloque de
          32&nbsp;K como mínimo; usamos
          <option>--block-size=128</option> para que sea de
          64&nbsp;K.  Necesitaremos usar <option>--format=newc</option>
          porque tenemos números de inodo mayores a 65535.  La
          última opción (<option>--quiet</option>) se necesita
          ya que <command>brbackup</command> se queja en cuanto
          <command>cpio</command> imprime los números de bloque
          guardados.</para>

        <para><varname>cpio_in_flags</varname>: Parámetros
          necesarios para cargar datos desde la cinta.  El formato
          es reconocido automáticamente.</para>

        <para><varname>tape_size</varname>: La
          capacidad de almacenaje de la cinta.  Por razones
          de seguridad (nosotros usamos compresión por
          hardware) el valor es ligeramente menor que el valor
          real.</para>

        <para><varname>tape_address</varname>: El dispositivo
          (que no permite el rebobinado) que se usará con
          <command>cpio</command>.</para>

        <para><varname>tape_address_rew</varname>: El dispositivo
          (que permite el rebobinado) que se usará con
          <command>cpio</command>.</para>
      </sect3>

      <sect3>
	<title>Aspectos de la configuración una vez
          concluida la instalación</title>

        <para>Los siguientes parámetros
	  <application>&sap;</application>
          deben personalizarse una vez concluída la
          instalación (los ejemplos son para IDES 46B,
          1&nbsp;GB de memoria):</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nombre</entry>
		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>ztta/roll_extension</entry>
		<entry>250000000</entry>
	      </row>
	      <row>
		<entry>abap/heap_area_dia</entry>
                <entry>300000000</entry>
	      </row>
	      <row>
		<entry>abap/heap_area_nondia</entry>
		<entry>400000000</entry>
	      </row>
	      <row>
		<entry>em/initial_size_MB</entry>
		<entry>256</entry>
	      </row>
	      <row>
		<entry>em/blocksize_kB</entry>
		<entry>1024</entry>
	      </row>
	      <row>
		<entry>ipc/shm_psize_40</entry>
		<entry>70000000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>&sap; Note 0013026:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nombre</entry>
		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>ztta/dynpro_area</entry>
		<entry>2500000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>&sap; Note 0157246:</para>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nombre</entry>
		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>rdisp/ROLL_MAXFS</entry>
		<entry>16000</entry>
	      </row>
	      <row>
		<entry>rdisp/PG_MAXFS</entry>
		<entry>30000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<note>
	  <para>En un sistema con 1&nbsp;GB de memoria y los parámetros
            arriba expuestos puede esperarse encontrar un consumo de
            memoria similar al siguiente:</para>

	  <programlisting>Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</programlisting>
	</note>
      </sect3>
    </sect2>

    <sect2 xml:id="problemsduringinstallation">
      <title>Problemas durante la instalación</title>

      <sect3 xml:id="restartr3setup">
	<title>Reiniciar <command>R3SETUP</command> una vez arreglado
          el problema</title>

        <para><command>R3SETUP</command> se detiene si encuentra un error.
          Si ha revisado los logs y ha corregido el error reinicie
          <command>R3SETUP</command>; hágalo seleccionando
          la opción REPEAT en el paso donde
          <command>R3SETUP</command> se detuvo.</para>

        <para>Cuando quiera reiniciar <command>R3SETUP</command>
          inícielo con el fichero <filename>R3S</filename>
          correspondiente:</para>

	  <screen>&prompt.root; <userinput>./R3SETUP -f CENTRDB.R3S</userinput></screen>

	  <para>en el caso de 4.6B, o con</para>

	  <screen>&prompt.root; <userinput>./R3SETUP -f CENTRAL.R3S</userinput></screen>

          <para>en 4.6C; no importa si el error ocurrió
            con <filename>CENTRAL.R3S</filename> o con
            <filename>DATABASE.R3S</filename>.</para>

        <note><para>En algunas etapas, <command>R3SETUP</command> asume
            que la base de datos y los procesos
            <application>&sap;</application> están en marcha
            (como aquellos en los cuales se completaron los pasos).
            Si hay errores y por ejemplo la base de datos no se
            puede iniciar tendrá que arrancar la base de datos y
            <application>&sap;</application> manualmente una vez haya
            corregido los errores y antes de iniciar
            <command>R3SETUP</command> nuevamente.</para>

          <para>No olvide iniciar también la escucha de
            <application>&oracle;</application>
            (como <systemitem class="username">ora<replaceable>sid</replaceable></systemitem> con
            <command>umask 0; lsnrctl start</command>) si también
            tuvo que detenerlo (si por ejemplo hubo que reiniciar el
            sistema).</para>
	</note>
      </sect3>

      <sect3 xml:id="indoraduringduringr3setup">
        <title>OSUSERSIDADM_IND_ORA durante <command>R3SETUP</command></title>

        <para>Si <command>R3SETUP</command> se queja en este etapa edite
          la plantilla <command>R3SETUP</command> que esté usando
          en ese momento (<filename>CENTRDB.R3S</filename> (en 4.6B) o
          <filename>CENTRAL.R3S</filename> o
          <filename>DATABASE.R3S</filename> (en 4.6C)).
          Ubique <literal>[OSUSERSIDADM_IND_ORA]</literal> o busque la
          única entrada <literal>STATUS=ERROR</literal> y
          edite los siguientes valores:</para>

        <programlisting>HOME=/home/<replaceable>sid</replaceable>adm (was empty)
STATUS=OK (had status ERROR)
        </programlisting>

        <para>Hecho esto, reinicie <command>R3SETUP</command>.</para>
      </sect3>

      <sect3 xml:id="indoraduringr3setup">
        <title>OSUSERDBSID_IND_ORA durante <command>R3SETUP</command></title>

        <para>Es posible que <command>R3SETUP</command> se queje
	  también en esta etapa.  El
          error aquí es similar al de la fase
          OSUSERSIDADM_IND_ORA.  Edite la plantilla
          <command>R3SETUP</command> que esté usando
          (<filename>CENTRDB.R3S</filename> (en 4.6B) o
          <filename>CENTRAL.R3S</filename> o
          <filename>DATABASE.R3S</filename> (en 4.6C)).
          Ubique <literal>[OSUSERDBSID_IND_ORA]</literal> o busque la
          única entrada <literal>STATUS=ERROR</literal> y
          edite los siguientes valores en esa sección:</para>

        <programlisting>STATUS=OK</programlisting>

        <para>Hecho esto reinicie <command>R3SETUP</command>.</para>
      </sect3>

      <sect3 xml:id="oraviewvrffilenotfound">
        <title><errorname>oraview.vrf FILE NOT FOUND</errorname> durante la instalación de &oracle;</title>

        <para>No ha dejado sin seleccionar la opción de
          instalar el <emphasis>visualizador de texto en línea
          de &oracle;</emphasis> antes de iniciar la instalación.
          Está seleccionado para ser instalado, aunque la
          aplicación no existe para Linux.  Deje sin seleccionar
          el producto en el menú de instalación de
          <application>&oracle;</application> y reinicie la
          instalación.</para>
      </sect3>

      <sect3 xml:id="textenvincalid">
        <title><errorname>TEXTENV_INVALID</errorname> durante <command>R3SETUP</command>, o inicio de RFC o SAPgui</title>

        <para>Si se encuentra con este error significa que falta el locale
          correcto.  La nota 0171356 de &sap; contiene una lista de RPM que
          deben instalarse (p.ej. <filename>saplocales-1.0-3</filename>,
          <filename>saposcheck-1.0-1</filename> para RedHat 6.1).
          En caso de que ignore todos los errores relacionados y
          configure los <literal>STATUS</literal> correspondientes
          de <literal>ERROR</literal> a <literal>OK</literal>
          (en <filename>CENTRDB.R3S</filename>) cada vez que
          <command>R3SETUP</command> se queje y simplemente reinicie
          <command>R3SETUP</command>; el sistema
          <application>&sap;</application>
          no estará configurado correctamente y no podrá
          conectarse al sistema con <application>SAPgui</application>,
          aunque el sistema pueda arrancar.  Si intenta conectar con el
          antiguo <application>SAPgui</application> de Linux recibirá
          los siguientes mensajes:</para>

        <programlisting>Sat May 5 14:23:14 2001
*** ERROR =&gt; no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR =&gt; ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR =&gt; Error when generating text environment. [trgmsgi. 0435]
*** ERROR =&gt; function failed [trgmsgi. 0447]
*** ERROR =&gt; no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</programlisting>

        <para>Este comportamiento se debe a que
          <application>&sap.r3;</application>
          es incapaz de asignar correctamente un locale y tampoco
          puede configurarse a sí mismo correctamente (faltan
          entradas en algunas tablas de la base de datos).
          Añada las siguientes entradas al fichero
          <filename>DEFAULT.PFL</filename> y podrá conectarse a
          <application>&sap;</application>
          (vea la nota 0043288):</para>

	<programlisting>abap/set_etct_env_at_new_mode = 0
install/collate/active = 0
rscp/TCP0B = TCP0B</programlisting>

        <para>Reinicie el sistema <application>&sap;</application>.
          Puede conectar al sistema, aunque la configuración
          de idioma o de país puede que no funcione como se
          espera de ella.  Una vez corregidas las configuraciones de
          país (y proporcionados los locales adecuados)
          puede eliminar estas entradas
          de <filename>DEFAULT.PFL</filename> y el sistema
          <application>&sap;</application> puede reiniciarse.</para>

      </sect3>

      <sect3 xml:id="ora-00001">
	<title><errorcode>ORA-00001</errorcode></title>

        <para>Este error solo aparece con
          <application>&oracle; 8.1.7</application> en FreeBSD&nbsp;4.5.
          Se debe a que la base de datos <application>&oracle;</application>
          no puede inicializarse correctamente y se viene abajo, dejando
          semáforos y memoria compartida en el sistema.  El
          siguiente intento de iniciar la base de datos produce
          el error <errorcode>ORA-00001</errorcode>.</para>

        <para>Encuéntrelos con <command>ipcs -a</command> y
          elimínelos
          con <command>ipcrm</command>.</para>
      </sect3>

      <sect3 xml:id="ora-00445pmon">
	<title><errorcode>ORA-00445</errorcode> (Brackground Process PMON
          Did Not Start)</title>

        <para>Este error tuvo lugar con
          <application>&oracle; 8.1.7</application>.  Aparece si
          se arranca la base de datos con el <quote>script</quote>
          <command>startsap</command>
          (por ejemplo <command>startsap_majestix_00</command>)
          con el usuario <systemitem class="username">prdadm</systemitem>.</para>

        <para>Una solución (entre otras) es iniciar la base de
          datos con el usuario <systemitem class="username">oraprd</systemitem> en
          lugar de hacerlo con <command>svrmgrl</command>:</para>

	<screen>&prompt.user; <userinput>svrmgrl</userinput>
SVRMGR&gt; <userinput>connect internal;</userinput>
SVRMGR&gt; <userinput>startup</userinput>;
SVRMGR&gt; <userinput>exit</userinput></screen>

      </sect3>

      <sect3 xml:id="ora-12546">
        <title><errorcode>ORA-12546</errorcode> (Start Listener with Correct
          Permissions)</title>

        <para>Inicie la escucha de <application>&oracle;</application> como
          usuario <systemitem class="username">oraids</systemitem> con la siguiente
	  orden:</para>

        <screen>&prompt.root; <userinput>umask 0; lsnrctl start</userinput></screen>

        <para>De no ser así puede encontrarse con el error
          <errorcode>ORA-12546</errorcode>, ya que los sockets no
          tendrán los permisos adecuados.  Consulte la nota
          de &sap; 0072984.</para>
      </sect3>

      <sect3 xml:id="ora-27102">
	<title><errorcode>ORA-27102</errorcode> (Out of Memory)</title>

        <para>Este error ocurre al tratar de usar valores mayores
          a 1&nbsp;GB (1024x1024x1024) en <literal>MAXDSIZ</literal>
          y <literal>DFLDSIZ</literal>.  Recibiremos, además, este
          otro error:
          <errorname>Linux Error 12: Cannot allocate memory</errorname>.</para>
      </sect3>

      <sect3 xml:id="dipgntabindind">
        <title>[DIPGNTAB_IND_IND] during <command>R3SETUP</command></title>

        <para>Consulte la nota de &sap; 0130581 de
          (<command>R3SETUP</command> step
          (<literal>DIPGNTAB</literal> terminates).  Por alguna razón
          durante la instalación específica IDES el proceso
          de instalación no usaba el nombre de sistema correcto
          <application>&sap;</application>  <quote>IDS</quote>
          sino la cadena vacía <literal>""</literal>.
          Esto provocaba algunos errores menores en el acceso a directorios,
          ya que las rutas se generan dinámicamente en base a dicho
          <replaceable>SID</replaceable> (en este caso IDS).
          En lugar de ejecutar los accesos del siguiente modo :</para>

        <programlisting>/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</programlisting>

        <para>se usaron las siguientes rutas:</para>

        <programlisting>/usr/sap//SYS/...
/usr/sap/D00</programlisting>

        <para>Para continuar con la instalación creamos un
          enlace y un directorio adicional:</para>

        <screen>&prompt.root; <userinput>pwd</userinput>
/compat/linux/usr/sap
&prompt.root; <userinput>ls -l</userinput>
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans</screen>

        <para>Encontramos una descripción de este comportamiento
          en las notas de &sap;.  (0029227 y 0008401).
          En la instalación de
          <application>&sap; 4.6C</application> no tuvimos estos
          problemas.</para>
      </sect3>

      <sect3 xml:id="rfcrswboiniindind">
        <title>[RFCRSWBOINI_IND_IND] during <command>R3SETUP</command></title>

        <para>Durante la instalación de
          <application>&sap; 4.6C</application> nos encontramos con
          este error, cuyo origen está en un error que tuvo lugar
          anteriormente durante la propia instalación.
          Busque en sus ficheros de log y corrija el problema.</para>

        <para>Si despues de buscar en los logs el error resulta ser
          el correcto (revise las notas de &sap;), puede poner el
          <literal>STATUS</literal> del paso donde se produce el error de
          <literal>ERROR</literal> a <literal>OK</literal>
          (en el fichero <filename>CENTRDB.R3S</filename>) y reiniciar
          <command>R3SETUP</command>.  Una vez finalizada la instalación,
          tiene que ejecutar el informe <literal>RSWBOINS</literal>
          de la transacción SE38.  Consulte la nota &sap; 0162266
          para más información sobre las fases
          <literal>RFCRSWBOINI</literal> y
	  <literal>RFCRADDBDIF</literal>.</para>
      </sect3>

      <sect3 xml:id="rfcraddbdifindind">
        <title>[RFCRADDBDIF_IND_IND] during <command>R3SETUP</command></title>

        <para>Aquí sucede lo mismo de antes, asegúrese,
          revisando los logs, de que la causa de este error no esté
          en algún problema previo.</para>

        <para>Si en la nota de &sap; 0162266 está la solución
          ponga el <literal>STATUS</literal> del paso donde se
          produce el error de
          <literal>ERROR</literal> a <literal>OK</literal>
          (en el fichero <filename>CENTRDB.R3S</filename>) y reinicie
          <command>R3SETUP</command>.  Una vez finalizada la
          instalación ejecute el informe
          <literal>RADDBDIF</literal> desde la transacción SE38.</para>
      </sect3>

      <sect3 xml:id="sigactionsig31">
        <title><errorcode>sigaction sig31: File size limit exceeded</errorcode></title>

        <para>Este error ocurrió durante el inicio del proceso
          <application>&sap;</application>
          <emphasis>disp+work</emphasis>.  Si inicia
          <application>&sap;</application>
          con el <quote>script</quote> <command>startsap</command>
          se inician los subprocesos que se separan y hacen el
          <quote>trabajo sucio</quote> de iniciar el resto de procesos de
          <application>&sap;</application>, pero es importante saber que
          el propio <quote>script</quote> no notará si algo ha
          ido mal.</para>

        <para>Puede revisar si los procesos <application>&sap;</application>
          se iniciaron correctamente con
          <command>ps ax | grep SID</command>, que
          le proporcionará una lista de todos los procesos de
          <application>&oracle;</application> y de
          <application>&sap;</application>.
          Si parece que algunos procesos no están, o si no puede
          conectarse al sistema <application>&sap;</application> revise los
          logs que encontrará en
          <filename>/usr/sap/SID/DVEBMGSnr/work/</filename>.
          Los ficheros que debe revisar son <filename>dev_ms</filename> y
	  <filename>dev_disp</filename>.</para>

        <para>La señal 31 aparece si la cantidad de memoria
          compartida asignada a
          <application>&oracle;</application> y
	  <application>&sap;</application>
          supera la definida dentro del fichero de configuración del
          kernel y puede resolverse usando un valor mayor:</para>

        <programlisting># larger value for 46C production systems:
options SHMMAXPGS=393216
# smaller value sufficient for 46B:
#options SHMMAXPGS=262144</programlisting>

      </sect3>

      <sect3 xml:id="saposcolfails">
        <title>Start of <command>saposcol</command> Failed</title>

        <para>Hay algunos problemas con el programa
          <command>saposcol</command> (version 4.6D).
          El sistema <application>&sap;</application> utiliza
          <command>saposcol</command> para recoger datos del
          rendimiento del sistema.  Este programa no es necesario para
          usar el sistema <application>&sap;</application>, así
          que el problema puede considerarse como poco importante.
          La versión más antigua (4.6B) funciona, pero
          no recoge todos los datos (muchas llamadas devolverán
          un 0, por ejemplo el uso de CPU).</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 xml:id="linuxemu-advanced">
    <title>Temas avanzados</title>

    <para>Si siente curiosidad por saber cómo funciona
      la compatibilidad con Linux esta es la sección que
      debe leer.  La mayor parte de lo que sigue está
      basado casi en su totalidad en un mensaje enviado por Terry
      Lambert <email>tlambert@primenet.com</email> a la lista &a.chat;
      (Message ID: <literal>&lt;199906020108.SAA07001@usr09.primenet.com&gt;</literal>).</para>

    <sect2>
      <title>?Cómo funciona?</title>
      <indexterm><primary>cargador de clase en
        ejecución</primary></indexterm>

    <para>&os; dispone de una abstracció denominada
      <quote>cargador de clase en ejecución</quote>.  Esto no
      es más que un bloque de código incrustado
      en la llamada &man.execve.2; del sistema.</para>

    <para>Históricamente las plataformas &unix;
      disponían de un único cargador
      de binarios, que en última instancia
      (<emphasis>fallback</emphasis>) recurría
      al cargador <literal>#!</literal> para ejecutar
      cualesquiera intérpretes o scripts de la shell. Ese
      cargador único examinaba el número
      mágico (generalmente los 4 u 8 primeros bytes
      del fichero) para ver si era un binario reconocible
      por el sistema y, en tal caso, invocaba al cargador
      binario.</para>

    <para>Si no era de tipo binario, la llamada &man.execve.2;
      devolvía un error y la shell intentaba empezar
      a ejecutarlo como órdenes shell, tomando por
      defecto como punto de partida
      <quote>la shell actual, sea cual sea</quote>.</para>

    <para>Posteriormente se pensó en hacer una
      modificación de manera que &man.sh.1; examinara
      los dos primeros caracteres, de modo que si eran
      <literal>:\n</literal> se llamaba a la shell
      &man.csh.1; en su lugar (parece ser que en SCO
      fueron los primeros en utilizar ese truco).</para>

      <para>Lo que ocurre ahora es que &os; dispone de una
        lista de cargadores, en lugar de uno solo.  &os;
        recorre esa lista de cargadores, con un cargador genérico
        <literal>#!</literal> que sabe reconocer los
	intérpretes en base a los caracteres que
        siguen al siguiente espacio en blanco, con
	<filename>/bin/sh</filename> como último
        recurso.</para>


      <indexterm><primary>ELF</primary></indexterm>

    <para>Para dar soporte a la ABI
      (<quote>Application Binary Interface</quote>) de Linux,
      &os; interpreta el número mágico como un
      binario ELF (<quote>Executable and Linking
      Format</quote>): En este punto no hace distinción
      entre &os;, &solaris;, &linux; o cualquier otro SO que tenga un
      tipo de imagen ELF.</para>

      <indexterm><primary>Solaris</primary></indexterm>

    <para>El cargador ELF busca entonces una marca
      (<emphasis>brand</emphasis>) especial, una
      sección de comentarios en la imagen ELF
      que no está presente en los binarios ELF de
      SVR4/&solaris;.</para>

    <para>Para que los binarios de Linux funcionen deben
      estar marcados con &man.brandelf.1; como tipo
      <literal>Linux</literal>:</para>

      <screen>&prompt.root; <userinput>brandelf -t Linux file</userinput></screen>

    <para>Hecho esto el cargador ELF verá la
      marca <literal>Linux</literal> en el fichero.</para>

      <indexterm>
        <primary>ELF</primary>
		<secondary>marcado</secondary>
      </indexterm>

    <para>Cuando el cargador ELF ve la marca
      <literal>Linux</literal> sustituye un puntero en la
      estructura <literal>proc</literal>.  Todas las
      llamadas del sistema se indexan a través de
      este puntero (en un sistema &unix; tradicional
      sería el «array» de estructura
      <literal>sysent[]</literal> que contiene las llamadas
      del sistema).  Además, el proceso se marca
      con unos indicadores (<quote>flags</quote>) para que
      el vector trampa del código de envío
      señales lo maneje de una forma determinada,
      así como otros arreglos (menores) que
      serán utilizados por el módulo Linux
      del kernel.</para>

    <para>El vector de llamada del sistema Linux contiene,
      entre otras cosas, una lista de entradas
      <literal>sysent[]</literal> cuyas direcciones residen
      en el módulo del kernel.</para>

    <para>Cuando el binario Linux realiza una llamada al
      sistema, el código trampa extrae el puntero
      a la función de la llamada del sistema de la estructura
      <literal>proc</literal>, y así obtiene los puntos de
      entrada a las llamadas del sistema Linux, no las
      de &os;.</para>

    <para>Además, el modo Linux cambia la raíz
      de las búsquedas de una forma dinámica. En
      efecto, esto es lo que hace la opción
      <option>union</option> cuando se monta un sistema de ficheros
      (¡y que <emphasis>no</emphasis> es lo mismo que el
      sistema de ficheros <literal>unionfs</literal>!).  Primero
      se hace un intento de buscar el fichero en el directorio
      <filename>/compat/linux/ruta-original</filename>
      y <emphasis>solo después</emphasis>, si lo anterior
      falla, se repite la búsqueda en el
      directorio
      <filename>/ruta-original</filename>.  Esto
      permite que se puedan ejecutar binarios que necesitan de
      otros binarios (por ejemplo las herramientas de
      programación (<quote>toolchain</quote>) de Linux
      pueden ejecutarse en su totalidad bajo la ABI de
      Linux). Esto significa también que los binarios
      Linux pueden cargar y ejecutar binarios &os; si los binarios
      Linux equivalentes no se hallan presentes y que se puede poner
      una orden &man.uname.1; en el árbol de directorios
      <filename>/compat/linux</filename> para poder estar seguros de
      que los binarios Linux no puedan decir que no estaban
      ejecutándose en Linux.</para>

     <para>En efecto, hay un kernel Linux en el kernel
       &os;; las distintas funciones subyacentes que
       implementan todos los servicios proporcionados
       por el kernel son idénticas en ambas, las
       tablas de entradas de llamadas del sistema en &os; y en
       Linux: operaciones del sistema de ficheros, operaciones
       de memoria virtual, envío de señales
       IPC System V, etc.  La única diferencia es que
       los binarios &os; reciben sus funciones de
       conexión (<quote><emphasis>glue</emphasis></quote>)
       y los binarios Linux las suyas (la mayoría de los
       sistemas operativos más antiguos solo tienen sus
       propias funciones de conexión:
       direcciones de funciones en un <quote>array</quote> de
       estructura <literal>sysent[]</literal> estática y
       global, en lugar de direcciones de funciones que se extraen
       a partir de un puntero inicializado dinámicamente
       en la estructura <literal>proc</literal> del proceso que hace
       la llamada).</para>


    <para>?Cuál es entonces la ABI nativa de &os;?  No
      importa. Básicamente, la única diferencia
      es (ahora mismo; esto podría cambiar y probablemente lo
      hará en una release futura) que las funciones de
      conexión de &os; están enlazadas
      estáticamente en el kernel mientras que las de
      Linux pueden estarlo también estáticamente o
      se puede acceder a ellas por medio de un módulo
      del kernel.</para>

    <para>Bien, pero ?de verdad es esto una
      emulación?  No.  Es una implementación ABI, no
      una emulación. No hay un emulador involucrado (ni
      un simulador, para adelantarnos a la siguiente
      pregunta).</para>

    <para>Entonces ?por qué a veces se le llama
      <quote>emulación Linux</quote>?  ¡Para hacer
      más difícil el vender &os;!  En serio, se
      debe a que la primera implementación se hizo
      en un momento en que realmente no había ninguna
      palabra distinta a esa para describir lo que se estaba
      haciendo; decir que &os; ejecutaba binarios Linux no era
      cierto si no se compilaba el código o se cargaba
      un módulo; hacía falta una forma de
      describir todo esto y acabamos usando
      <quote>emulador Linux</quote>.</para>

    </sect2>
  </sect1>
</chapter>
