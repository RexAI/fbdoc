<?xml version="1.0" encoding="iso-8859-2"?>
<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook XML V5.0-Based Extension//EN"
	"http://www.FreeBSD.org/XML/share/xml/freebsd50.dtd">
<!-- $FreeBSD$ -->
<!--

  Installing and Using compiz-fusion in FreeBSD

  The FreeBSD Documentation Project

-->
<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/articles/compiz-fusion/article.xml
     %SRCID%	1.6
-->
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="hu">
  <info><title>A Compiz&nbsp;Fusion telepítése és
      használata</title>
    

    <author><personname><firstname>Manolis</firstname><surname>Kiagias</surname></personname><affiliation>
	<address><email>manolis@FreeBSD.org</email></address>
      </affiliation></author>

    <copyright>
      <year>2008</year>
      <holder role="mailto:manolis@FreeBSD.org">Manolis Kiagias</holder>
    </copyright>

    <pubdate>$FreeBSD$</pubdate>

    <releaseinfo>$FreeBSD$</releaseinfo>

    <legalnotice xml:id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.general;
    </legalnotice>

    <abstract>
      <para>A Linux világában manapság mindenki az
	új divatról, a háromdimenziós asztali
	effektekrõl beszél.  Noha ennek tényleges
	hasznosságát sokan vitatják, az így
	életrekeltett munkakörnyezetek
	gyönyörûen néznek ki.  Több
	megoldás is született ezen a téren, ilyen
	többek között a <link xlink:href="http://compiz.org/"><application>Compiz</application></link>,
	a <link xlink:href="http://www.beryl-project.org/"><application>Beryl</application></link>,
	és a manapság megjelent <link xlink:href="http://www.compiz-fusion.org/"><application>Compiz&nbsp;Fusion</application></link>.
	Szerencsére a &os; használata esetén sem
	kell lemondanunk ezekrõl az effektekrõl.  A most
	bemutatott utasítások ugyanis segítenek
	telepíteni és beállítani
	rendszerünkön a
	<application>Compiz&nbsp;Fusion</application> legfrissebb
	változatát és a
	mûködéséhez szükséges nVidia
	meghajtókat (amennyiben ilyen kártyával
	rendelkezünk).</para>

      <para><emphasis>Fordította: Páli Gábor,
	utolsó ellenõrzés:
	2010.11.28.</emphasis></para>
    </abstract>
  </info>

  <sect1 xml:id="introduction">
    <title>Bevezetés</title>

    <para>A <application>Compiz&nbsp;Fusion</application>
      könnyedén telepíthetõ a
      Portgyûjteménybõl, de a
      beállításához a port
      dokumentációjában megadott
      utasításokon túl még meg kell
      tennünk néhány lépést.  Ebben a
      cikkben igyekszünk segíteni az
      <application>&xorg;</application> szerver megfelelõ
      támogatásának
      konfigurációjában, az nVidia grafikus
      kártya meghajtójának
      beállításában, és
      végül a <command>compiz</command>
      elindításában.</para>

    <para>A cikk elolvasása során megismerjük:</para>

    <itemizedlist>
      <listitem>
	<para>hogyan állítsuk be a legfrissebb nVidia
	  meghajtókat a rendszerünkön (amennyiben
	  szükségünk van rá);</para>
      </listitem>

      <listitem>
	<para>hogyan állítsuk be az
	  <filename>xorg.conf</filename> állományunkban az
	  asztalok kompozícióját;</para>
      </listitem>

      <listitem>
	<para>hogyan telepítsük és
	  állítsuk be a
	  <application>Compiz&nbsp;Fusion</application>
	  alkalmazást a Portgyûjtemény
	  felhasználásával;</para>
      </listitem>

      <listitem>
	<para>hogyan bánjunk el az asztali effektekhez
	  kapcsolódó leggyakoribb hibákkal.</para>
      </listitem>
    </itemizedlist>

  </sect1>

  <sect1 xml:id="nvidia-setup">
    <title>A &os; nVidia meghajtójának
      beállítása</title>

    <para>Az asztalon megjelenõ különbözõ
      effektek igen nagy terhelést rónak a grafikus
      hardverünkre.  Ezért ha nVidia
      gyártmányú chippel rendelkezõ
      kártyánk van, érdemes
      telepítenünk rendszerünkre a
      hozzá tartozó zárt
      forráskódú meghajtó legfrissebb
      változatát.  Ha nem ilyen kártyánk
      van, de tudjuk, hogy képes lesz megbirkózni ezekkel
      az effektekkel, akkor nyugodtan lépjük át ezt a
      szakaszt és folytassuk az <filename>xorg.conf</filename>
      állomány
      beállításával.</para>

    <sect2 xml:id="determine-driver">
      <title>A megfelelõ meghajtó
	kiválasztása</title>

      <para>Az nVidia meghajtók több
	különbözõ verziója
	található meg a Portgyûjteményben.
	Leginkább a grafikus kártyánk típusa
	(és kora) alapján tudjuk eldönteni, hogy
	közülük melyiket válasszuk:</para>

      <itemizedlist>
	<listitem>
	  <para>A legújabb nVidia kártyákat az
	    <package>x11/nvidia-driver</package> port
	    támogatja.</para>
	</listitem>
	<listitem>
	  <para>A GeForce 2MX/3/4 sorozatú nVidia
	    kártyákat a meghajtó
	    96<replaceable>XX</replaceable> sorozata támogatja,
	    amely a <package>x11/nvidia-driver-96xx</package> porton
	    keresztül érhetõ el.</para>
	</listitem>
	<listitem>
	  <para>Az ezeknél is régebbi
	    kártyákat, mint például a
	    GeForce vagy RIVA&nbsp;TNT típusokat, a
	    meghajtó 71XX sorozata támogatja, és
	    <package>x11/nvidia-driver-71xx</package>
	    porton keresztül telepíthetjük.</para>
	</listitem>
      </itemizedlist>

      <para>Az nVidia honlapján megtalálhatjuk, hogy az
	egyes meghajtók pontosan milyen kártyákat
	is támogatnak: <uri xlink:href="http://www.nvidia.com/object/IO_32667.html">http://www.nvidia.com/object/IO_32667.html</uri>.</para>

    </sect2>

    <sect2 xml:id="install-driver">
      <title>Az nVidia meghajtó telepítése</title>

      <para>Miután kiválasztottuk a kártyánk
	számára megfelelõ meghajtót,
	onnantól a telepítés ugyanolyan
	egyszerû, mint akármelyik port
	esetében.</para>

      <note>
	<para>Mielõtt azonban bármit is
	  telepítenénk a portok közül, ne
	  felejtsük el valamilyen módszerrel
	  frissíteni a portfát (például a
	  <application>csup</application>,
	  <application>CVSup</application> vagy a
	  <application>portsnap</application>
	  használatával).  A grafikus meghajtók
	  és az asztali effektek ugyanis gyorsan fejlõdnek,
	  ezért gyakran frissítik a hozzájuk
	  tartozó portokat.</para>
      </note>

      <para>Például így tudjuk telepíteni a
	meghajtó legújabb változatát:</para>

      <screen>&prompt.root; <userinput>cd /usr/ports/x11/nvidia-driver</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

      <para>A meghajtó telepítése során
	létrejön egy modul a rendszermaghoz, amelyet a
	rendszer indításakor kell betöltenünk.
	Ehhez mindössze a következõ sort kell
	elhelyeznünk az <filename>/boot/loader.conf</filename>
	állományban:</para>

      <programlisting>nvidia_load="YES"</programlisting>

      <note>
	<para>Megpróbálkozhatunk azzal is, hogy a
	  <command>kldload nvidia</command> parancs
	  kiadásával a modult közvetlenül a port
	  telepítése után betöltjük a
	  futó rendszermagba, azonban az
	  <application>&xorg;</application> legfrissebb
	  változatai esetén gondot okozhat, ha a
	  meghajtót nem a rendszerindítás
	  során töltjük be.  Ezért a
	  <filename>/boot/loader.conf</filename>
	  módosítása után
	  mindenképpen javasoljuk a rendszer
	  újraindítását.</para>
      </note>

      <para>A modul sikeres betöltését
	követõen az <filename>xorg.conf</filename>
	állományban mindössze egyetlen sor
	átírásával engedélyezni
	tudjuk a zárt forráskódú
	meghajtó használatát.</para>

      <para>Keressük meg az alábbi sort az
	<filename>/etc/X11/xorg.conf</filename>
	állományban:</para>

      <programlisting>Driver      "nv"</programlisting>

      <para>és változtassuk meg erre:</para>

      <programlisting>Driver      "nvidia"</programlisting>

      <para>Indítsuk el a megszokott módon a grafikus
	felületet és ekkor megjelenik az nVidia
	logója.  Innentõl minden a megszokottak szerint
	mûködik.  Ilyenkor azonban még csak annyit
	állítottunk be, hogy az
	<application>&xorg;</application> használja az nVidia
	meghajtóját, és a
	háromdimenziós asztali effektusok tényleges
	megjelenítéséhez további
	beállításokat is el kell
	végeznünk.  Ezekrõl a következõ
	szakaszokban lesz szó.</para>

      <note>
	<para>Habár nem feltétlenül
	  szükségesek, az <package>x11/nvidia-xconfig</package> és
	  <package>x11/nvidia-settings</package> portok
	  telepítését is ajánljuk.  Ez
	  elõbbivel parancssorból tudjuk elvégezni az
	  <filename>/etc/X11/xorg.conf</filename>
	  állományhoz tartozó
	  módosításokat, illetve az
	  utóbbival a mûködõ
	  <application>&xorg;</application> rendszerünkön
	  belül tudjuk módosítani a
	  képernyõ beállításait.</para>
      </note>

    </sect2>
  </sect1>

  <sect1 xml:id="xorg-configuration">
    <title>Az asztali effektek beállítása az
      <filename>xorg.conf</filename> állományban</title>

    <para>A következõ apró
      módosításokat kell még
      elvégeznünk az <filename>/etc/X11/xorg.conf</filename>
      állományban, mielõtt telepítenénk
      és elindítanánk a
      <application>Compiz&nbsp;Fusion</application>
      ablakkezelõjét.</para>

    <para>Hozzunk létre egy szakaszt az összetett effektek
      engedélyezéséhez:</para>

    <programlisting>Section "Extensions"
Option         "Composite" "Enable"
EndSection</programlisting>

    <para>Keressük meg a <quote>Screen</quote> szakaszt, amely
      nagyjából így néz ki:</para>

    <programlisting>Section "Screen"
Identifier     "Screen0"
Device         "Card0"
Monitor        "Monitor0"
...</programlisting>

    <para>Egészítsük ki ezzel a két sorral
      (például a <quote>Monitor</quote>
      beállítás után):</para>

    <programlisting>DefaultDepth    24
    Option         "AddARGBGLXVisuals" "True"</programlisting>

    <para>Keressük meg azt a <quote>Subsection</quote>
      részt, amely a használni kívánt
      képernyõfelbontásokat tartalmazza.
      Például 1280x1024 esetén az alábbi
      szakaszra lesz szükségnünk.  Ha a megfelelõ
      felbontást nem találnánk meg, akkor azt
      akár manuálisan is pótolni tudjuk:</para>

    <programlisting>SubSection     "Display"
Viewport    0 0
Modes      "1280x1024"
EndSubSection</programlisting>

    <para>A 24&nbsp;bites színmélység fog kelleni
      az asztalok kompozíciójához, ezért a
      fenti beállításokat így kell
      átírnunk:</para>

    <programlisting>SubSection     "Display"
Viewport    0 0
Depth       24
Modes      "1280x1024"
EndSubSection</programlisting>

    <para>Végezetül ellenõrizzük a
      <quote>glx</quote> és az <quote>extmod</quote> modulok
      betöltését a <quote>Module</quote>
      szakaszban:</para>

    <programlisting>Section "Module"
Load           "extmod"
Load           "glx"
...</programlisting>

     <note>
	<para>Ha telepítettük a korábban
	  ajánlott <package>x11/nvidia-xconfig</package> portot, akkor a
	  fenti beállítások közül a
	  legtöbbet (<systemitem class="username">root</systemitem>
	  felhasználóként) így is el tudjuk
	  végezni:</para>

	<screen>&prompt.root; <userinput>nvidia-xconfig --add-argb-glx-visuals</userinput>
&prompt.root; <userinput>nvidia-xconfig --composite</userinput>
&prompt.root; <userinput>nvidia-xconfig --depth=24</userinput></screen>

	<para>Az <command>nvidia-xconfig -A | more</command> parancs
	  kiadásával a program által
	  felkínált további
	  lehetõségeket is
	  lekérdezhetjük.</para>
      </note>

  </sect1>

  <sect1 xml:id="compiz-fusion">
    <title>A Compiz&nbsp;Fusion telepítése és
      beállítása</title>

    <para>A <application>Compiz&nbsp;Fusion</application> a legtöbb
      porthoz hasonlóan pillanatok alatt
      telepíthetõ:</para>

    <screen>&prompt.root; <userinput>cd /usr/ports/x11-wm/compiz-fusion</userinput>
&prompt.root; <userinput>make install clean</userinput></screen>

    <para>A felbukkanó párbeszédablakban
      mindenképpen válasszuk ki az <quote>EXTRA</quote>
      bõvítmények és az <quote>EMERALD</quote>
      ablakdekorátor telepítését.
      Amennyiben <application>GNOME</application>-ot használunk
      vagy már eleve van a rendszerünkben
      <command>gconf</command> támogatás, érdemes
      megfontolnunk a <quote>gconf support</quote>
      kiválasztását is.  Ennek
      köszönhetõen az effektek
      beállításai beágyazódnak az
      asztalhoz tartozó többi beállítás
      közé és megnézhetõek a
      <command>gconf-editor</command> használatával.  Ha
      nincs szükségünk erre, akkor a
      <application>Compiz&nbsp;Fusion</application> természetesen
      egyszerû állományokba is <emphasis>el
      tudja</emphasis> menteni a beállításait.
      Ilyenkor a felhasználói könyvtárunkban
      létrejön egy <filename>.compizconfig</filename>
      könyvtár.</para>

    <para>A telepítés befejeztével indítsuk
      el a grafikus felületet és (normál
      felhasználóként) adjuk ki egy
      terminálban a következõ parancsot:</para>

    <screen>&prompt.user; <userinput>compiz --replace --sm-disable --ignore-desktop-hints ccp &amp;</userinput>
&prompt.user; <userinput>emerald --replace &amp;</userinput></screen>

    <para>Ezt követõen a képernyõ
      néhány pillanatig vibrálni fog, ahogy az
      ablakkezelõnk (például a
      <application>GNOME</application> esetén a
      <application>Metacity</application>) lecserélõdik a
      <application>Compiz&nbsp;Fusion</application>-re.  Ekkor az
      <application>Emerald</application> veszi át az ablakok
      díszítésének szerepét
      (tehát a bezárás, a tálcára
      rakás, teljes képernyõs mód, az ablakok
      feliratának stb.  kezelését).</para>

    <para>Az iménti parancsból akár egy apró
      szkriptet is készíthetünk, amelyet aztán
      automatikusan le tudunk futtatni (például
      úgy, ha felvesszük a <application>GNOME</application>
      alapú munkakörnyezetünk <quote>Sessions</quote>
      részébe):</para>

    <programlisting>#! /bin/sh
compiz --replace --sm-disable --ignore-desktop-hints ccp &amp;
emerald --replace &amp;</programlisting>

    <para>Mentsük a felhasználói
      könyvtárunkba például
      <filename>start-compiz</filename> néven és
      tegyük futtathatóvá:</para>

    <screen>&prompt.user; <userinput>chmod +x ~/start-compiz</userinput></screen>

    <para>Ezután a grafikus felületen a
      <application>GNOME</application> asztalon vegyük fel a
      <guimenuitem>Startup Programs</guimenuitem> menühöz
      (<guimenuitem>System</guimenuitem>,
      <guimenuitem>Preferences</guimenuitem>,
      <guimenuitem>Sessions</guimenuitem>).</para>

    <para>A megfelelõ effektek kiválasztásához
      és azok beállításához
      (ismét normál felhasználóként)
      indítsuk el a
      <application>Compiz&nbsp;Config&nbsp;Settings&nbsp;Manager</application>
      alkalmazást:</para>

    <screen>&prompt.user; <userinput>ccsm</userinput></screen>

    <note>
      <para>A <application>GNOME</application> munkakörnyezeten
	belül ugyanez a <guimenuitem>System</guimenuitem>,
	<guimenuitem>Preferences</guimenuitem> menübõl is
	elérhetõ.</para>
    </note>

    <para>Ha a fordítás elõtt a <quote>gconf
      support</quote> opciót is kiválasztottuk, akkor
      ezeket a beállításokat a
      <command>gconf-editor</command> programban az
      <literal>apps/compiz</literal> kategóriában is meg
      tudjuk tekinteni.</para>

  </sect1>

  <sect1 xml:id="compiz-troubleshooting">
    <title>A Compiz&nbsp;Fusion használatával kapcsolatos
      gondok megoldása</title>

    <para>Ebben a szakaszban a
	<application>Compiz&nbsp;Fusion</application> használata
	során felmerülõ gyakran ismételt
	kérdéseket és válaszokat
	tekintjük át.</para>

      <qandaset>
	<qandaentry>
	  <question xml:id="no-decorations">
	    <para>A <application>Compiz&nbsp;Fusion</application>
	      telepítése és a megadott parancsok
	      futtatása után eltûnt a keret az
	      ablakokról.  Mi lehet a gond?</para>
	  </question>

	  <answer>
	    <para>Valószínûleg kihagytuk valamelyik
	      beállítást az
	      <filename>/etc/X11/xorg.conf</filename>
	      állományból.  Figyelmesen olvassuk
	      át újra az állományt,
	      különösen a <literal>DefaultDepth</literal>
	      és <literal>AddARGBGLXVisuals</literal>
	      beállításokat.</para>
	  </answer>
	</qandaentry>

	<qandaentry>
	  <question xml:id="xorg-crash">
	    <para>A <application>Compiz&nbsp;Fusion</application>
	      indításakor az X szerver összeomlik
	      és visszajön a konzolt.  Mi lehet a
	      gond?</para>
	  </question>

	  <answer>
	    <para>Ha megnézzük az
	      <filename>/var/log/Xorg.0.log</filename>
	      állományt, akkor abban találunk
	      valószínûleg valamilyen
	      hibaüzenetet, amit az X indítása
	      során kaptunk.  Ez általában a
	      következõ szokott lenni:</para>

	    <screen>(EE) NVIDIA(0): Failed to initialize the GLX module; please check in your X
(EE) NVIDIA(0):     log file that the GLX module has been loaded in your X
(EE) NVIDIA(0):     server, and that the module is the NVIDIA GLX module.  If
(EE) NVIDIA(0):     you continue to encounter problems, Please try
(EE) NVIDIA(0):     reinstalling the NVIDIA driver.</screen>

	    <para>Ez többnyire olyankor következik be, amikor
	      frissítjük az
	      <application>&xorg;</application> szervert.
	      Telepítsük újra az <package>x11/nvidia-driver</package> portot,
	      így a glx is illeszkedni fog hozzá.</para>
	  </answer>
	</qandaentry>
      </qandaset>

  </sect1>
</article>
