<?xml version="1.0" encoding="iso-8859-2"?>
<!--
     The FreeBSD Documentation Project

     $FreeBSD$
-->
<!-- The FreeBSD Hungarian Documentation Project
     Translated by: PALI, Gabor <pgj@FreeBSD.org>
     %SOURCE%	en_US.ISO8859-1/books/handbook/multimedia/chapter.xml
     %SRCID%	1.137
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="multimedia" xml:lang="hu">
  <info><title>Multimédia</title>
    <authorgroup>
      <author><personname><firstname>Ross</firstname><surname>Lippert</surname></personname><contrib>Szerkesztette: </contrib></author>
    </authorgroup>
  </info>

  

  <sect1 xml:id="multimedia-synopsis">
    <title>Áttekintés</title>

    <para>A &os; a hangkártyák széles
      választékát ismeri, ami által
      képesek vagyunk
      számítógépünkkel hi-fi
      minõségû hangzást létrehozni.
      Ennek részeként rögzíteni és
      visszajátszani tudunk többek közt MPEG Audio
      Layer 3 (MP3), WAV és Ogg Vorbis formátumokban.  A
      &os; Portgyûjteménye ezenkívül tartalmaz
      még olyan alkalmazásokat is, amelyekkel szerkeszteni
      lehet a felvett hangokat, effekteket hozzátenni és
      vezérelni a hangkártyánkhoz csatlakoztatott
      MIDI eszközöket.</para>

    <para>Némi kísérletezéssel a &os;
      még videoállományok és DVD-k
      lejátszására is rávehetõ.  A
      különféle videoanyagok
      kódolására,
      konvertálására és
      visszajátszására alkalmas programok
      száma azonban jóval kisebb, mint a hanganyagok
      esetén.  Például az írás
      pillanatában nincs a &os;
      Portgyûjteményében a formátumok
      közti konvertálásra alkalmas, a videókat
      olyan jól újrakódolni tudó
      alkalmazás, amilyen az audio esetén az <package>audio/sox</package>.  Azonban ezen a
      területen a szoftverek palettája gyorsan
      változik.</para>

    <para>Ebben a fejezetben bemutatjuk a hangkártyánk
      beállításához szükséges
      lépéseket.  Az X11 telepítése
      és beállítása (<xref linkend="x11"/>)
      során ugyan már foglalkoztunk a
      videokártyánkkal kapcsolatos hardveres
      problémákkal, azonban a jobb
      visszajátszás érdekében további
      cselfogásokat is be kell majd vetnünk.</para>

    <para>A fejezet elolvasása során
      megismerjük:</para>

    <itemizedlist>
      <listitem>
	<para>hogyan állítsuk be úgy a
	  rendszerünket, hogy felismerje a
	  hangkártyánkat;</para>
      </listitem>

      <listitem>
	<para>hogyan bizonyosodjuk meg róla, hogy a
	  kártyánk valóban
	  mûködik;</para>
      </listitem>

      <listitem>
	<para>hogyan oldjuk meg a hangkártya
	  beállítása során
	  felmerülõ problémákat;</para>
      </listitem>

      <listitem>
	<para>hogyan játsszunk le és kódoljunk
	  MP3-at vagy más egyéb
	  hangformátumot;</para>
      </listitem>

      <listitem>
	<para>hogyan támogatja a videokat az X szerver;</para>
      </listitem>

      <listitem>
	<para>hogyan adnak az egyes lejátszók és
	  kódolók még jobb eredményt</para>
      </listitem>

      <listitem>
	<para>hogyan játsszunk le DVD-ket,
	  <filename>.mpg</filename> és <filename>.avi</filename>
	  állományokat;</para>
      </listitem>

      <listitem>
	<para>hogyan mentsük a CD-k és DVD-k
	  tartalmát állományokba;</para>
      </listitem>

      <listitem>
	<para>hogyan állítsuk be a TV
	  kártyánkat</para>
      </listitem>

      <listitem>
	<para>hogyan állítsunk be egy scannert.</para>
      </listitem>
    </itemizedlist>

    <para>A fejezet elolvasásához ajánlott:</para>

    <itemizedlist>
      <listitem>
	<para>egy új rendszermag
	  beállításának és
	  telepítésének ismerete (<xref linkend="kernelconfig"/>).</para>
      </listitem>
    </itemizedlist>

    <warning>
      <para>Ha zenei CD-ket próbálunk meg a &man.mount.8;
	paranccsal csatlakoztatni, akkor az hibával, vagy a
	legrosszabb esetben akár <emphasis>teljes
	rendszerösszeomlással</emphasis> is járhat.
	Az ilyen típusú lemezek az ISO
	szabványú
	állományrendszerekétõl
	eltérõ kódolással rendelkeznek.</para>
    </warning>

  </sect1>

  <sect1 xml:id="sound-setup">
    <info><title>A hangkártya beállítása</title>
      <authorgroup>
        <author><personname><firstname>Moses</firstname><surname>Moore</surname></personname><contrib>Írta: </contrib></author>
      </authorgroup>
      <authorgroup>
        <author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname><contrib>A &os;&nbsp;5.X verziójához
	  igazította: </contrib></author>
      </authorgroup>
    </info>

    

    <sect2 xml:id="sound-device">
      <title>A rendszer beállítása</title>

      <indexterm><primary>PCI</primary></indexterm>
      <indexterm><primary>ISA</primary></indexterm>
      <indexterm><primary>hangkártya</primary></indexterm>

      <para>A mûvelet megkezdése elõtt ki kell
	derítenünk, milyen típusú
	hangkártyánk van, milyen chip van rajta, PCI vagy
	ISA buszon csatlakozik-e.  A &os; rengeteg PCI és ISA
	buszos kártyát ismer egyaránt.  A
	sajátunk beazonosításához a
	támogatott hangeszközök listáját
	a <link xlink:href="&rel.current.hardware;">Hardware Notes</link>
	(Hardverjegyzék) oldalán találhatjuk meg.
	Ebbõl a jegyzékbõl mellesleg azt is
	megtudhatjuk, hogy melyik meghajtó kezeli a
	kártyánkat.</para>

      <indexterm>
	<primary>rendszermag</primary>
	<secondary>beállítás</secondary>
      </indexterm>

      <para>A hangeszközünk használatához be
	kell töltenünk a neki megfelelõ meghajtót.
	Ez két módon is megtehetõ.  Ezek
	közül az a legkönnyebb, ha a &man.kldload.8;
	paranccsal egyszerûen betöltjük a rendszermag
	hangkártyánkhoz tartozó modulját.
	Ezt megtehetjük közvetlenül
	parancssorból:</para>

      <screen>&prompt.root; <userinput>kldload snd_emu10k1</userinput></screen>

      <para>vagy a <filename>/boot/loader.conf</filename>
	állományból az alábbihoz
	hasonló sor hozzáadásával:</para>

      <programlisting>snd_emu10k1_load="YES"</programlisting>

      <para>A fenti példák a Creative &soundblaster; Live!
	hangkártyára vonatkoznak.  A többi
	betölthetõ hangkártya-modul felsorolása
	a <filename>/boot/defaults/loader.conf</filename>
	állományban található.  Ha nem
	vagyunk benne biztosak, hogy melyik meghajtót is akarjuk
	pontosan használni, akkor próbálkozzunk az
	<filename>snd_driver</filename> modul
	betöltésével:</para>

      <screen>&prompt.root; <userinput>kldload snd_driver</userinput></screen>

      <para>Ez egy olyan metameghajtó, ami egyszerre betölti
	az összes érintett eszközmeghajtót,
	és segítségével
	felgyorsíthatjuk a megfelelõ meghajtó
	megtalálását.  A
	<filename>/boot/loader.conf</filename>
	használatával is be tudjuk ugyanígy
	tölteni az összes meghajtót.</para>

      <para>Az <filename>snd_driver</filename> metameghajtó
	betöltése után úgy kereshetjük
	meg a ténylegesen használatban levõ
	meghajtót, ha megnézzük a
	<filename>/dev/sndstat</filename> állományt a
	<command>cat /dev/sndstat</command> paranccsal.</para>

      <para>A második módszer szerint a
	hangkártyánk támogatását
	statikusan beépítjük a rendszermagba.  A
	lentebb található szakaszban olvashatjuk mindazok
	az információkat, amelyekre
	szükségünk lehet ennek elvégzése
	közben.  A rendszermag
	újrafordításával kapcsolatban
	forduljunk a <xref linkend="kernelconfig"/>hez.</para>

      <sect3>
	<title>A hangkártya támogatásával
	  rendelkezõ saját rendszermag
	  összeállítása</title>

	<para>Elsõként hozzá kell adnunk a
	  rendszermaghoz a hangeszközök
	  alapmeghajtóját, a &man.sound.4; eszközt.
	  Ezt a rendszermag beállításait
	  tartalmazó állományban az alábbi
	  sor felvételével tehetjük meg:</para>

	<programlisting>device sound</programlisting>

	<para>Ezután tegyük még hozzá a
	  hangkártyánkhoz kapcsolódó
	  támogatást is.  Ehhez viszont pontosan tudunk
	  kell, melyik meghajtó képes mûködtetni
	  a kártyát.  A hangkártyához
	  tartozó meghajtót a <link xlink:href="&rel.current.hardware;">Hardware Notes</link>
	  (Hardverjegyzék)-ben található
	  eszközök listájából
	  deríthetjük ki.  Például a Creative
	  &soundblaster; Live!  hangkártyát a
	  &man.snd.emu10k1.4; meghajtó kezeli.  Ennek a
	  hangkártyának a támogatását
	  az alábbi sorral állíthatjuk be:</para>

	<programlisting>device snd_emu10k1</programlisting>

	<para>Az itt használatos formátumot a
	  meghajtó man oldalának
	  átolvasásából tudhatjuk meg.
	  Azonban az összes támogatott hangkártya
	  meghajtó megadásának pontos
	  formátuma megtalálható a
	  <filename>/usr/src/sys/conf/NOTES</filename>
	  állományban is.</para>

	<para>A PnP (Plug n Play)-t nem ismerõ ISA
	  kártyák esetén az összes többi
	  nem PnP-s ISA kártyához hasonlóan
	  szükséges lehet a rendszermag
	  számára megadnunk a kártya hardveres
	  beállításait (IRQ, I/O port stb).  Ezt a
	  <filename>/boot/device.hints</filename>
	  állományon keresztül tehetjük meg.  A
	  rendszerindítási folyamat során a
	  &man.loader.8; beolvassa ezt az állományt, majd
	  átadja a benne szereplõ
	  információkat a rendszermagnak.
	  Például a Creative &soundblaster; 16, nem PnP-s
	  ISA kártya az <literal>snd_sb16</literal>
	  meghajtóval együtt az &man.snd.sbc.4;
	  meghajtót használja.  A kártya
	  használatához a rendszermag
	  beállításait tartalmazó
	  állományba ezeket a sorokat kell megadni:</para>

	<programlisting>device snd_sbc
device snd_sb16</programlisting>

	<para>valamint a <filename>/boot/device.hints</filename>
	  állományba ezeket:</para>

	<programlisting>hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</programlisting>

	<para>Ekkor a kártya a <literal>0x220</literal> I/O
	  portot és <literal>5</literal> IRQ-t
	  használja.</para>

	<para>A <filename>/boot/device.hints</filename>
	  állományban alkalmazott felírási
	  módról bõvebben a &man.sound.4;, valamint a
	  kérdéses meghajtó man oldalán
	  tájékozódhatunk.</para>

	<para>A fentiekben bemutatott beállítások
	  alapértelmezettek, néhány esetben azonban
	  a kártyánknak megfelelõen meg kell
	  változtatnunk az IRQ és egyéb
	  értékeket.  Errõl a
	  kártyáról konkrétan a
	  &man.snd.sbc.4; man oldalon olvashatunk
	  részletesebben.</para>

      </sect3>
    </sect2>

    <sect2 xml:id="sound-testing">
      <title>A hangkártya
	kipróbálása</title>

      <para>Miután újraindítottuk a
	számítógépünket a
	módosított rendszermaggal, vagy miután
	betöltöttük a szükséges modult, a
	hangkártyának valahogy így kell megjelennie
	a rendszerünk üzenetpufferében
	(&man.dmesg.8;):</para>

      <screen>pcm0: &lt;Intel ICH3 (82801CA)&gt; port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: &lt;Cirrus Logic CS4205 AC97 Codec&gt;</screen>

      <para>A hangkártyánk állapota a
	<filename>/dev/sndstat</filename> állományon
	keresztül ellenõrizhetõ:</para>

      <screen>&prompt.root; <userinput>cat /dev/sndstat</userinput>
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: &lt;Intel ICH3 (82801CA)&gt; at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)</screen>

      <para>Ez a kiírás rendszerenként
	eltérhet.  Ha nem látunk semmilyen
	<filename>pcm0</filename> eszközt, akkor menjünk
	vissza és nézzük át újra,
	pontosan mit is csináltunk.  Vizsgáljuk át
	a rendszermagunk beállításait
	tartalmazó állományt és
	gyõzõdjünk meg róla, hogy a megfelelõ
	meghajtót adtuk meg.  Az itt felmerülõ gyakori
	gondokkal a <xref linkend="troubleshooting"/> foglalkozik.</para>

      <para>Ha azonban minden remekül haladt, akkor most már
	van egy mûködõ hangkártyánk.  Ha
	rendesen összekapcsoltuk hangkártyánkat a CD-
	vagy DVD-meghajtónk audio csatlakozásával,
	akkor tegyünk egy CD-t a meghajtóba és
	kezdjük el játszani a &man.cdcontrol.1;
	paranccsal:</para>

      <screen>&prompt.user; <userinput>cdcontrol -f /dev/acd0 play 1</userinput></screen>

      <para>Az olyan alkalmazások, mint például az
	<package>audio/workman</package>, ehhez egy
	sokkal barátságosabb felületet
	nyújtanak.  Az MP3 formátumú
	állományok meghallgatásához pedig
	minden bizonnyal jól fog jönni egy olyan
	alkalmazás is, mint például az <package>audio/mpg123</package>.</para>

      <para>A kártyát úgy is tesztelhetjük, ha
	az alábbihoz hasonló módon adatokat
	küldünk a <filename>/dev/dsp</filename>
	állományba:</para>

      <screen>&prompt.user; <userinput>cat állománynév &gt; /dev/dsp</userinput></screen>

      <para>ahol az
	<replaceable>állománynév</replaceable>
	tetszõleges állomány neve lehet.  A parancs
	hatására valamilyen zajt kell hallanunk, és
	ez egyben meg is erõsíti, hogy a
	hangkártyánk mûködik.</para>

      <para>A hangkártyánk csatornáinak
	jellemzõit a &man.mixer.8; paranccsal
	állíthatjuk.  Errõl további
	részleteket a &man.mixer.8; man oldalon
	olvashatunk.</para>

      <sect3 xml:id="troubleshooting">
	<title>Gyakori problémák</title>

	<indexterm><primary>eszközleíró</primary></indexterm>
	<indexterm><primary>I/O port</primary></indexterm>
	<indexterm><primary>IRQ</primary></indexterm>
	<indexterm><primary>DSP</primary></indexterm>

	<informaltable frame="none" pgwide="1">
	  <tgroup cols="2">
	    <thead>
	    <row>
	      <entry>Hiba</entry>
	      <entry>Megoldás</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><errorname>sb_dspwr(XX) timed out</errorname></entry>
	      <entry>Nem állítottuk be jól az I/O
		portot.</entry>
	    </row>

	    <row>
	      <entry><errorname>bad irq XX</errorname></entry>
	      <entry>Nem állítottuk be jól az IRQ
		értékét.  Gondoskodjunk
		róla, hogy a beállított
		érték megegyezik a
		hangkártyánkéval.</entry>
	    </row>

	    <row>
	      <entry><errorname>xxx: gus pcm not attached, out of
		memory</errorname></entry>
	      <entry>Nincs elég memória az eszköz
		használatához.</entry>
	    </row>

	    <row>
	      <entry><errorname>xxx: can't open /dev/dsp!</errorname></entry>
	      <entry>A <command>fstat | grep dsp</command> parancs
		kiadásával ellenõrizzük, hogy
		valamelyik alkalmazás használja-e
		már az eszközt.  Gyakori bajkeverõ az
		<application>esound</application> és a
		<application>KDE</application>
		hangtámogatása.</entry>
	    </row>
	  </tbody>
	</tgroup>
	</informaltable>

      </sect3>
    </sect2>

    <sect2 xml:id="sound-multiple-sources">
      <info><title>Több hangforrás
	kihasználása</title>
	<authorgroup>
	  <author><personname><firstname>Munish</firstname><surname>Chopra</surname></personname><contrib>Írta: </contrib></author>
	</authorgroup>
      </info>

      

      <para>Gyakran szükségünk lehet több
	hangforrás egyidejû használatára,
	fõleg olyankor, amikor az <application>esound</application>
	vagy az <application>artsd</application> bizonyos
	alkalmazásokkal nem hajlandó megosztani a
	hangeszközt.</para>

      <para>A &os; ezt a <emphasis>virtuális
	hangcsatornák</emphasis> használatával
	oldja meg, amit a &man.sysctl.8; eszközön
	keresztül tudunk engedélyezni.  Amikor a
	rendszermagban virtuális csatornák
	használatával keverünk, akkor
	lényegében képesek vagyunk a
	hangkártyánk által egyszerre
	játszható hangok számát
	megtöbbszörözni.</para>

      <para>A virtuális csatornák számának
	beállításához a sysctl három
	változóját kell módosítanunk,
	amelyet <systemitem class="username">root</systemitem>
	felhasználóként így tehetünk
	meg:</para>

      <screen>&prompt.root; <userinput>sysctl dev.pcm.0.play.vchans=4</userinput>
&prompt.root; <userinput>sysctl dev.pcm.0.rec.vchans=4</userinput>
&prompt.root; <userinput>sysctl hw.snd.maxautovchans=4</userinput></screen>

      <para>A fenti példa négy virtuális
	csatornát hoz létre, ami egészen
	jellemzõ a mindennapi használatban.  A
	<varname>dev.pcm.0.play.vchans</varname> és
	<varname>dev.pcm.0.rec.vchans</varname> a
	<filename>pcm0</filename> eszköz
	lejátszásra és felvételre
	használt virtuális csatornáinak
	számát adja meg, amelyet az eszköz
	csatlakoztatása után tudunk
	beállítani.  A
	<varname>hw.snd.maxautovchans</varname> az új
	eszközhöz tartozó virtuális
	csatornákat adja meg, ami akkor
	állítódik be, amikor a &man.kldload.8;
	paranccsal csatlakoztatjuk.  Mivel a
	<filename>pcm</filename> modul a többi
	eszközmeghajtótól függetlenül
	töltõdik be, ezért a
	<varname>hw.snd.maxautovchans</varname> azt tárolja, hogy
	a késõbb hozzá csatlakozó
	eszközök mennyi virtuális csatornát
	fognak majd kapni.  Errõl részletesebben a
	&man.pcm.4; man oldalon olvashatunk.</para>

      <note>
	<para>A használatban levõ
	  eszközöknél nem tudjuk megváltoztatni a
	  virtuális csatornák számát.  Ehhez
	  elõször le kell állítanunk az
	  eszközt használó összes programot,
	  tehát a zenelejátszókat és
	  hangdémonokat.</para>
      </note>

      <para>Amennyiben nem használjuk ki a &man.devfs.5;
	által nyújtott lehetõségeket, az
	összes alkalmazásnak a
	<filename>/dev/dsp0.x</filename>
	eszközre kell mutatnia, ahol az
	<replaceable>x</replaceable> értéke 0-tól
	3-ig terjedhet attól függõen, hogy a
	<varname>dev.pcm.0.rec.vchans</varname>
	értékét a fenti példához
	hasonlóan 4-re állítottuk-e.  A
	&man.devfs.5; megoldását használó
	rendszerek esetén ez a folyamat automatikusan lezajlik,
	tehát az összes <filename>/dev/dsp</filename>
	eszközre irányuló kérés
	magától
	átirányítódik.</para>

    </sect2>

    <sect2>
      <info><title>A keverõ alapértelmezett
	értékeinek beállítása</title>
	<authorgroup>
	  <author><personname><firstname>Josef</firstname><surname>El-Rayes</surname></personname><contrib>Írta: </contrib></author>
	</authorgroup>
      </info>

      

      <para>A keverõben megjelenõ
	különbözõ csatornák
	alapértékei a &man.pcm.4; meghajtó
	forráskódjában huzalozottan
	találhatóak meg.  Számos alkalmazás
	és démon segít két
	hívás közt megõrizni a keverõben
	beállított értékeket, azonban ez nem
	teljesen tiszta megoldás.  A meghajtó
	szintjén is be tudjuk állítani a
	keverõ alapértékeit &mdash; ezt a
	<filename>/boot/device.hints</filename> állomány
	megfelelõ módosításával
	érhetjük el, például:</para>

      <programlisting>hint.pcm.0.vol="50"</programlisting>

      <para>Ezzel a &man.pcm.4; modul betöltése során
	a hangerõ (volume) csatorna alapértelmezett
	értéket 50-re állítjuk.</para>

    </sect2>
  </sect1>

  <sect1 xml:id="sound-mp3">
    <info><title>MP3</title>
      <authorgroup>
	<author><personname><firstname>Chern</firstname><surname>Lee</surname></personname><contrib>Írta: </contrib></author>
      </authorgroup>
    </info>

    

    <para>Az MP3 (MPEG Layer 3 Audio) használatával
      közel CD minõségû hangot lehet
      elérni, ezért a mi &os;
      munkaállomásunk sem maradhat ki elõnyeinek
      élvezetébõl.</para>

    <sect2 xml:id="mp3-players">
      <title>MP3 lejátszók</title>

      <para>Az <application>XMMS</application> (X Multimedia System)
	kiemelkedõen a legnépszerûbb X11-es MP3
	lejátszó.  Mivel az
	<application>XMMS</application> grafikus
	felhasználói felülete szinte teljesen
	megegyezik a Nullsoft
	<application>Winamp</application>jának
	felületével, ezért még a
	<application>Winamp</application> skinjeit is
	használhatjuk vele.  Az
	<application>XMMS</application>-ben ezenkívül
	még a natív pluginek
	támogatását is
	megtalálhatjuk.</para>

      <para>Az <application>XMMS</application> a <package>multimedia/xmms</package> portból vagy
	csomagból telepíthetõ.</para>

      <para>Az <application>XMMS</application>
	használatára könnyû
	ráérezni: megtaláljuk benne a
	lejátszandó számok listáját,
	egy grafikus hangszínszabályzót és
	még sok minden mást.  Akik már ismerik a
	<application>Winamp</application>
	mûködését, azok az
	<application>XMMS</application>-t is egyszerûnek
	érzik majd.</para>

      <para>Mellette az <package>audio/mpg123</package>
	port egy másik, parancssoros MP3 lejátszót
	kínál fel.</para>

      <para>Az <application>mpg123</application>
	futtatásához paraméterként meg kell
	adnunk a hangeszközt és lejátszandó
	MP3 állományt.  Ha a hangeszközünk a
	<filename>/dev/dsp1.0</filename> és a
	<replaceable>IzéMizé-Sláger.mp3</replaceable>
	nevû MP3 állományt akarjuk rajta
	lejátszatni, akkor a következõt kell
	begépelnünk:</para>

      <screen>&prompt.root; <userinput>mpg123 -a /dev/dsp1.0 IzéMizé-Sláger.mp3</userinput>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!





Playing MPEG stream from <replaceable>IzéMizé-Sláger.mp3</replaceable> ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo
</screen>
    </sect2>

    <sect2 xml:id="rip-cd">
      <title>Sávok lementése CD-rõl</title>

      <para>Mielõtt MP3 formátumba
	tömörítenénk egy CD-t vagy annak egy
	sávját, a CD-n található audio
	adatot valahogy le kell tudnunk szedni a merevlemezre.  Ezt
	úgy tehetjük meg, ha a nyers CDDA (CD Digital Audio)
	adatot WAV formátumú állományokba
	mentjük.</para>

      <para>A <package>sysutils/cdrtools</package>
	csomag részeként elérhetõ
	<command>cdda2wav</command> segédprogrammal tudjuk a
	CD-ken levõ audio és a hozzájuk
	tartozó egyéb információkat
	leszedni.</para>

      <para>A meghajtóban levõ CD teljes tartalmát
	(<systemitem class="username">root</systemitem> felhasználóként)
	a következõ parancs kiadásával lehet
	(sávonként) különálló WAV
	állományokba menteni:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D 0,1,0 -B</userinput></screen>

      <para>A <application>cdda2wav</application> ismeri az ATAPI (IDE)
	CD-meghajtókat, használatukhoz a SCSI
	egység sorszáma helyett az eszköz
	nevét kell megadni.  Tehát például
	így szedjük le egy IDE-meghajtóról a
	7.  sávot:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D /dev/acd0 -t 7</userinput></screen>

      <para>A <option>-D <replaceable>0,1,0</replaceable></option> a
	<filename>0,1,0</filename> sorszámú SCSI
	eszközre utal, ami megfelel <command>cdrecord
	-scanbus</command> parancs eredményének.</para>

      <para>Az egyes sávok lementéséhez a
	<option>-t</option> kapcsoló
	használható:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D 0,1,0 -t 7</userinput></screen>

      <para>A példa szerint a zenei CD-rõl a hetedik
	sávot szedjük le.  Egyszerre több sávot,
	például az elsõtõl a hetedikig, egy
	tartomány megadásával menthetünk
	le:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D 0,1,0 -t 1+7</userinput></screen>

      <para>A &man.dd.1; segédprogram is
	használható ATAPI eszközökön
	levõ hangsávok kimentéséhez.  Ennek
	lehetõségérõl részletesebben a
	<xref linkend="duplicating-audiocds"/>ban olvashatunk.</para>

    </sect2>

    <sect2 xml:id="mp3-encoding">
      <title>MP3 állományok
	tömörítése</title>

      <para>Az MP3 állomány
	tömörítésére manapság a
	legtöbben a <application>lame</application>
	elnevezésû kódolót
	választják.  A portfában a
	<application>lame</application> az <package>audio/lame</package> helyen
	található meg.</para>

      <para>Az elõbb kimentett WAV állományok
	felhasználásával az alábbi
	paranccsal tudjuk átalakítani a
	<filename>audio01.wav</filename> állományt
	<filename>audio01.mp3</filename>
	állománnyá:</para>

      <screen>&prompt.root; <userinput>lame -h -b 128 \
--tt "Izé dal címe" \
--ta "Izé-mizé elõadó" \
--tl "Izé-mizé album" \
--ty "2001" \
--tc "Leszedte és tömörítette: Izé" \
--tg "Mûfaj" \
audio01.wav audio01.mp3</userinput></screen>

      <para>A 128&nbsp;kbites tömörítés a
	gyakorlatban leginkább használt
	kódolási arány, sokan azonban a sokkal jobb
	minõségû 160 vagy 192 kbites
	tömörítést szeretik.  Minél
	nagyobb a kódolási arány, annál
	több helyet fog foglalni a keletkezõ MP3
	állomány &mdash; habár a
	minõsége is jobb lesz.  A <option>-h</option>
	kapcsoló alkalmazásával tudjuk
	aktivizálni a <quote>jobb minõségû de
	valamivel lassabb</quote> módot.  A <option>--t</option>
	kezdetû paraméterek ID3 tageket adnak meg, amelyek
	segítségével az MP3
	állományokba rájuk vonatkozó
	információkat tudunk beágyazni.  A
	tömörítés további
	beállításairól a
	<application>lame</application> man oldalán
	tájékozódhatunk.</para>

    </sect2>

    <sect2 xml:id="mp3-decoding">
      <title>MP3 állományok
	kitömörítése</title>

      <para>Ha MP3 formátumú állományokat
	szeretnénk audio CD-re írni, akkor ehhez
	elõször tömörítetlen WAV
	formátumba kell ezeket alakítanunk.  Az
	<application>XMMS</application> és az
	<application>mpg123</application> is egyaránt
	lehetõséged ad az MP3 állományok
	kitömörítésére.</para>

      <para>Lemezre írás az
	<application>XMMS</application>-sel:</para>

      <procedure>
	<step>
	  <para>Indítsuk el az <application>XMMS</application>
	    alkalmazást.</para>
	</step>

	<step>
	  <para>Az <application>XMMS</application> menüjének
	    felhozásához kattinsunk jobb gombbal az
	    ablakjára.</para>
	</step>

	<step>
	  <para>Válasszuk az <literal>Options</literal>
	    almenüben található
	    <literal>Preference</literal> menüpontot.</para>
	</step>

	<step>
	  <para>Változtassuk meg az <quote>Output Plugin</quote>
	    beállítást a <quote>Disk Writer
	    Plugin</quote> értékre.</para>
	</step>

	<step>
	  <para>Nyomjunk a <literal>Configure</literal> gombra.</para>
	</step>

	<step>
	  <para>Írjuk be (vagy válasszuk ki a
	    <literal>Browse</literal> gombbal) a könyvtárat,
	    ahová majd a kitömörített
	    állományok kerülnek.</para>
	</step>

	<step>
	  <para>Az eddig megszokottak szerint töltsük be az
	    <application>XMMS</application>-be az MP3
	    állományt, állítsuk 100%-ra a
	    hangerõt és kapcsoljuk ki a
	    hangszínszabályzót (EQ,
	    equalizer).</para>
	</step>

	<step>
	  <para>Nyomjuk le a <literal>Play</literal> gombot &mdash;
	    úgy fog tûnni, mintha az
	    <application>XMMS</application> játszaná az
	    MP3 állományt, de nem hallunk semmit.  Ekkor a
	    tartalmát állományba menti.</para>
	</step>

	<step>
	  <para>Mikor befejeztük a
	    kitömörítést, ne felejtsük el
	    visszaállítani az <quote>Output Plugin</quote>
	    értékét az
	    alapértelmezettre.</para>
	</step>
      </procedure>

      <para>Írás a szabványos kimenetre az
	<application>mpg123</application>-mal:</para>

      <procedure>
	<step>
	  <para>Futtassuk le a <command>mpg123 -s
	    audio01.mp3 &gt;
	    audio01.pcm</command> parancsot.</para>
	</step>
      </procedure>

      <para>Az <application>XMMS</application> az
	állományokat WAV formátumban írja,
	miközben az <application>mpg123</application> nyers PCM
	hangadatokat képez belõlük.  A
	<application>cdrecord</application> használata
	során mind a két formátumból
	hozhatóak létre audio CD-k.  A nyers PCM a
	&man.burncd.8; programmal használható.  Amikor WAV
	állományokkal dolgozunk, minden egyes sáv
	elején egy apró kattanást hallhatunk: ez a
	WAV állomány fejléce lesz.  A (<package>audio/sox</package> portból vagy
	csomagból telepíthetõ)
	<application>SoX</application> segédprogrammal a WAV
	formátumú állományok fejléce
	pillanatok alatt eltávolítható: </para>

      <screen>&prompt.user; <userinput>sox -t wav -r 44100 -s -w -c 2 track.wav track.raw</userinput></screen>

      <para>A CD-írók &os; alatti
	használatával kapcsolatban olvassuk el a <xref linkend="creating-cds"/>t.</para>

    </sect2>
  </sect1>

  <sect1 xml:id="video-playback">
    <info><title>Videók lejátszása</title>
      <authorgroup>
	<author><personname><firstname>Ross</firstname><surname>Lippert</surname></personname><contrib>Írta: </contrib></author>
      </authorgroup>
    </info>

    

    <para>A videolejátszás egy nagyon friss és
      gyorsan fejlõdõ alkalmazási terület.
      Legyünk türelmesek, ez nem minden fog annyira
      könnyen menni, mint a hangok esetében.</para>

    <para>A kezdéshez nem árt tudnunk, hogy a
      videokártyánk milyen gyártmányú
      és milyen chipet használ.  Míg az
      <application>&xorg;</application> és az
      <application>&xfree86;</application> számos
      különféle videokártyát ismer,
      csupán töredékükkel lehet jó
      lejátszási teljesítményt
      elõhozni.  Az X11 futtatása közben az
      &man.xdpyinfo.1; parancs kiadásával
      kérdezhetjük le az X szervertõl a
      kártyánk használatával
      elérhetõ kiterjesztéseket.</para>

    <para>Érdemes a kezünk ügyében tartani egy
      rövidke MPEG formátumú állományt,
      amellyel majd ki tudjuk próbálni a
      különféle lejátszókat és
      azok beállításait.  Mivel egyes DVD
      lejátszók alapértelmezés szerint a
      <filename>/dev/dvd</filename> helyen keresik a
      lejátszandó DVD eszközt, vagy egyszerûen
      csak így írták meg ezeket,
      mindenképpen hasznos lehet, ha szimbolikus linkeket hozunk
      létre a megfelelõ eszközökre:</para>

    <screen>&prompt.root; <userinput>ln -sf /dev/acd0 /dev/dvd</userinput>
&prompt.root; <userinput>ln -sf /dev/acd0 /dev/rdvd</userinput></screen>

    <para>A &man.devfs.5; mûködése miatt azonban ezek a
      kézzel létrehozott linkek az
      újraindítás után már nem
      maradnak meg.  A szimbolikus linkeket a rendszer minden egyes
      indulásakor úgy tudjuk automatikusan
      létrehozni, hogyha az <filename>/etc/devfs.conf</filename>
      állományba felvesszük az alábbi
      sort:</para>

    <programlisting>link acd0 dvd
link acd0 rdvd</programlisting>

    <para>Emellett a DVD-k titkosításának
      feloldása, mely a DVD-meghajtók speciális
      funkcióit igényli, a DVD eszközökön
      írási jogot is igényel.</para>

    <para>Az X11 osztott memóriát kezelõ
      felületének gyorsításához
      javasolt néhány &man.sysctl.8; változó
      értékének megnövelése is:</para>

    <programlisting>kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</programlisting>

    <sect2 xml:id="video-interface">
      <title>A megjelenítõ képességeinek
	megállapítása</title>

      <indexterm><primary>XVideo</primary></indexterm>
      <indexterm><primary>SDL</primary></indexterm>
      <indexterm><primary>DGA</primary></indexterm>

      <para>Több különbözõ úton lehet
	X11 alatt videókat nézni, de ennek tényleges
	módját igazából a
	rendelkezésre álló hardver határozza
	meg.  Az itt leírt módszerek által
	kihozható minõség hardverenként
	eltérhet.  Másodsorban a videók
	megjelenítése az X11-ben az utóbbi
	idõben igen nagy hangsúlyt kapott, ezért az
	<application>&xorg;</application> és az
	<application>&xfree86;</application> minden egyes
	változatával jelentõsen javulhat a helyzet
	ezen a téren.</para>

      <para>A videók megjelenítésére
	használt gyakori felületek:</para>

      <orderedlist>
	<listitem>
	  <para>X11: az X11 normális kimenete osztott
	    memórián keresztül</para>
	</listitem>
	<listitem>
	  <para>XVideo: az X11 felületének
	    kiterjesztése, ami tetszõleges X11 által
	    kirajzolható objektum esetén támogat
	    videót</para>
	</listitem>
	<listitem>
	  <para>SDL: a Simple Directmedia Layer</para>
	</listitem>
	<listitem>
	  <para>DGA: a Direct Graphics Access (közvetlen grafikus
	    hozzáférés)</para>
	</listitem>
	<listitem>
	  <para>SVGAlib: alacsonyszintû konzolos grafikus
	    réteg</para>
	</listitem>
      </orderedlist>

      <sect3 xml:id="video-interface-xvideo">
	<title>XVideo</title>

	<para>Az <application>&xorg;</application> és az
	  <application>&xfree86;&nbsp;4.X</application> rendelkezik egy
	  <emphasis>XVideo</emphasis> (avagy Xvideo, Xv, xv)
	  elnevezésû kiterjesztéssel, amelyen
	  keresztül egy speciális gyorsítás
	  segítségével a kirajzolható
	  objektumokban közvetlenül meg tudunk
	  jeleníteni videókat.  Ezzel a
	  kiterjesztéssel még a gyengébb
	  gépeken is nagyon jó minõségû
	  lejátszást tudunk elérni.</para>

	<para>A kiterjesztés
	  mûködésérõl az
	  <command>xvinfo</command> parancs kiadásával
	  gyõzõdhetünk meg:</para>

	<screen>&prompt.user; <userinput>xvinfo</userinput></screen>

	<para>Ha a parancs eredménye ehhez hasonló, akkor
	  a kártyánk támogatja az
	  XVideót:</para>

	<screen>X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</screen>

	<para>Az XVideo nem mindegyik
	  implementációjában vannak jelen a
	  felsorolt formátumok (YUV2, YUV12 stb.), ami viszont
	  néhány lejátszó
	  számára akadályokat jelenthet.</para>

	<para>Amennyiben viszont ezt látjuk:</para>

	<screen>X-Video Extension version 2.2
screen #0
no adaptors present</screen>

	<para>Akkor a kártyánk nem rendelkezik XVideo
	  támogatással.</para>

	<para>Ha az XVideo nem támogatott a
	  kártyánk számára, akkor az
	  csupán csak annyit jelent, hogy a gépünknek
	  nehéz dolga lesz a videók
	  megjelenítéséhez szükséges
	  számítási kapacitás
	  kiszolgálásában.  Azonban a
	  videokártyánktól és
	  processzorunktól függõen még
	  így is kielégítõ eredményt
	  tudunk elõcsalni.  Ekkor viszont minden bizonnyal
	  érdemes lesz átolvasnunk a <xref linkend="video-further-reading"/>ban, miként tudjuk
	  növelni a teljesítményét.</para>
      </sect3>

      <sect3 xml:id="video-interface-SDL">
	<title>A Simple Directmedia Layer</title>

	<para>A Simple Directmedia Layer, vagy SDL, eredetileg a
	  &microsoft.windows;, BeOS és &unix; közti
	  hordozhatóságot szándékozta
	  megvalósítani, aminek
	  segítségével a hangot és
	  grafikát hatékonyan használni tudó
	  alkalmazások hozhatóak létre.  Az SDL
	  által nyújtott réteg a hardver olyan
	  alacsonyszintû absztrakcióját öleli
	  fel, amely gyakran még az X11
	  felületénél is hatékonyabb.</para>

	<para>Az SDL a <package>devel/sdl12</package>
	   helyen található.</para>

      </sect3>

      <sect3 xml:id="video-interface-DGA">
	<title>Direct Graphics Access (Közvetlen grafikus
	  hozzáférés)</title>

	<para>A közvetlen grafikus hozzáférés
	  az X11 egy olyan kiterjesztése, ami lehetõvé
	  teszi a programok számára az X szerver
	  megkerülését és így
	  közvetlenül a videokártya
	  memóriáját képesek elérni.
	  Mivel a megosztás hatékony
	  megvalósításához ez nagyban
	  építkezik alacsonyszintû
	  leképzési mûveletekre, ezért az
	  ilyet használó programokat
	  <systemitem class="username">root</systemitem> felhasználóként
	  kell futtatni.</para>

	<para>A DGA kiterjesztés a &man.dga.1;
	  segítségével tesztelhetõ és
	  mérhetõ.  A <command>dga</command> parancs
	  kiadása után minden billentyû
	  lenyomására megváltoztatja a
	  képernyõn látható színeket.
	  A kilépéshez a <keycap>q</keycap>
	  billentyût kell lenyomni.</para>

      </sect3>
    </sect2>

    <sect2 xml:id="video-ports">
      <title>A videókkal foglalkozó portok és
	csomagok</title>

      <indexterm><primary>videoportok</primary></indexterm>
      <indexterm><primary>videocsomagok</primary></indexterm>

      <para>Ebben a szakaszban a &os;
	Portgyûjteményébõl a videók
	lejátszására alkalmas programokat
	vesszük számba.  A videolejátszás
	nagyon gyorsan fejlõdõ terület, ezért az
	itt említett különbözõ
	alkalmazások képességei az itt
	leírtaktól némileg
	eltérhetnek.</para>

      <para>Elõször is fontos tisztában lennünk
	azzal, hogy számos &os;-n futó
	videoalkalmazás eredetileg linuxos
	alkalmazásként indult, és
	közülük sokan még csak béta
	minõségûek.  Íme a &os;-n is
	megtalálható videocsomagokkal kapcsolatos
	néhány olyan gond, amivel esetleg
	összefuthatunk:</para>

      <orderedlist>
	<listitem>
	  <para>Az egyik alkalmazás nem képes
	    visszajátszani olyan állományt, amit
	    egy másik alkalmazás hozott
	    létre.</para>
	</listitem>
	<listitem>
	  <para>Az alkalmazás nem képes
	    visszajátszani a saját maga által
	    készített állományokat.</para>
	</listitem>
	<listitem>
	  <para>Ugyanazon alkalmazás két
	    különbözõ gépen, amikor mind a
	    kettõn az adott konfigurációra
	    fordítjuk le, ugyanazt az állományt
	    másképpen játssza vissza.</para>
	</listitem>
	<listitem>
	  <para>Egy olyan látszólag egyértelmû
	    szûrõ, mint például a kép
	    átméretezése, a hibás
	    átméretezõ rutin miatt nagyon
	    csúnya eredményt produkál.</para>
	</listitem>
	<listitem>
	  <para>Az alkalmazás gyakran elszáll.</para>
	</listitem>
	<listitem>
	  <para>A porthoz nem találjuk a
	    dokumentációt, egyedül csak az interneten
	    vagy a port <filename>work</filename>
	    könyvtárában van.</para>
	</listitem>
      </orderedlist>

      <para>Sok alkalmazás a <quote>linuxizmus</quote> jeleit is
	hordozza, vagyis gondok adódhatnak abból, hogy a
	szerzõk az alkalmazások
	mûködtetéséhez a Linux rendszermag
	és a különféle terjesztésekben
	megtalálható módosított
	szabványos könyvtárak
	különlegességeit használják ki.
	Ezeket a portok karbantartói nem mindig észlelik
	és javítják ki, ami miatt az
	alábbiak bármikor bekövetkezhetnek:</para>

      <orderedlist>
	<listitem>
	  <para>A processzor jellemzõit a
	    <filename>/proc/cpuinfo</filename> állományon
	    keresztül állapítják meg.</para>
	</listitem>
	<listitem>
	  <para>A szálak helytelen használatuk miatt a
	    program befejezõdésekor
	    összeakadnak.</para>
	</listitem>
	<listitem>
	  <para>Az alkalmazással gyakran együtt
	    használt egyéb alkalmazások még
	    nem nincsenek benne a &os;
	    Portgyûjteményében.</para>
	</listitem>
      </orderedlist>

      <para>Az ilyen alkalmazások fejlesztõi a
	hordozhatóság javításával
	és a problémák megoldásával
	kapcsolatban eddig mindig igyekeztek
	együttmûködni a portok
	karbantartóival.</para>

      <sect3 xml:id="video-mplayer">
	<title>MPlayer</title>

	<para>Az <application>MPlayer</application> az utóbbi
	  idõben felbukkant, gyorsan fejlõdõ
	  videolejátszó.  Fejlesztõinek célja
	  a sebesség és rugalmasság a Linux,
	  illetve más &unix; rendszereken.  A
	  kezdeményezés abból fakadt, hogy a
	  fejlesztés mögött álló csapat
	  alapítójának elege lett az akkoriban
	  elérhetõ lejátszók
	  teljesítményébõl.
	  Mondhatnánk, hogy ez a program feláldozta a
	  grafikus felületet az áramvonalas
	  kialakításért, azonban ha
	  hozzászokunk a parancssori
	  beállításokhoz és a
	  billentyûkön keresztüli
	  vezérléshez, remekül
	  mûködik.</para>

	<sect4 xml:id="video-mplayer-building">
	  <title>Az MPlayer lefordítása</title>

	  <indexterm>
	    <primary>MPlayer</primary>
	    <secondary>fordítása</secondary>
	  </indexterm>

	  <para>Az <application>MPlayer</application> a <package>multimedia/mplayer</package> helyen
	    található.  A program a
	    fordítási folyamat során elvégez
	    számos hardverellenõrzést, aminek
	    eredményeképpen az egyik rendszeren
	    fordított program nem vihetõ a másikra.
	    Ezért különösen fontos portból
	    fordítani és nem pedig bináris csomagot
	    használni.  Mindezek mellett a
	    <filename>Makefile</filename> állományban
	    még számos, a <command>make</command>
	    parancsnak a fordítás megkezdésekor
	    átadható beállítást
	    találhatunk:</para>

	  <screen>&prompt.root; <userinput>cd /usr/ports/multimedia/mplayer</userinput>
&prompt.root; <userinput>make</userinput>
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
</screen>

	  <para>Az üzenet fordítása:</para>

	  <screen>
F - I - G - Y - E - L - E - M

Az mplayert személyes igényeinkhez úgy tudjuk igazítani, ha
figyelmesen átnézzük a Makefile állományt!  Például a WITH_GTK1
megadásával az MPlayer GTK1 alapú grafikus felülettel jön létre.
A grafikus felület használatához telepítenünk kell a
/usr/ports/multimedia/mplayer-skins portot is, vagy letölteni a
hivatalos skingyûjteményt a http://www.mplayerhq.hu/homepage/dload.html
oldalról.
</screen>

	  <para>A port alapbeállításai a
	    legtöbb felhasználó számára
	    megfelelõek, habár az Xvid kódek
	    használatához meg kell adnunk a
	    <varname>WITH_XVID</varname>
	    beállítást.  Rajta kívül
	    még az alapértelmezett DVD eszközt is
	    érdemes megadni a <varname>WITH_DVD_DEVICE</varname>
	    beállítással, amelynek
	    alapértéke a
	    <filename>/dev/acd0</filename>.</para>

	  <para>A leírás
	    elkészítésének
	    idõpontjában az <application>MPlayer</application>
	    portja létrehozza a HTML dokumentációt
	    és a két végrehajtható
	    állományt: az <command>mplayer</command>
	    lejátszót és a videók
	    újrakódolásáért
	    felelõs <command>mencoder</command>
	    segédprogramot.</para>

	  <para>Az <application>MPlayer</application> HTML
	    dokumentációja nagyon közlékeny,
	    és ha az olvasó nem találná
	    valamelyik videohardver vagy felület
	    leírását ebben a fejezetben, akkor ez a
	    dokumentáció mindenképpen hasznos
	    olvasnivalónak bizonyul.  Ha a &unix;-ok alatt
	    elérhetõ videotámogatás
	    leírását keressük,
	    határozottan megéri idõt szánni az
	    <application>MPlayer</application>
	    dokumentációjának alapos
	    végigolvasására.</para>

	</sect4>

	<sect4 xml:id="video-mplayer-using">
	  <title>Az MPlayer használata</title>

	  <indexterm>
	    <primary>MPlayer</primary>
	    <secondary>használata</secondary>
	  </indexterm>

	  <para>Az <application>MPlayer</application>
	    használatához a felhasználói
	    könyvtárunkban rendelkeznünk kell egy
	    <filename>.mplayer</filename> elnevezésû
	    könyvtárral.  Ezt a következõ
	    paranccsal tudjuk létrehozni:</para>

	  <screen>&prompt.user; <userinput>cd /usr/ports/multimedia/mplayer</userinput>
&prompt.user; <userinput>make install-user</userinput></screen>

	  <para>Az <command>mplayer</command> parancssori
	    paraméterei a hozzá tartozó man oldalon
	    találhatóak meg, valamint mindezek a HTML
	    dokumentációban még
	    részletesebben.  Ebben a szakaszban csupán
	    néhányukat mutatjuk be.</para>

	  <para>Egy állomány, mint például a
	    <filename>tesztvideo.avi</filename>,
	    a <option>-vo</option>
	    beállításával
	    játszható le a különbözõ
	    felületeken:</para>

	  <screen>&prompt.user; <userinput>mplayer -vo xv tesztvideo.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo sdl tesztvideo.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo x11 tesztvideo.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo dga tesztvideo.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo 'sdl:dga' tesztvideo.avi</userinput></screen>

	  <para>Érdemes az itt felsorolt
	    konfigurációk mindegyikét
	    kipróbálni, mivel az egymáshoz
	    mért teljesítményük rengeteg
	    tényezõn múlik, de közülük
	    talán maga a hardver a legjelentõsebb.</para>

	  <para>A DVD-k lejátszásához
	    cseréljük ki a
	    <filename>tesztvideo.avi</filename>
	    paramétert a
	    <option>dvd://<replaceable>N</replaceable> -dvd-device
	    <replaceable>ESZKÖZ</replaceable></option>
	    paraméterekkel, ahol az <replaceable>N</replaceable>
	    a lejátszandó fejezet sorszáma,
	    valamint az
	    <filename>ESZKÖZ</filename>
	    a DVD-hez tartozó eszközleíró.
	    Például így tudjuk elkezdeni
	    <filename>/dev/dvd</filename> eszközrõl a 3.
	    fejezet lejátszását:</para>

	  <screen>&prompt.root; <userinput>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</userinput></screen>

	  <note>
	    <para>A port fordítása során a
	      <varname>WITH_DVD_DEVICE</varname> paraméter
	      segítségével megadható az
	      alapértelmezett DVD eszköz, amely
	      alapból a <filename>/dev/acd0</filename>.
	      Errõl többet a port
	      <filename>Makefile</filename>
	      állományában
	      találhatunk.</para>
	  </note>

	  <para>A leállításhoz,
	    szüneteltetéshez,
	    továbblépéshez és többi
	    hasonló funkcióhoz tartozó
	    billentyûket a <command>mplayer -h</command> parancs
	    kimenetébõl vagy a man oldal
	    elolvasásából deríthetjük
	    ki.</para>

	  <para>A lejátszáshoz tartozó
	    néhány viszonylag fontos
	    beállítás: az <option>-fs
	    -zoom</option> teljesképernyõs módra
	    vált, valamint a <option>-framedrop</option>
	    segít növeli a
	    teljesítményt.</para>

	  <para>A lejátszáskor kiadandó parancs
	    túlburjánzását el tudjuk
	    kerülni, ha létrehozunk egy
	    <filename>.mplayer/config</filename> állományt
	    és itt állítjuk be a gyakori
	    opciókat:</para>

	  <programlisting>vo=xv
fs=yes
zoom=yes</programlisting>

	  <para>Végezetül megemlítjük, hogy az
	    <command>mplayer</command> segítségével
	    a DVD-n található fejezeteket ki tudjuk
	    menteni <filename>.vob</filename>
	    állományokba.  A DVD második
	    fejezetének kimentéséhez
	    gépeljük be ezt:</para>

	  <screen>&prompt.root; <userinput>mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd</userinput></screen>

	  <para>A parancs eredményeképpen keletkezõ
	    <filename>out.vob</filename> állomány
	    formátuma MPEG lesz, amit a fejezetben bemutatott
	    további csomagokkal tudunk feldolgozni.</para>

	</sect4>

	<sect4 xml:id="video-mencoder">
	  <title>mencoder</title>

	<indexterm><primary>mencoder</primary></indexterm>

	  <para>A <command>mencoder</command>
	    használatának megkezdése elõtt
	    javasolt alaposan beleásnunk magunkat a HTML
	    dokumentációba és megismerkednünk
	    az alapvetõ beállításaival.  Van
	    külön man oldala is, azonban a HTML
	    leírás nélkül
	    önmagában ez nem túl sokat ér.
	    Megszámlálhatatlan úton és
	    módon növelhetõ benne a
	    minõség, csökkenthetõ a
	    kódolási arány,
	    változtatható a formátum, és
	    ezen apró finomságok felelõsek a
	    jó vagy éppen a rossz
	    teljesítményért.  A
	    témába néhány példa
	    bemutatásával igyekszünk beavatni az
	    olvasót.  Elõször vegyünk egy
	    egyszerû másolást:</para>

	  <screen>&prompt.user; <userinput>mencoder bemenõ.avi -oac copy -ovc copy -o eredmény.avi</userinput></screen>

	  <para>A parancssori paraméterek helytelen
	    kombinációja olyan állományokat
	    eredményezhet, amelyeket még maga az
	    <command>mplayer</command> sem képes
	    lejátszani.  Ezért ha csak le akarunk szedni
	    egy állományt, akkor maradjunk meg az
	    <command>mplayer</command> <option>-dumpfile</option>
	    opciójánál.</para>

	  <para>A
	    <filename>bemenõ.avi</filename>
	    állományt MPEG4 video- és MPEG3
	    hangtömörítéssel (amihez kell majd a
	    <package>audio/lame</package>) így
	    tudjuk lekódolni:</para>

	  <screen>&prompt.user; <userinput>mencoder bemenõ.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o eredmény.avi</userinput></screen>

	  <para>Ezzel az <command>mplayer</command> és
	    <command>xine</command> programok számára is
	    egyaránt lejátszható
	    állomány jön létre.</para>

	  <para>A DVD fejezeteit úgy tudjuk közvetlenül
	    kódolni, ha a parancssorban kicseréljük a
	    <filename>bemenõ.avi</filename>
	    állományt az <option>dvd://1 -dvd-device
	    /dev/dvd</option> beállításra, illetve
	    ha a programot <systemitem class="username">root</systemitem>
	    felhasználóként futtatjuk.  De mivel
	    elsõre általában ritkán vagyunk
	    elégedettek a kódolással,
	    érdemes elõször inkább lementeni az
	    egész fejezetet egy állományba, majd
	    azon dolgozni.</para>

	</sect4>
      </sect3>

      <sect3 xml:id="video-xine">
	<title>A xine videolejátszó</title>

	<para>A <application>xine</application> egy széles
	  hatókörû projekt, amelynek nem csak az a
	  célja, hogy egy <quote>mindenes</quote>
	  videolejátszó alkalmazást fejlesszenek,
	  hanem az is, hogy újrahasznosítható
	  függvénykönyvtárakat és egy
	  moduláris felépítésû
	  programot hozzanak létre, amely
	  kiegészítûkkel bûvíthetû.
	  A <package>multimedia/xine</package> helyen
	  portként, valamint csomagként is
	  elérhetõ.</para>

	<para>A <application>xine</application> itt-ott még
	  valamelyest durva, de mindenképpen egy
	  dicséretes kezdeményezés.  A
	  <application>xine</application> a gyakorlatban erõs
	  processzort és mellé gyors
	  videokártyát kíván, vagy pedig az
	  XVideo kiterjesztés támogatását.
	  A grafikus felhasználói felülete ugyan
	  használható, de még kicsit
	  esetlen.</para>

	<para>Az írás pillanatában a
	  <application>xine</application> mellé még nem
	  kapunk olyan modult, amivel le tudnánk játszani
	  a CSS kódolású DVD-ket.  Léteznek
	  azonban olyan külsõs modulok, amelyekkel meg lehet
	  valósítani ezt a feladatot, azonban a &os;
	  Portgyûjteményében ezeket még nem
	  találhatjuk meg.</para>

	<para>A <application>xine</application> az
	  <application>MPlayer</application>hez képes többet
	  tesz a felhasználóért, azonban ezzel
	  egyidõben el is veszi tõle a finomhangolás
	  lehetõségét.  A
	  <application>xine</application> legjobban az XVideót
	  ismerõ felületeken teljesít.</para>

	<para>A <application>xine</application>
	  alapértelmezés szerint grafikus felülettel
	  indul, ahol a menük segítségével
	  tudunk megnyitni egy adott állományt:</para>

	<screen>&prompt.user; <userinput>xine</userinput></screen>

	<para>Vagy a grafikus felület használata
	  nélkül kiadhatjuk közvetlenül is az
	  állomány
	  lejátszását:</para>

	<screen>&prompt.user; <userinput>xine -g -p kedvencmozim.avi</userinput></screen>

      </sect3>

      <sect3 xml:id="video-ports-transcode">
	<title>A transcode</title>

      <para>A <application>transcode</application> nem egy újabb
	lejátszó, hanem a video- és audio
	állományok
	újratömörítésére
	használható programok gyûjteménye.  A
	<application>transcode</application>
	segítségével a szabványos be-
	és kimeneten keresztül parancssoros programokkal
	képesek vagyunk videoállományokat
	összefûzni, megjavítani.</para>

      <para>A <package>multimedia/transcode</package>
	port fordítása során temérdek
	beállítást adhatunk meg, amelyek
	közül az alábbi parancsban foglaljuk össze
	az általunk javasolandókat:</para>

      <screen>&prompt.root; <userinput>make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes</userinput></screen>

      <para>Ezek a beállítások a legtöbb
	felhasználó számára
	elegendõek.</para>

      <para>A <command>transcode</command> képességeinek
	illusztrálásához lássunk egy
	példát, amiben megmutatjuk, hogyan kell egy DivX
	állományt PAL szabványú MPEG-1
	formátumú (PAL VCD)
	állománnyá alakítani:</para>

      <screen>&prompt.user; <userinput>transcode -i bemenõ.avi -V --export_prof vcd-pal -o output_vcd</userinput>
&prompt.user; <userinput>mplex -f 1 -o eredmény_vcd.mpg eredmény_vcd.m1v eredmény_vcd.mpa</userinput></screen>

      <para>Az eredményül keletkezõ
	<filename>eredmény_vcd.mpg</filename>
	MPEG állomány akár már
	játszható is
	<application>MPlayer</application>rel.  Ha az
	állományt kiírjuk egy írható
	CD-re, akkor ezzel video CD-t is létre tudunk hozni,
	amihez viszont szükségünk van mind a <package>multimedia/vcdimager</package> és
	<package>sysutils/cdrdao</package>
	programokra.</para>

      <para>A <command>transcode</command> parancsnak van saját
	man oldala, azonban ehelyett a <link xlink:href="http://www.transcoding.org/cgi-bin/transcode">transcode
	wiki</link>ben érdemes inkább további
	információkat és példákat
	keresni.</para>

      </sect3>
    </sect2>

    <sect2 xml:id="video-further-reading">
      <title>Ajánlott olvasmányok</title>

      <para>A &os;-hez tartozó videoszoftverek nagyon gyorsan
	fejlõdnek.  Könnyen elképzelhetõ, hogy az
	imént tárgyalt problémák
	legtöbbje a közeljövõben hamarosan
	megoldódik.  Addig viszont bárkinek, aki a
	legtöbbet szeretné kihozni a &os; audio- és
	video lehetõségeibõl, rengeteg
	leírás és dokumentáció
	elolvasása alapján kell összecsiszolnia a
	különbözõ
	beállításokat, és csak
	néhány alkalmazás mellett érdemes
	kitartania.  Ebben a szakaszban igyekszünk segíteni
	az olvasónak megtalálni az ilyen jellegû
	információkat.</para>

      <para>Az <link xlink:href="http://www.mplayerhq.hu/DOCS/">MPlayer
	dokumentációja</link> szakmai szempontból
	igen közlékeny.  Ezt mindenkinek érdemes
	elolvasnia, aki a késõbbiekben magasabb szakmai
	szinten akar foglalkozni a &unix;-os videózással.
	Az <application>MPlayer</application> levelezési
	listája viszont alig tolerálja a
	dokumentációt rendesen el nem olvasó
	emberek kérdéseit, ezért minden egyes hiba
	bejelentése elõtt lehetõleg rendesen
	nézzük át a dokumentáció
	odavágó részeit.</para>

      <para>A <link xlink:href="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html">xine
	HOGYAN</link> egyik külön fejezetében az
	összes lejátszó esetén
	érvényesíthetõ
	teljesítménynövelési
	módszereket mutat be.</para>

      <para>Végül íme néhány
	ígéretes alkalmazás, amelyeket
	érdemes kipróbálnunk:</para>

      <itemizedlist>
	<listitem>
	  <para><link xlink:href="http://avifile.sourceforge.net/">Avifile</link>, ami
	     egyben a <package>multimedia/avifile</package> port</para>
	</listitem>
	<listitem>
	  <para><link xlink:href="http://www.dtek.chalmers.se/groups/dvd/">Ogle</link>,
	    ami a <package>multimedia/ogle</package>
	    port</para>
	</listitem>
	<listitem>
	  <para><link xlink:href="http://xtheater.sourceforge.net/">Xtheater</link></para>
	</listitem>
	<listitem>
	  <para><package>multimedia/dvdauthor</package>, egy
	    nyílt forráskódú DVD-tartalom
	    szerkesztõ</para>
	</listitem>
      </itemizedlist>

    </sect2>
  </sect1>

  <sect1 xml:id="tvcard">
    <info><title>TV kártyák
      beállítása</title>
      <authorgroup>
	<author><personname><firstname>Josef</firstname><surname>El-Rayes</surname></personname><contrib>Eredetileg írta: </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname><contrib>Kiegészítette,
	    továbbfejlesztette: </contrib></author>
      </authorgroup>
    </info>

    

    <indexterm><primary>TV kártyák</primary></indexterm>

    <sect2>
      <title>Bevezetés</title>

      <para>A TV kártyák segítségével
	kábeles vagy antennás
	televízióadásokat tudunk nézni a
	számítógépünkön.  A
	legtöbbjük RCA vagy S-video bemenettel rendelkezik,
	valamint néhányukon még FM
	rádiókészülék is
	megtalálható.</para>

      <para>A &os; a &man.bktr.4; meghajtón keresztül a
	Brooktree Bt848/849/878/879, illetve a Conexant CN-878/Fusion
	878a típusú, PCI-os
	videorögzító chipeket ismeri.
	Ügyelnünk kell arra, hogy a kártyánkon
	levõ vevõkészülék is
	használható legyen, amit pedig a &man.bktr.4; man
	oldalán megtalálható támogatott
	eszközök listájából
	ellenõrizhetünk.</para>

    </sect2>

    <sect2>
      <title>A meghajtó beállítása</title>

      <para>A kártyánk használatához be kell
	töltenünk a &man.bktr.4; meghajtót, ami
	csupán annyiból áll, hogy a
	<filename>/boot/loader.conf</filename> állományhoz
	hozzáadunk egy ilyen sort:</para>

      <programlisting>bktr_load="YES"</programlisting>

      <para>Másik lehetõségünk, ha a TV
	kártya támogatását statikusan
	beleépítjük a rendszermagba.  Ha ezt a
	megoldást választjuk, a következõ
	sorokat kell elhelyeznünk a rendszermag
	beállításait tartalmazó
	állományba:</para>

      <programlisting>device	 bktr
device	iicbus
device	iicbb
device	smbus</programlisting>

      <para>A fentebb látható egyéb
	eszközök megadása azért
	szükséges, mert a kártya
	részegységei egy I2C buszon csatlakoznak
	egymáshoz.  Miután beillesztettük a
	szükséges változtatásokat,
	fordítsuk le és telepítsük az
	új rendszermagot.</para>

      <para>A támogatás hozzáadása
	után újra kell indítanunk a
	számítógépünket.  A
	rendszerindítási folyamat során meg kell
	jelennie a TV kártyánknak is, valahogy
	így:</para>

      <programlisting>bktr0: &lt;BrookTree 848A&gt; mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: &lt;I2C bit-banging driver&gt; on bti2c0
iicbus0: &lt;Philips I2C bus&gt; on iicbb0 master-only
iicbus1: &lt;Philips I2C bus&gt; on iicbb0 master-only
smbus0: &lt;System Management Bus&gt; on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.</programlisting>

      <para>Természetesen a fenti üzenetek az
	aktuális hardvereszközünknek megfelelõen
	némileg eltérhetnek.  Ellenõrizzük, hogy
	a vevõkészüléket helyesen ismerte-e fel
	a rendszer.  Ha nem sikerült volna, akkor a &man.sysctl.8;
	és a rendszermag beállításai
	segítségével még mindig van
	lehetõségünk állítani rajta.
	Például, ha egy Philips SECAM
	vevõkészüléket akarunk
	beállítani, akkor a rendszermag
	beállításaihoz még hozzá kell
	adni a következõ sort:</para>

      <programlisting>options OVERRIDE_TUNER=6</programlisting>

      <para>vagy erre közvetlenül használhatjuk a
	&man.sysctl.8; programot is:</para>

      <screen>&prompt.root; <userinput>sysctl hw.bt848.tuner=6</userinput></screen>

      <para>A &man.bktr.4; man oldalán és a
	<filename>/usr/src/sys/conf/NOTES</filename>
	állományban megtalálhatjuk a többi
	beállítás részletes
	leírását is.</para>

    </sect2>

    <sect2>
      <title>Hasznos alkalmazások</title>

      <para>A TV kártyánk tényleges
	használatához azonban még a
	következõ alkalmazások valamelyikét is
	telepítenünk kell:</para>

      <itemizedlist>
	<listitem>
	  <para>A <package>multimedia/fxtv</package>
	    használatával ablakban
	    tévézhetünk, valamint
	    lehetõségünk van kép/audio/video
	    kimentésére is.</para>
	</listitem>
	<listitem>
	  <para>A <package>multimedia/xawtv</package>
	    az <application>fxtv</application>-hez hasonló
	    lehetõségekkel bíró
	    tévénézõ alkalmazás.</para>
	</listitem>
	<listitem>
	  <para>A <package>misc/alevt</package>
	    dekódolja és megjeleníti a
	    mûsorhoz kapcsolódó Videotex/Teletext
	    üzeneteket.</para>
	</listitem>
	<listitem>
	  <para>Az <package>audio/xmradio</package>
	    segítségével az egyes TV
	    kártyákon megtalálható FM
	    rádiókészülékeket tudjuk
	    használatba venni.</para>
	</listitem>
	<listitem>
	  <para>Az <package>audio/wmtune</package> a
	    rádióvevõkhöz
	    használható hasznos grafikus
	    alkalmazás.</para>
	</listitem>
      </itemizedlist>

      <para>Ebben a témában a &os;
	Portgyûjteményében további
	érdekes alkalmazások találhatóak
	még.</para>

    </sect2>

    <sect2>
      <title>Hibakeresés</title>

      <para>Ha bármilyen gond adódna a TV
	kártyánkkal kapcsolatosan, akkor elõször
	mindenképpen érdemes megnézni, hogy a rajta
	levõ videorögzítõ chipet és
	vevõkészüléket a &man.bktr.4;
	meghajtó ténylegesen ismeri-e, illetve hogy
	jól állítottuk-e be.  A TV
	kártyákra irányuló
	különféle egyéb kérdések
	és segítség tekintetében
	érdemes lehet még levelet küldeni a
	&a.multimedia.name; címére is.</para>

    </sect2>
  </sect1>

  <sect1 xml:id="scanners">
    <info><title>Lapolvasók</title>
      <authorgroup>
	<author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname><contrib>Írta: </contrib></author>
      </authorgroup>
    </info>

    

    <indexterm><primary>lapolvasók</primary></indexterm>

    <sect2>
      <title>Bevezetés</title>

      <para>A &os; lapolvasókhoz a
	<application>SANE</application> (Scanner Access Now Easy)
	elnevezésû <acronym role="Application Programming  Interface">API</acronym> (alkalmazásfejlesztõi
	felület) segítségével képes
	hozzáférni, amelyet a
	Portgyûjteményben találhatunk meg.  A
	lapolvasást végzõ hardvereszközök
	használatához a &os; a
	<application>SANE</application> mellett még
	néhány eszközmeghajtóra is
	támaszkodik.</para>

      <para>A &os; egyaránt ismeri az SCSI és USB
	csatlakoztatású lapolvasókat is.
	Még mielõtt nekikezdenénk a lapolvasó
	beállításához, bizonyosodjuk meg
	róla, hogy a <application>SANE</application>
	támogatja.  A <application>SANE</application> <link xlink:href="http://www.sane-project.org/sane-supported-devices.html">által
	ismert eszközök</link> felsorolásában
	ellenõrizhetjük a lapolvasónk
	támogatottságának állapotát.
	A &os;&nbsp;8.<replaceable>X</replaceable> elõtti
	kiadásaiban ezenkívül még a
	&man.uscanner.4; man oldalon is láthatjuk az ismert USB-s
	lapolvasók listáját.</para>

    </sect2>

    <sect2>
      <title>A rendszermag beállítása</title>

      <para>A korábbiak értelmében tehát
	mind a SCSI, mind pedig a USB felületen csatlakozó
	eszközök támogatottak.  A lapolvasónknak
	megfelelõen eltérõ eszközmeghajtók
	szükségesek.</para>

      <sect3 xml:id="scanners-kernel-usb">
	<title>Beállítás USB felületen</title>

	<para>A <filename>GENERIC</filename> rendszermag
	  alapértelmezés szerint tartalmazza az USB-s
	  lapolvasók használatához
	  szükséges eszközmeghajtókat.  Ha
	  valamiért azonban mégis saját
	  rendszermagot akarunk használni, akkor ne
	  felejtsük el ellenõrizni, hogy a rendszermag
	  beállításai között
	  megtalálhatóak a következõ
	  sorok:</para>

	<programlisting>device usb
device uhci
device ohci
device ehci</programlisting>

	<para>A &os;&nbsp;8.<replaceable>X</replaceable> elõtti
	  kiadásaiban még a következõ sorra is
	  szükségünk lesz:</para>

	<programlisting>device uscanner</programlisting>

	<para>A &os; ezen változataiban a &man.uscanner.4;
	  eszközmeghajtón keresztül tudjuk
	  használni az USB csatolóval rendelkezõ
	  lapolvasókat.  A &os;&nbsp;8.0
	  változatától kezdõdõen pedig
	  ehhez a &man.libusb.3;
	  függvénykönyvtár nyújt
	  közvetlen támogatást.</para>

	<para>A megfelelõen elõkészített
	  rendszermag elindítása után csatlakoztassuk
	  az USB-s lapolvasónkat.  Ez a sor fog megjelenni a
	  rendszer üzenetpufferében (&man.dmesg.8;):</para>

	<screen>ugen0.2: &lt;EPSON&gt; at usbus0</screen>

	<para>Vagy &os;&nbsp;7.<replaceable>X</replaceable> rendszerek
	  esetében:</para>

	<screen>uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2</screen>

	<para>Ezek az üzenetek elárulják nekünk,
	  hogy a lapolvasóhoz mostantól a használt
	  &os; verziótól függõen a
	  <filename>/dev/ugen0.2</filename> vagy a
	  <filename>/dev/uscanner0</filename>
	  eszközleíró tartozik.  A fenti
	  példában egy &epson.perfection;&nbsp;1650
	  típusú USB lapolvasót
	  láthatunk.</para>
      </sect3>

      <sect3>
	<title>Beállítás SCSI
	  felületen</title>

	<para>Ha a lapolvasónk SCSI felületen csatlakozik,
	  fontos tisztában lennünk azzal, hogy pontosan
	  milyen SCSI-vezérlõn keresztül is
	  érhetjük el, ugyanis a rajta
	  található SCSI chipkészletnek
	  megfelelõen kell majd hangolnunk a rendszermag
	  beállításait.  A
	  <filename>GENERIC</filename> rendszermag alapból ismeri
	  a leggyakrabban elõforduló
	  SCSI-vezérlõket.  Mindenképpen olvassuk
	  át a <filename>NOTES</filename> nevû
	  állományt és adjuk hozzá a
	  rendszermag beállításaihoz a
	  megfelelõ sort.  A SCSI-kártya
	  meghajtóján kívül még az
	  alábbi beállításokat is meg kell
	  adnunk a rendszermagunk számára:</para>

	<programlisting>device scbus
device pass</programlisting>

	<para>Ahogy sikerült a rendszermagot sikeresen
	  lefordítani és telepíteni, a rendszer
	  indulása során az üzenetpufferben
	  már láthatjuk is a felismert
	  eszközt:</para>

	<screen>pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</screen>

	<para>Ha a rendszer indulásakor még nem kapcsoltuk
	  volna be a lapolvasónkat, a &man.camcontrol.8; parancs
	  segítségével késõbb
	  külön kérhetjük a SCSI buszon
	  található eszközök
	  újbóli felderítését:</para>

	<screen>&prompt.root; <userinput>camcontrol rescan all</userinput>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</screen>

	<para>Ekkor a lapolvasó megjelenik a SCSI
	  eszközök felsorolásában:</para>

	<screen>&prompt.root; <userinput>camcontrol devlist</userinput>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</screen>

	<para>A SCSI eszközökrõl további
	  leírásokat a &man.scsi.4; és
	  &man.camcontrol.8; man oldalakon találhatunk.</para>

      </sect3>
    </sect2>

    <sect2>
      <title>A SANE beállítása</title>

      <para>A <application>SANE</application> rendszere két
	részre oszlik: a backendekre (<package>graphics/sane-backends</package>) és a
	frontendekre (<package>graphics/sane-frontends</package>).  Ezek
	közül maguk a backendek szolgáltatják a
	lapolvasó
	hozzáférhetõségét.  A
	<application>SANE</application> által <link xlink:href="http://www.sane-project.org/sane-supported-devices.html">ismert
	eszközeinek</link> listájából
	kifürkészhetjük, hogy lapolvasónkat
	melyik backenden keresztül érhetjük el.  Az
	eszköz megfelelõ használatához
	döntõ fontosságú
	megállapítani a hozzá tartozó
	backendet.  A frontendek között találjuk meg a
	lapolvasást felügyelõ grafikus felületeket
	(mint például az
	<application>xscanimage</application>).</para>

      <para>Elsõként telepítsük a <package>graphics/sane-backends</package> portot vagy
	csomagot.  Ezután ellenõrizzük, hogy a
	<application>SANE</application> felismeri a lapolvasót,
	és ehhez adjuk ki a <command>sane-find-scanner</command>
	parancsot:</para>

      <screen>&prompt.root; <userinput>sane-find-scanner -q</userinput>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</screen>

      <para>A kimenetében jelzi a felületet, amin a
	lapolvasó csatlakozik, valamint a
	hozzá tartozó eszközleírót.  A
	gyártó neve és a termék
	típusa nem minden esetben jelenik meg, de ez nem is
	annyira fontos.</para>

      <note>
	<para>Némely USB-s lapolvasók esetén
	  még egy firmware-t is be kell töltenünk,
	  amirõl bõvebben a backendhez tartozó man
	  oldalokon olvashatunk.  Ajánlott még elolvasni a
	  &man.sane-find-scanner.1; és &man.sane.7; man oldalakat
	  is.</para>
      </note>

      <para>Most pedig nézzük meg, hogy vajon a frontend is
	be tudja-e azonosítani a lapolvasónkat.
	Alapértelmezés szerint a
	<application>SANE</application> backendjéhez tartozik
	még egy &man.scanimage.1; nevû segédprogram
	is, aminek segítségével listázni
	tudjuk a használható eszközöket
	és képeket tudunk beolvasni parancssorból.
	Közülük a <option>-L</option> kapcsoló
	listáz:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</screen>

      <para>Vagy ha a <xref linkend="scanners-kernel-usb"/>ban
	szereplõ USB lapolvasóval nézzük:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>
device 'epson2:libusb:/dev/usb:/dev/ugen0.2' is a Epson GT-8200 flatbed scanner</screen>

      <para>Ezt a kimenetet egy &os;&nbsp;8.<replaceable>X</replaceable>
	rendszeren kaptuk, ahol a
	<literal>'epson2:libusb:/dev/usb:/dev/ugen0.2'</literal> az
	eszközhöz tartozó backendet
	(<literal>epson2</literal>) és
	eszközleírót
	(<literal>/dev/ugen0.2</literal>) adja meg.</para>

      <note>
	<para>Ha ennek eredményeképpen semmi sem jelenik
	  meg, vagy a &man.scanimage.1; látszólag nem
	  talált semmilyen eszközt, akkor a lapolvasó
	  azonosítása nem sikerült.  Ilyen esetekben
	  valószínûleg módosítanunk
	  kell a backend beállításait
	  tartalmazó állományt a használni
	  kívánt lapolvasó eszköz szerint.  A
	  backendek beállításait a <filename>/usr/local/etc/sane.d/</filename>
	  könyvtárban találjuk.  Ez a probléma
	  bizonyos USB-s lapolvasók esetében
	  jelentkezik.</para>

	<para>Például, ha <xref linkend="scanners-kernel-usb"/>ban használt USB-s
	  lapolvasónkat &os;&nbsp;8.<replaceable>X</replaceable>
	  alatt tökéletesen felismeri a rendszer, de a &os;
	  korábbi változatai esetén (ahol a
	  &man.uscanner.4; eszközmeghajtót
	  használják) a
	  <command>sane-find-scanner</command> parancs a
	  következõket adja vissza:</para>

	<screen>&prompt.root; <userinput>sane-find-scanner -q</userinput>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</screen>

	<para>Akkor a lapolvasót sikerült megtalálni,
	  és láthatjuk, hogy USB-n keresztül
	  csatlakozik és a <filename>/dev/uscanner0</filename>
	  eszközleíró tartozik hozzá.  Most
	  már ellenõrizhetjük a lapolvasó helyes
	  beazonosítását is:</para>

	<screen>&prompt.root; <userinput>scanimage -L</userinput>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</screen>

	<para>Az üzenet fordítása:</para>

	<screen>
Nincs azonosítható lapolvasó.  Ha nem erre számítottunk, akkor ellenõrizzük,
hogy az eszközt tényleg bekapcsoltuk, csatlakoztattuk és észlelte a
sane-find-scanner segédprogram (amennyiben szükséges).  Kérjük, olvassa el a
szoftverhez tartozó dokumentációt (README, FAQ, man oldalak)!
</screen>

	<para>Mivel a lapolvasót nem sikerült
	  azonosítani, át kell írnunk a
	  <filename>/usr/local/etc/sane.d/epson2.conf</filename>
	  állományt.  A használt lapolvasó
	  típusa &epson.perfection;&nbsp;1650, ezért
	  hozzá az <literal>epson2</literal> backendet fogjuk
	  használni.  Ehhez feltétlenül olvassuk el a
	  konfigurációs állományban
	  található megjegyzéseket is.  A sorokat
	  igen könnyû átírni: tegyük
	  megjegyzésbe az összes olyat, ahol a
	  lapolvasónk számára nem megfelelõ
	  felületek találhatóak (a mi esetünkben
	  tehát megjegyzésbe fogjuk tenni az összes
	  <literal>scsi</literal> szóval kezdõdõ sort,
	  hiszen nekünk USB-s eszközünk van), majd az
	  állomány végére írjuk be a
	  használni kívánt felületet és
	  eszközleírót.  Ez ebben a konkrét
	  esetben ennyi lenne:</para>

	<programlisting>usb /dev/uscanner0</programlisting>

	<para>A megfelelõ formátum és a
	  további részletek leírásához
	  ne felejtsük el azonban elolvasni a backend
	  konfigurációs állományában
	  felbukkanó megjegyzéseket és az ide
	  tartozó man oldalt sem.  Most már
	  megpróbálkozhatunk újra a
	  lapolvasó azonosításával:</para>

	<screen>&prompt.root; <userinput>scanimage -L</userinput>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</screen>

	<para>Láthatjuk, hogy az USB-s lapolvasónkat
	  sikerült azonosítani.  Nem számít,
	  ha esetleg nem egyezne a valósággal a
	  gyártó vagy a típus
	  megjelölése.  Itt a valóban lényeges
	  elem az <literal>`epson:/dev/uscanner0'</literal> mezõ
	  lesz, melynek a backend és az
	  eszközleíró nevét kell helyesen
	  tartalmaznia.</para>
      </note>

      <para>A beállítást akkor zárhatjuk le,
	miután a <command>scanimage -L</command> parancs
	képes észlelni a lapolvasót.  A eszköz
	ekkor már készen áll a
	beolvasásra.</para>

      <para>Míg a &man.scanimage.1; parancssorból teszi
	lehetõvé számunkra a lapolvasást,
	addig érdemesebb a képek olvasását
	egy grafikus felületen keresztül
	végeznünk.  A <application>SANE</application> egy
	egyszerû, ám hatékony grafikus felületet
	ajánl fel ehhez, ez az
	<application>xscanimage</application> (<package>graphics/sane-frontends</package>).</para>

      <para>Az <application>Xsane</application> (<package>graphics/xsane</package>) egy másik
	népszerû grafikus frontend.
	Segítségével speciális
	lehetõségeket is kihasználhatunk, mint
	például többféle
	képolvasási mód
	(fénymásoló, fax stb.),
	színkorrekció, kötegelt beolvasás,
	stb.  Mind a két említett alkalmazás
	elérhetõ a <application>The GIMP</application>
	bõvítményeként is.</para>
    </sect2>

    <sect2>
      <title>A lapolvasó használatának
	engedélyezése más
	felhasználók számára</title>

      <para>A korábban tárgyalt mûveletek
	mindegyikét <systemitem class="username">root</systemitem>
	felhasználóként tudjuk csak
	végrehajtani.  Azonban elõfordulhat, hogy más
	felhasználók számára is
	szeretnénk hozzáférést
	biztosítani a lapolvasóhoz.  Ehhez az
	érintett felhasználóknak a
	lapolvasóhoz tartozó
	eszközleíróhoz olvasási és
	írás joggal kell rendelkezniük.
	Például az USB-s lapolvasónk a
	<filename>/dev/ugen0.2</filename>
	eszközleírót használja, amely
	valójában csak a
	<filename>/dev/usb/0.2.0</filename>
	eszközleíróra mutató szimbolikus link
	(ezt gyorsan le tudjuk ellenõrizni, ha
	megnézzük a <filename>/dev</filename> könyvtár
	tartalmát).  Az eszközleíró és
	a rá mutató szimbolikus link rendre a
	<systemitem class="groupname">wheel</systemitem> és
	<systemitem class="groupname">operator</systemitem> csoportok birtokában van.
	Ha a <systemitem class="username"><replaceable>pgj</replaceable></systemitem>
	nevû felhasználót felvesszük ezekbe a
	csoportokba, akkor ezáltal hozzá tud majd
	férni a lapolvasóhoz.  Nyilvánvaló
	biztonsági megfontolásokból azonban
	kétszer is javasolt meggondolni, mely
	felhasználókat mely csoportokba vesszük fel,
	különösen, ha <systemitem class="groupname">wheel</systemitem>
	csoportról van szó.  Ennél valamivel jobb
	megoldást kínál, ha létrehozunk
	külön az USB eszközök
	használatára vonatkozó csoportot és
	a lapolvasót ezen csoport tagjainak számára
	elérhetõvé tesszük.</para>

	<para>Tehát erre a célra például
	  megalkotjuk a
	  <systemitem class="groupname"><replaceable>usb</replaceable></systemitem>
	  csoportot.  Ehhez elsõ lépésként a
	  &man.pw.8; parancs segítségével hozzuk
	  létre magát a csoportot:</para>

	<screen>&prompt.root; <userinput>pw groupadd usb</userinput></screen>

	<para>Ezután a <filename>/dev/usb/0.2.0</filename>
	  eszközleírót és a rá
	  mutató <filename>/dev/ugen0.2</filename> szimbolikus
	  linket kell az <systemitem class="groupname">usb</systemitem> csoport
	  részére elérhetõvé
	  tennünk, a megfelelõ írási
	  engedélyekkel (<literal>0660</literal> vagy
	  <literal>0664</literal>) együtt, mivel
	  alapértelmezetten csak a tulajdonosuk
	  (<systemitem class="username">root</systemitem>) tudja írni ezeket.  Mindezt
	  úgy tudjuk megtenni, ha az
	  <filename>/etc/devfs.rules</filename>
	  állományhoz hozzáadjuk a megfelelõ
	  sorokat:</para>

      <programlisting>[system=5]
add path ugen0.2 mode 0660 group usb
add path usb/0.2.0 mode 0660 group usb</programlisting>

      <para>A &os;&nbsp;7.<replaceable>X</replaceable> változatok
	esetén valószínûleg a
	következõ sorokra lesz szükségünk a
	<filename>/dev/uscanner0</filename>
	eszközleíróhoz:</para>

      <programlisting>[system=5]
add path uscanner0 mode 0660 group usb</programlisting>

      <para>Ezt követõen az <filename>/etc/rc.conf</filename>
	állományba írjuk be az alábbi sort
	és utána indítsuk újra a
	számítógépet:</para>

      <programlisting>devfs_system_ruleset="system"</programlisting>

      <para>Az itt szereplõ sorok pontos
	jelentésérõl a &man.devfs.8; man
	oldaláról
	tájékozódhatunk.</para>

      <para>Ezután már csak fel kell vennünk azokat a
	felhasználókat a
	<systemitem class="groupname"><replaceable>usb</replaceable></systemitem> csoportba,
	amelyeknek engedélyezzük a lapolvasó
	használatát:</para>

      <screen>&prompt.root; <userinput>pw groupmod usb -m pgj</userinput></screen>

      <para>A további részletekrõl a &man.pw.8; man
	oldalon olvashatunk.</para>
    </sect2>
  </sect1>
</chapter>
