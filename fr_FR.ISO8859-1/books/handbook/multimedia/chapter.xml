<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Original revision: 1.128
-->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="multimedia">
 <info><title>Multimédia</title>
  <authorgroup>
   <author><personname><firstname>Ross</firstname><surname>Lippert</surname></personname><contrib>Mise en forme par </contrib></author>
  </authorgroup>
 </info>

 
 &trans.a.fonvieille;
  <sect1 xml:id="multimedia-synopsis">
  <title>Synopsis</title>

    <para>FreeBSD supporte une grande variété de cartes son, vous
      permettant d'obtenir un son haute fidélité &agrave; partir
      de votre ordinateur.  Ceci inclut la possibilité d'enregistrer et
      de jouer les formats &ldquo;MPEG Audio Layer 3&rdquo; (MP3), WAV et Ogg
      Vorbis aussi bien que de nombreux autres formats.  Le catalogue de
      logiciels portés de FreeBSD contient également des
      applications vous permettant d'éditer vos enregistrements,
      rajouter des effets sonores, et contrôler des
      périphériques MIDI.</para>

    <para>Avec un peu d'expérimentation,
      FreeBSD pourra lire des fichiers vidéo et des DVDs.  Le
      nombre d'applications pour encoder, convertir, et lire divers
      supports vidéo est plus limité que le
      nombre d'applications équivalentes dans le domaine
      du son.  Par exemple au
      moment de l'écriture de ces lignes, il n'existe pas de
      bonne application d'encodage dans le catalogue des logiciels
      portés de FreeBSD, qui pourra être utilisée pour
      convertir d'un format &agrave; un autre, comme peut le faire pour
      le son le programme <package>audio/sox</package>.  Cependant, le paysage
      logiciel dans ce domaine évolue rapidement.</para>

    <para>Ce chapitre décrira les étapes
      nécessaires pour configurer votre carte son.  La configuration
      et l'installation d'X11
      (<xref linkend="x11"/>) ont
      déj&agrave; pris soin des problèmes matériel
      de votre carte vidéo, bien qu'il puisse y avoir quelques
      réglages &agrave; ajuster pour obtenir une meilleure
      lecture des vidéos.</para>

    <para>Après la lecture de ce chapitre, vous connaîtrez:</para>

    <itemizedlist>
      <listitem>
        <para>Comment configurer votre système afin que votre
	  carte son soit reconnue.</para>
      </listitem>

      <listitem>
        <para>Les méthodes pour tester le fonctionnement de votre
	  carte.</para>
      </listitem>

      <listitem>
        <para>Comment faire face aux problèmes de configuration
	  de votre carte son.</para>
      </listitem>

      <listitem>
        <para>Comment jouer et encoder des MP3s.</para>
      </listitem>

      <listitem>
        <para>Comment la vidéo est supportée par
	  X11.</para>
      </listitem>

      <listitem>
        <para>Quelques logiciels portés qui donnent de bon
	  résultats pour lire/encoder de la vidéo.</para>
      </listitem>

      <listitem>
	<para>Comment lire des DVDs, des fichiers <filename>.mpg</filename> et
	  <filename>.avi</filename>.</para>
      </listitem>

      <listitem>
	<para>Comment extraire l'information présente sur des
	  CDs et des DVDs.</para>
      </listitem>

      <listitem>
	<para>Comment configurer une carte TV.</para>
      </listitem>

      <listitem>
	<para>Comment configurer un scanner.</para>
      </listitem>
    </itemizedlist>

    <para>Avant de lire ce chapitre, vous devrez:</para>

    <itemizedlist>
      <listitem><para>Savoir comment configurer et installer un
        nouveau noyau (<xref linkend="kernelconfig"/>).</para></listitem>
    </itemizedlist>

    <warning>
      <para>Essayer de monter des CDs audio avec
	la commande &man.mount.8; aura pour résultat
	une erreur, au moins, et une <emphasis>panique du
	noyau</emphasis>, au pire.  Ces supports ont des codages
	spécifiques qui diffèrent du système
	de fichiers ISO classique.</para>
    </warning>

  </sect1>

  <sect1 xml:id="sound-setup">
    <info><title>Configurer une carte son</title>
      <authorgroup>
        <author><personname><firstname>Moses</firstname><surname>Moore</surname></personname><contrib>Contribution de </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname><contrib>Augmentée pour &os;&nbsp;5.X par </contrib></author>
      </authorgroup>
    </info>

    

  <sect2 xml:id="sound-device">
    <title>Configuration du système</title>

    <indexterm><primary>PCI</primary></indexterm>
    <indexterm><primary>ISA</primary></indexterm>
    <indexterm><primary>cartes son</primary></indexterm>
    <para>Avant que vous commenciez, vous devriez connaître le
      modèle de carte son que vous avez, la puce qu'elle utilise, et si
      c'est une carte PCI ou ISA.  FreeBSD supporte une grande
      variété de cartes PCI et ISA.
      Consultez la liste des périphériques audio
      supportés des <link xlink:href="&rel.current.hardware;">notes
      de compatibilité matériel</link> pour voir si
      votre carte est supportée.  Ces notes indiqueront
      également quel pilote supporte votre carte.</para>

    <indexterm>
      <primary>noyau</primary>
      <secondary>configuration</secondary>
    </indexterm>

    <para>Pour utiliser votre carte son, vous devrez charger le pilote
      de périphérique approprié.  Cela peut être
      fait de deux façons.  La plus simple est de charger le module pour
      votre carte son avec &man.kldload.8;, ce qui peut être
      soit fait &agrave; partir de la ligne de commande:</para>

    <screen>&prompt.root; <userinput>kldload snd_emu10k1</userinput></screen>

    <para>soit en ajoutant la ligne appropriée dans le fichier
      <filename>/boot/loader.conf</filename> comme cela:</para>

    <programlisting>snd_emu10k1_load="YES"</programlisting>

    <para>Ces exemples concernent la carte Creative &soundblaster;
      Live!.  Les autres modules son chargeables sont listés dans
      <filename>/boot/defaults/loader.conf</filename>.  Si vous
      n'êtes pas sûr du pilote &agrave; utiliser, vous
      pouvez tenter de charger le pilote
      <filename>snd_driver</filename>:</para>

    <screen>&prompt.root; <userinput>kldload snd_driver</userinput></screen>

    <para>C'est un méta-pilote
      chargeant directement les pilotes les plus courants.  Cela
      accélère la recherche du pilote
      adapté.  Il est également possible de charger
      l'intégralité des pilotes de cartes son en
      utilisant le système
      <filename>/boot/loader.conf</filename>.</para>

    <para>Si vous voulez connaître le pilote
      sélectionné lors du chargement du
      méta-pilote <filename>snd_driver</filename>, vous pouvez
      consulter le fichier <filename>/dev/sndstat</filename> &agrave;
      cet effet, et cela &agrave; l'aide de la commande <command>cat
      /dev/sndstat</command>.</para>

    <para>Une seconde méthode est de compiler le
      support pour votre carte son en statique dans votre noyau.  La
      section ci-dessous fournit les informations nécessaires pour
      ajouter le support de votre matériel de cette manière.
      Pour plus d'informations au sujet de la recompilation de votre noyau,
      veuillez consulter le <xref linkend="kernelconfig"/>.</para>

    <sect3>
      <title>Configurer un noyau sur mesure avec support du
	son</title>

      <para>La première chose &agrave; effectuer est d'ajouter
	au noyau le pilote de périphérique audio
	générique &man.sound.4;; pour cela vous devrez
	ajouter la ligne suivante au fichier de configuration du
	noyau:</para>

      <programlisting>device sound</programlisting>

      <para>Ensuite, vous devez ajouter le support pour votre carte
	son.  Par conséquent, vous devez savoir quel pilote
	supporte la carte.  Consultez la liste des
	périphériques audio supportés des <link xlink:href="&rel.current.hardware;">notes de compatibilité
	matériel</link> pour déterminer le pilote
	correct pour votre carte son.  Par exemple, une carte son
	Creative &soundblaster; Live! est supportée par le
	pilote &man.snd.emu10k1.4;.  Pour ajouter le support pour
	cette carte, utilisez ce qui suit:</para>

      <programlisting>device snd_emu10k1</programlisting>

      <para>Assurez-vous de lire la page de manuel du pilote pour la
	syntaxe &agrave; utiliser.  La syntaxe de la configuration
	du noyau pour chaque pilote de carte son supportée
	peut être également trouvée dans
	le fichier <filename>/usr/src/sys/conf/NOTES</filename>.</para>

      <para>Les cartes son ISA non-PnP pourront nécessiter de
	fournir au noyau des informations sur le paramétrage de
	la carte (IRQ, port d'E/S, etc.), comme c'est en général le
	cas pour toutes les cartes ISA non-PnP.  Cela s'effectue par
	l'intermédiaire du fichier
	<filename>/boot/device.hints</filename>.  Au démarrage
	du système, le chargeur (&man.loader.8;) lira ce
	fichier et passera les paramètres au noyau.  Par
	exemple, une vieille carte ISA non-PnP Creative &soundblaster;
	16 utilisera le pilote &man.snd.sbc.4; de paire avec <literal>snd_sb16</literal>, on ajoutera alors la ligne suivante
	au fichier de configuration du noyau:</para>

      <programlisting>device snd_sbc
device snd_sb16</programlisting>

      <para>avec également ceci dans le fichier
	<filename>/boot/device.hints</filename>:</para>

      <programlisting>hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</programlisting>

      <para>Dans ce cas, la carte utilise le port d'E/S
	<literal>0x220</literal> et l'IRQ <literal>5</literal>.</para>

      <para>La syntaxe utilisée dans le fichier
	<filename>/boot/device.hints</filename> est abordée
	dans la page de manuel du pilote &man.sound.4; ainsi que celle
	du pilote spécifique &agrave; la carte son.</para>

      <para>Les paramètres donnés ci-dessus sont ceux
	par défaut.  Dans certains cas, vous pouvez avoir
	besoin de modifier l'IRQ ou tout autre paramètre en
	fonction de votre carte son.  Consultez la page de manuel
	&man.snd.sbc.4; pour plus d'informations au sujet de cette
	carte.</para>
    </sect3>
  </sect2>

  <sect2 xml:id="sound-testing">
    <title>Tester la carte son</title>

    <para>Après avoir redémarré avec le noyau
      modifié, ou après avoir chargé le module
      nécessaire, la carte son devrait apparaître dans le
      tampon des messages du système (&man.dmesg.8;) d'un
      manière proche de la suivante:</para>

    <screen>pcm0: &lt;Intel ICH3 (82801CA)&gt; port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: &lt;Cirrus Logic CS4205 AC97 Codec&gt;</screen>

    <para>L'état de la carte son peut être
      contrôlée par l'intermédiaire du fichier
      <filename>/dev/sndstat</filename>:</para>

    <screen>&prompt.root; <userinput>cat /dev/sndstat</userinput>
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: &lt;Intel ICH3 (82801CA)&gt; at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)</screen>

    <para>Le résultat pourra être différent sur
      votre système.  Si aucun périphérique
      <filename>pcm</filename> n'apparaît, retournez en
      arrière et revoyez ce qui a été fait
      précédemment.  Contrôlez &agrave; nouveau votre
      fichier de configuration du noyau et vérifiez que vous
      avez choisi le périphérique correct.  Les
      problèmes courants sont listés dans la
      <xref linkend="troubleshooting"/>.</para>

    <para>Si tout va bien, vous devriez avoir maintenant une carte son
      qui fonctionne.  Si la sortie audio de votre lecteur de CD-ROM ou de DVD-ROM est
      correctement reliée &agrave; votre carte son, vous pouvez
      introduire un CD dans le lecteur et le jouer avec
      &man.cdcontrol.1;:</para>

      <screen>&prompt.user; <userinput>cdcontrol -f /dev/acd0 play 1</userinput></screen>

    <para>Diverses applications, comme <package>audio/workman</package> offrent une meilleure
      interface.  Vous pouvez vouloir installer une application
      comme <package>audio/mpg123</package> pour
      écouter des fichiers audio MP3.</para>

    <para>Une autre méthode
      rapide pour tester la carte est d'envoyer des données au
      <filename>/dev/dsp</filename>, de la manière
      suivante:</para>

    <screen>&prompt.user; <userinput>cat filename &gt; /dev/dsp</userinput></screen>

    <para>où <replaceable>filename</replaceable> peut
      être n'importe quel fichier.  Cette ligne de commande
      devrait produire des sons, confirmant le bon fonctionnement de
      la carte son.</para>

    <para>Les niveaux du mixer de la carte son peuvent être
      modifiés par la commande &man.mixer.8;.  Plus de
      détails peuvent être trouvés dans la page de
      manuel &man.mixer.8;.</para>

    <sect3 xml:id="troubleshooting">
      <title>Problèmes courants</title>

      <indexterm><primary>fichiers spéciaux de
	périphérique</primary></indexterm>
      <indexterm><primary>port d'E/S</primary></indexterm>
      <indexterm><primary>IRQ</primary></indexterm>
      <indexterm><primary>DSP</primary></indexterm>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="2">
	  <thead>
	    <row>
	     <entry>Erreur</entry>
	      <entry>Solution</entry>
	    </row>
          </thead>

	  <tbody>
            <row>
              <entry><errorname>sb_dspwr(XX) timed out</errorname></entry>
              <entry><para>Le port d'E/S n'est pas configuré
	        correctement.</para></entry>
            </row>

            <row>
              <entry><errorname>bad irq XX</errorname></entry>
	      <entry><para>L'IRQ sélectionnée est incorrecte.
		Vérifiez que l'IRQ choisie et l'IRQ de la carte son sont
		les mêmes.</para></entry>
            </row>

            <row>
              <entry><errorname>xxx: gus pcm not attached, out of
    	        memory</errorname></entry>
              <entry><para>Il n'y a pas suffisamment de mémoire
	        disponible pour utiliser ce périphérique.</para></entry>
            </row>

            <row>
              <entry><errorname>xxx: can't open /dev/dsp!</errorname></entry>
              <entry><para>Vérifiez avec la commande
		<command>fstat | grep dsp</command> si une autre
		application maintient le périphérique ouvert.
		Souvent &agrave; l'origine de ce type de problème on
		trouve <application>esound</application> et le support son de <application>KDE</application>.</para></entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect3>
  </sect2>

  <sect2 xml:id="sound-multiple-sources">
    <info><title>Utiliser des sources sonores multiples</title>
     <authorgroup>
      <author><personname><firstname>Munish</firstname><surname>Chopra</surname></personname><contrib>Contribution de </contrib></author>
     </authorgroup>
    </info>
    

    <para>Il est souvent intéressant de pouvoir jouer
      simultanément du son &agrave; partir de multiples
      sources, comme lorsque <application>esound</application> ou
      <application>artsd</application> ne supportent pas le partage du
      périphérique son avec certaines applications.</para>

    <para>FreeBSD vous permet de le faire par l'intermédiaire
      de <emphasis>Canaux Sonores Virtuels</emphasis>, qui peuvent
      être activés avec la fonction &man.sysctl.8;.  Les canaux
      virtuels vous permettent de multiplexer la sortie de
      votre carte son en mixant le son au niveau du noyau.</para>

    <para>Pour configurer le nombre de canaux virtuels, il existe deux
      paramètres de sysctl qui, si vous avez les privilèges
      de l'utilisateur <systemitem class="username">root</systemitem>, peuvent
      être configurés comme ceci:</para>
    <screen>&prompt.root; <userinput>sysctl hw.snd.pcm0.vchans=4</userinput>
&prompt.root; <userinput>sysctl hw.snd.maxautovchans=4</userinput></screen>

    <para>L'exemple ci-dessus alloue quatre canaux virtuels, ce qui est
      un nombre suffisant pour une utilisation classique.
    <varname>hw.snd.pcm0.vchans</varname> est le nombre de canaux
      virtuels que possède <filename>pcm0</filename>,
      et est configurable une fois que le périphérique
      a été attaché au système.
      <literal>hw.snd.maxautovchans</literal> est le nombre de canaux
      virtuels alloués &agrave; un nouveau
      périphérique audio quand il est attaché
      &agrave; l'aide de &man.kldload.8;.  Comme le module
      <filename>pcm</filename> peut être chargé
      indépendamment des pilotes de périphériques,
      <literal>hw.snd.maxautovchans</literal> peut stocker combien de
      canaux virtuels seront alloués &agrave; chaque
      périphérique attaché par la suite.</para>

    <note>
      <para>Vous ne pouvez pas modifier le nombre de canaux virtuels
	pour un périphérique en cours d'utilisation.
	Quittez avant tout autre chose les programmes utilisant le
	périphérique en question, comme les lecteurs de
	fichiers sonores ou les <quote>daemons</quote> audios.</para>
    </note>

    <para>Si vous n'utilisez pas &man.devfs.5;, vous devrez faire
      pointer vos applications sur
      <filename>/dev/dsp0</filename>.<replaceable>x</replaceable>,
      où <replaceable>x</replaceable> est 0 &agrave; 3 si
      <varname>hw.snd.pcm.0.vchans</varname> est fixé &agrave; 4.
      Sur un système utilisant &man.devfs.5;, ce qui
      précède sera automatiquement effectué
      de façon transparente pour le programme qui
      réclame le périphérique
      <filename>/dev/dsp0</filename>.</para>
   </sect2>

    <sect2>
      <info><title>Définir les valeurs par défaut du mixeur
	des différents canaux</title>
	<authorgroup>
	  <author><personname><firstname>Josef</firstname><surname>El-Rayes</surname></personname><contrib>Contribution de </contrib></author>
	</authorgroup>
      </info>

      

      <para>Les valeurs par défaut du mixeur des
	différents canaux sont fixées en dur dans le
	code source du pilote &man.pcm.4;.  Il existe plusieurs
	applications et &ldquo;daemons&rdquo; qui vous permettent de
	fixer les valeurs du mixeur qui seront mémorisées entre
	chaque invocation, mais
	ce n'est pas une solution idéale.  Il est possible
	régler les valeurs par défaut au niveau du
	pilote &mdash; ceci se fait en définissant les valeurs
	adéquates dans le fichier
	<filename>/boot/device.hints</filename>.  Par exemple:</para>

      <programlisting>hint.pcm.0.vol="50"</programlisting>

      <para>Cela fixera le volume du canal &agrave; une valeur par
	défaut de 50; dès que le module &man.pcm.4; est
	chargé.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="sound-mp3">
    <info><title>Fichiers MP3</title>
      <authorgroup>
	<author><personname><firstname>Chern</firstname><surname>Lee</surname></personname><contrib>Contribution de </contrib></author>
      </authorgroup>
      
    </info>

    

    <para>Les fichiers MP3 (MPEG Layer 3 Audio) donnent un son proche de
      la qualité d'un CD audio, il n'y a aucune raison pour que votre
      station de travail FreeBSD ne puisse pas en profiter.</para>

    <sect2 xml:id="mp3-players">
      <title>Lecteurs de MP3s</title>

      <para>De loin, le plus populaire des lecteurs MP3 pour
	X11 est
        <application>XMMS</application> (X Multimedia System). Les
	thèmes (skins) de <application>Winamp</application> peuvent
	être utilisés avec <application>XMMS</application>
	dès lors que l'interface est quasiment identique &agrave; celle
	du <application>Winamp</application> de Nullsoft.
	<application>XMMS</application> dispose aussi d'un support natif
	pour modules externes (plug-in).</para>

      <para><application>XMMS</application> peut être installé
	&agrave; partir du catalogue de logiciels portés
	<package>multimedia/xmms</package> ou de la version
	pré-compilée.</para>

      <para>L'interface d'<application>XMMS</application> est intuitive,
        avec une liste de lecture, un égaliseur graphique, et plus.
	Ceux qui sont familiers avec <application>Winamp</application>
	trouveront <application>XMMS</application> simple
	d'utilisation.</para>

      <para>Le logiciel porté <package>audio/mpg123</package> est une alternative, un
        lecteur de MP3 en ligne de commande.</para>

      <para><application>mpg123</application> peut être utilisé en
	spécifiant le périphérique sonore et le fichier
	MP3 sur la ligne de commande, comme montré ci-dessous:</para>

      <screen>&prompt.root; <userinput>mpg123 -a /dev/dsp1.0 Foobar-GreatestHits.mp3</userinput>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!





Playing MPEG stream from Foobar-GreastestHits.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo
</screen>

      <para><literal>/dev/dsp1.0</literal> devrait être remplacé
	par le périphérique <filename>dsp</filename>
	correspondant sur votre système.</para>

    </sect2>

    <sect2 xml:id="rip-cd">
      <title>Extraire les pistes de CDs Audio</title>

      <para>Avant d'encoder la totalité d'un CD ou une piste en MP3, les
	données audio doivent être extraites et
	transférées sur le disque dur.  Cela se fait en copiant
	les données brutes CDDA (CD Digital Audio) en fichiers WAV.</para>

      <para>L'utilitaire <command>cdda2wav</command>, qui fait partie de
	la suite <package>sysutils/cdrtools</package>,
	est utilisé pour extraire les données audio de CDs et les
	informations rattachées.</para>

      <para>Avec le CD audio dans le lecteur, la commande suivante peut
	être utilisée (en tant que <systemitem class="username">root</systemitem>) pour
	convertir l'intégralité d'un CD en fichiers WAV (un par
	piste):</para>

      <screen>&prompt.root; <userinput>cdda2wav -D 0,1,0 -B</userinput></screen>

      <para><application>cdda2wav</application> supportera également les
	lecteurs de CDROM ATAPI (IDE).  Pour faire l'extraction &agrave; partir
	d'un lecteur IDE, précisez le nom du périphérique
	&agrave; la place de l'unité SCSI.  Par exemple, pour extraite
	la piste 7 &agrave; partir d'un lecteur IDE:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D /dev/acd0 -t 7</userinput></screen>

      <para>Le <option>-D <replaceable>0,1,0</replaceable></option>
	spécifie le périphérique SCSI
	<filename>0,1,0</filename>, qui correspond &agrave; ce qui est
	donné par la commande
	<command>cdrecord -scanbus</command>.</para>

      <para>Pour extraire des pistes individuelles, utilisez l'option
	<option>-t</option> comme ceci:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D 0,1,0 -t 7</userinput></screen>

      <para>Cet exemple extrait la septième piste du CD audio.  Pour
	extraire un ensemble de pistes, par exemple, de la piste 1 &agrave; 7,
	précisez un intervalle:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D 0,1,0 -t 1+7</userinput></screen>

      <para>L'utilitaire &man.dd.1; peut également être
	utilisé pour extraire des pistes audios &agrave; partir de
	lecteurs ATAPI, consultez la <xref linkend="duplicating-audiocds"/> pour plus d'informations sur
	cette possibilité.</para>

    </sect2>

    <sect2 xml:id="mp3-encoding">
      <title>Encoder des MP3s</title>

      <para>De nos jours, l'encodeur mp3 &agrave; utiliser est
	<application>lame</application>.
	<application>Lame</application> peut être trouvé dans le
	catalogue de logiciels portés:
	<package>audio/lame</package>.</para>

      <para>En utilisant les fichiers WAV extraits, la commande suivante
	convertira le fichier <filename>audio01.wav</filename> en
	<filename>audio01.mp3</filename>:</para>

      <screen>&prompt.root; <userinput>lame -h -b 128 \
--tt "La chanson XY" \
--ta "Artiste XY" \
--tl "Album XY" \
--ty "2001" \
--tc "Extrait et encodé par XY" \
--tg "Genre" \
audio01.wav audio01.mp3</userinput></screen>

      <para>128&nbsp;kbits semble être le taux standard actuel du débit
	audio utilisé pour les MP3s. Nombreux sont ceux qui
	préfèrent des taux de haute qualité: 160 ou 192.
	Plus le débit audio est élevé plus
	l'espace disque utilisé par le fichier MP3 sera grand mais la
	qualité sera meilleure.  L'option <option>-h</option> active le
	mode &ldquo;haute qualité, mais un peu plus lent&rdquo;.  Les
	options commençant par <option>--t</option> indiquent des
	balises ID3, qui généralement contiennent les
	informations sur le morceau, devant être
	intégrées au fichier MP3.
	D'autres informations sur l'encodage peuvent être trouvées
	en consultant la page de manuel de Lame.</para>
    </sect2>

    <sect2 xml:id="mp3-decoding">
      <title>Décoder des MP3s</title>

      <para>Afin de pouvoir graver un CD audio &agrave; partir de fichiers MP3,
	ces derniers doivent être convertis dans le format WAV non
	compressé.  <application>XMMS</application> et
	<application>mpg123</application> supportent tous les deux la
	sortie de fichiers MP3 en format de fichier non
	compressé.</para>

      <para>Ecriture sur le disque avec <application>XMMS</application>:</para>

      <procedure>
	<step>
	  <para>Lancez <application>XMMS</application>.</para>
	</step>

	<step>
	  <para>Clic-droit sur la fenêtre pour faire apparaître le
	    menu d'<application>XMMS</application>.</para>
	</step>

	<step>
	  <para>Sélectionner <literal>Preference</literal> sous
	    <literal>Options</literal>.</para>
	</step>

	<step>
	  <para>Changez l'option &ldquo;Output Plugin&rdquo; pour
	    &ldquo;Disk Writer Plugin&rdquo;.</para>
	</step>

	<step>
	  <para>Appuyez sur <literal>Configure</literal>.</para>
	</step>

	<step>
	  <para>Entrez (ou choisissez browse) un répertoire où va
	    être écrit le fichier décompressé.</para>
	</step>

	<step>
	  <para>Chargez le fichier MP3 dans <application>XMMS</application>
	    comme &agrave; l'accoutumé, avec le volume &agrave; 100% et
	    l'égaliseur (EQ settings) désactivé.</para>
	</step>

	<step>
	  <para>Appuyez sur <literal>Play</literal> &mdash;
	    <application>XMMS</application> devrait se comporter comme
	    s'il jouait le MP3, mais aucun son ne sera audible.  Il est
	    en fait en train de &ldquo;jouer&rdquo; le MP3 dans un
	    fichier.</para>
	</step>

	<step>
	  <para>Vérifiez que vous avez rétabli l'option
	    &ldquo;Output Plugin&rdquo; &agrave; sa valeur de départ
	    afin de pouvoir écouter &agrave; nouveau des MP3s.</para>
	</step>
      </procedure>

      <para>Ecriture sur le disque avec <application>mpg123</application>:</para>

      <procedure>
	<step>
	  <para>Lancez <command>mpg123 -s audio01.mp3
	    &gt; audio01.pcm</command></para>
	</step>
      </procedure>

      <para><application>XMMS</application> crée un fichier au format
	WAV, tandis que <application>mpg123</application> convertit le
	fichier MP3 en données audio PCM brutes.  Ces deux formats
	peuvent être utilisés avec
	<application>cdrecord</application> pour créer des CDs audio.
	Vous devez utiliser des fichiers PCM bruts avec
	&man.burncd.8;.  Si vous utilisez des fichiers WAV, vous
	noterez un petit parasite au début de chaque piste, ce son est
	l'entête du fichier WAV.  Vous pouvez simplement retirer
	l'entête d'un fichier WAV avec l'utilitaire
	<application>SoX</application> (il peut être installé
	&agrave; partir du logiciel porté <package>audio/sox</package> ou de la version
	pré-compilée):</para>

      <screen>&prompt.user; <userinput>sox -t wav -r 44100 -s -w -c 2 track.wav track.raw</userinput></screen>

      <para>Lisez la <xref linkend="creating-cds"/> pour plus d'informations
	sur l'utilisation d'un graveur de CD sous FreeBSD.</para>
    </sect2>
  </sect1>

 <sect1 xml:id="video-playback">
  <info><title>Lecture des Vidéos</title>
    <authorgroup>
      <author><personname><firstname>Ross</firstname><surname>Lippert</surname></personname><contrib>Contribution de </contrib></author>
    </authorgroup>
    
  </info>

  

    <para>Les applications pour lire des vidéos
      sont assez récentes et se développent
      très rapidement.  Soyez patient.  Tout ne va pas
      fonctionner aussi bien que cela pu être le cas avec
      le son.</para>

    <para>Avant que vous ne commenciez, vous devrez connaître
      le modèle de carte vidéo dont vous disposez ainsi
      que le circuit intégré qu'elle utilise.  Alors
      qu'<application>&xorg;</application> et <application>&xfree86;</application> supportent une large
      variété de cartes
      vidéo, seul un petit nombre d'entre elles donne de bonnes
      performances en lecture de vidéos.  Pour obtenir la liste
      des extensions supportées par le serveur X utilisant votre
      carte employez la commande &man.xdpyinfo.1; durant le
      fonctionnement d'X11.</para>

    <para>C'est une bonne idée d'avoir un court fichier MPEG
      qui pourra être utilisé comme fichier test pour
      évaluer divers lecteurs et leurs options.  Comme certains
      programmes de lecture de DVD chercheront un support DVD sur
      <filename>/dev/dvd</filename> par défaut, ou ont ce
      périphérique fixé définitivement dans
      leur code, vous pourrez trouver utile de créer des liens
      symboliques vers les périphériques corrects:</para>

      <screen>&prompt.root; <userinput>ln -sf /dev/acd0 /dev/dvd</userinput>
&prompt.root; <userinput>ln -sf /dev/acd0 /dev/rdvd</userinput></screen>

    <para>Notez qu'en raison de la nature du système
      &man.devfs.5;, les liens créés &agrave; la main
      comme les précédents ne seront pas
      conservés si vous redémarrez le système.
      Afin de créer automatiquement les liens symboliques
      dès que vous redémarrez votre système,
      ajoutez les lignes suivantes au fichier
      <filename>/etc/devfs.conf</filename>:</para>

    <programlisting>link acd0 dvd
link acd0 rdvd</programlisting>

    <para>De plus, le décodage de DVD, qui nécessite
      de faire appel &agrave; des fonctions spéciales du
      lecteur de DVD, demande d'avoir la permission d'écrire sur les
      périphériques DVD.</para>

    <para>Pour augmenter la mémoire partagée
      pour l'interface X11, il est recommandé que les valeurs de
      certaines variables &man.sysctl.8; soient augmentées:</para>

      <programlisting>kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</programlisting>

  <sect2 xml:id="video-interface">
    <title>Déterminer les capacités vidéo</title>

    <indexterm><primary>XVideo</primary></indexterm>
    <indexterm><primary>SDL</primary></indexterm>
    <indexterm><primary>DGA</primary></indexterm>

    <para>Il y a plusieurs manières possibles pour
      afficher de la vidéo sous X11.  Ce qui fonctionnera vraiment est
      énormément dépendant du matériel.
      Chaque méthode décrite ci-dessous donnera
      différents résultats en fonction du matériel.
      De plus, le rendu de la vidéo sous X11 est un sujet recevant
      beaucoup d'attention dernièrement, et avec chaque nouvelle
      version d'<application>&xorg;</application>, ou d'<application>&xfree86;</application>, il pourra y avoir des
      améliorations significatives.</para>

    <para>Une liste des interfaces vidéo communes:</para>

    <orderedlist>
    <listitem>
      <para>X11: sortie X11 classique utilisant de la mémoire
	partagée.</para>
    </listitem>
    <listitem>
      <para>XVideo: une extension de l'interface X11 qui supporte
	la vidéo sur n'importe quelle partie de l'écran
	contrôlé par X11.</para>
    </listitem>
    <listitem>
      <para>SDL: &ldquo;Simple Directmedia Layer&rdquo; - couche simple
	d'accès directe au média.</para>
    </listitem>
    <listitem>
      <para>DGA: &ldquo;Direct Graphics Access&rdquo; - accès direct au
	graphique.</para>
    </listitem>
    <listitem>
      <para>SVGAlib: couche graphique bas niveau pour la console.</para>
    </listitem>
    </orderedlist>

    <sect3 xml:id="video-interface-xvideo">
    <title>XVideo</title>

      <para><application>&xorg;</application> et <application>&xfree86; 4.X</application> disposent d'une extension
	appelée
        <emphasis>XVideo</emphasis> (également connue sous les termes
	Xvideo, Xv, ou xv) qui permet d'afficher directement de la
	vidéo &agrave; travers une accélération
	spécifique.  Cette extension fournit une très bonne
	qualité de rendu même sur les machines bas de gamme.</para>
      <para>Pour vérifier si l'extension fonctionne utilisez
	<command>xvinfo</command>:</para>

        <screen>&prompt.user; <userinput>xvinfo</userinput></screen>

      <para>XVideo est supporté pour votre carte si le
	résultat de la commande ressemble &agrave;:</para>
<screen>X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</screen>

    <para>Notez également que les formats listés
      (YUV2, YUV12, etc...) ne sont pas présents dans chaque
      implémentation d'XVideo et leur absence pourra gêner
      certains programmes.</para>

    <para>Si le résultat ressemble &agrave;:</para>
<screen>X-Video Extension version 2.2
screen #0
no adaptors present</screen>

    <para>Alors XVideo n'est probablement pas supporté pour votre
      carte.</para>

    <para>Si XVideo n'est pas supporté pour votre carte,
      cela signifie seulement qu'il sera plus difficile pour votre
      système d'affichage de répondre aux demandes
      du rendu vidéo en termes de puissance de calcul.  En fonction
      de votre carte vidéo et de votre processeur, vous pourriez
      encore obtenir de bons résultats.  Vous devriez
      probablement vous documenter sur les méthodes pour
      améliorer les performances en lisant la <xref linkend="video-further-reading"/>.</para>

    </sect3>

    <sect3 xml:id="video-interface-SDL">
    <title>&ldquo;Simple Directmedia Layer&rdquo; - couche simple
      d'accès directe au média</title>

    <para>La couche simple d'accès directe au média, SDL,
      a été prévue pour être
      une couche de portage entre &microsoft.windows;, BeOS, et &unix;,
      permettant &agrave; des applications &ldquo;cross-platform&rdquo;
      qui font un usage efficace du son et du graphique d'être
      développées.  La couche SDL fournit une abstraction
      de bas niveau
      vers le matériel qui peut parfois être plus
      efficace que l'interface X11.</para>

    <para>La bibliothèque SDL peut être trouvée
      dans <package>devel/sdl12</package>.</para>

    </sect3>

    <sect3 xml:id="video-interface-DGA">
    <title>&ldquo;Direct Graphics Access&rdquo; - accès direct au
      graphique</title>

    <para>L'accès direct au graphique est une extension X11
      qui permet &agrave; un programme de bypasser le serveur X et
      d'accéder directement au matériel.  Comme il
      repose sur une copie bas niveau de la mémoire, les
      programmes l'utilisant doivent être
      exécutés avec les privilèges de l'utilisateur
      <systemitem class="username">root</systemitem>.</para>

    <para>L'extension DGA et ses performances peuvent être
      testées avec &man.dga.1;.  Quand <command>dga</command> est
      exécuté, il changera les couleurs de l'affichage
      &agrave; chaque appui sur une touche.  Pour quitter, utilisez la touche
      <keycap>q</keycap>.</para>

    </sect3>

  </sect2>

  <sect2 xml:id="video-ports">
    <title>Logiciels portés et pré-compilés
      relatifs &agrave; la vidéo</title>

    <indexterm><primary>logiciels portés
      vidéo</primary></indexterm>
    <indexterm><primary>logiciels pré-compilés
      vidéo</primary></indexterm>

    <para>Cette section traite des logiciels disponibles dans le
      catalogue des logiciels portés de FreeBSD qui peuvent être
      utilisés pour lire de la vidéo.  Les applications
      vidéos sont un domaine de développement très
      actif, et les capacités de diverses applications seront
      sujettes &agrave; des divergences avec la description
      donnée ici.</para>

    <para>Premièrement, il est important de savoir que plusieurs des
      applications vidéos fonctionnant sous FreeBSD ont
      été développées comme des applications pour
      Linux.  Plusieurs de ces applications sont encore
      considérées comme étant de qualité bêta.
      Parmi les problèmes que l'on peut rencontrer avec
      les applications vidéos sous &os;, nous trouvons:</para>

      <orderedlist>

      <listitem>
        <para>Une application ne peut pas lire un fichier produit par
	  une autre application.</para>
      </listitem>

      <listitem>
        <para>Une application ne peut pas lire un fichier quelle a
	  produit.</para>
      </listitem>

      <listitem>
        <para>La même application sur deux machines
	  différentes, recompilée sur chaque machine pour
	  la machine elle-même, jouera le fichier
	  différemment.</para>
      </listitem>

      <listitem>
        <para>Un filtre apparemment insignifiant comme un changement
	  d'échelle de l'image donne de très mauvais
	  résultats en raison d'une routine de changement
	  d'échelle boguée.</para>
      </listitem>

      <listitem>
        <para>Une application qui plante régulièrement.</para>
      </listitem>

      <listitem>
        <para>La documentation n'est pas installée avec le logiciel
	  porté et peut être trouvée sur Internet ou
	  dans le répertoire
          <filename>work</filename> du logiciel porté.</para>
      </listitem>

      </orderedlist>

    <para>Parmin ces applications, nombreuses sont celles qui peuvent présenter des &ldquo;Linuxismes&rdquo;.  Aussi, il y peut y avoir des problèmes
      résultants de la façon dont certaines
      bibliothèques standards sont implémentées
      dans les distributions Linux, ou certaines caractéristiques
      du noyau Linux qui ont été employées
      par les auteurs des applications.
      Ces
      problèmes ne sont pas toujours remarqués et
      contournés par les
      responsables du portage du logiciel ce qui peut mener vers
      quelques ennuis comme ceux-ci:</para>

      <orderedlist>

      <listitem>
        <para>L'utilisation de <filename>/proc/cpuinfo</filename> pour
	  détecter les caractéristiques du processeur.</para>
      </listitem>

      <listitem>
        <para>Une mauvaise utilisation des &ldquo;threads&rdquo; qui
	  provoque le blocage de programme au lieu de se terminer
	  complètement.</para>
      </listitem>

      <listitem>
        <para>Des logiciels habituellement utilisés en conjonction
	  avec l'application ne sont pas encore dans le catalogue des
	  logiciels portés.</para>
      </listitem>

      </orderedlist>

      <para>Jusqu'ici, les développeurs de ces applications ont
	été coopératifs avec les responsables
	des logiciels portés pour minimiser les modifications
	nécessaires au portage.</para>

    <sect3 xml:id="video-mplayer">
      <title>MPlayer</title>

      <para><application>MPlayer</application> est une application pour lire des
	vidéos récemment et rapidement
	développée.  Les objectifs de l'équipe
	de <application>MPlayer</application> sont la rapidité et la
	flexibilité sur
	Linux et autre &unix;.  Le projet fut démarré quand
	le fondateur de l'équipe en
	eu assez des mauvaises performances en lecture des autres
	lecteurs disponibles.  Certains diront que l'interface graphique a
	été sacrifiée pour une conception
	rationalisée.  Cependant, une fois que vous avez les options en ligne de
	commande et les combinaisons de touches en main, cela fonctionne
	très bien.</para>

      <sect4 xml:id="video-mplayer-building">
        <title>Compiler MPlayer</title>
        <indexterm><primary>mplayer</primary>
	           <secondary>compilation</secondary></indexterm>

        <para><application>MPlayer</application> réside dans <package>multimedia/mplayer</package>.
	  <application>MPlayer</application>
	  effectue un certain nombre de contrôle du
	  matériel durant le processus de compilation, il en
	  résulte un
	  binaire qui ne sera pas portable d'un système &agrave; l'autre.
	  Ainsi il est important d'utiliser le logiciel porté et de ne
	  pas utiliser un logiciel pré-compilé.
	  En plus, un certain nombre d'options peuvent être
	  spécifiées dans la ligne de commande <command>make</command>,
	  comme décrit dans le fichier <filename>Makefile</filename>
	  et au départ de la compilation:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/multimedia/mplayer</userinput>
&prompt.root; <userinput>make</userinput>
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
</screen>

	<para>Les options par défaut du logiciel porté
	  devraient être suffisantes pour la plupart des
	  utilisateurs.  Cependant si vous avez besoin du codec XviD,
	  vous devez spécifier l'option
	  <varname>WITH_XVID</varname> dans la ligne de commande.  Le
	  périphérique DVD par défaut peut
	  également être défini avec l'option
	  <varname>WITH_DVD_DEVICE</varname>, par défaut
	  <filename>/dev/acd0</filename> sera utilisé.</para>

        <para>Au moment de l'écriture de ces lignes, le logiciel
	  porté de <application>MPlayer</application> compilera sa
	  documentation HTML et deux exécutables,
	  <command>mplayer</command> et
	  <command>mencoder</command>, qui est un outil pour ré-encoder
	  de la vidéo.</para>

        <para>La documentation HTML de <application>MPlayer</application> est
	  très
	  complète.  Si le lecteur trouve l'information sur le
	  matériel vidéo et les interfaces manquante dans ce
	  chapitre, la documentation de <application>MPlayer</application> est
	  une alternative très
	  complète.  Vous devriez certainement prendre le temps de
	  lire la documentation de <application>MPlayer</application>,
	  si vous êtes &agrave; la recherche d'informations sur le support
	  vidéo sous &unix;.</para>

      </sect4>

      <sect4 xml:id="video-mplayer-using">
        <title>Utiliser MPlayer</title>
        <indexterm><primary>MPlayer</primary>
	           <secondary>utiliser</secondary></indexterm>

        <para>Chaque utilisateur de <application>MPlayer</application> doit
	  créer un
	  sous-répertoire <filename>.mplayer</filename> dans son
	  répertoire d'utilisateur.  Pour créer ce
	  sous-répertoire nécessaire, vous pouvez taper ce qui
	  suit:</para>

<screen>&prompt.user; <userinput>cd /usr/ports/multimedia/mplayer</userinput>
&prompt.user; <userinput>make install-user</userinput></screen>

	<para>Les options de commande de <command>mplayer</command> sont
	  données dans la page de manuel.  Pour plus de détails
	  il y a la documentation HTML.  Dans cette section, nous
	  décrirons que quelques unes des utilisations les plus courantes.</para>

	<para>Pour lire &agrave; un fichier, comme
	  <filename>testfile.avi</filename> en utilisant une des
	  diverses interfaces vidéo utilisez l'option
	  <option>-vo</option>:</para>

	  <screen>&prompt.user; <userinput>mplayer -vo xv testfile.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo sdl testfile.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo x11 testfile.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo dga testfile.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo 'sdl:dga' testfile.avi</userinput></screen>

	<para>Cela vaut la peine d'essayer toutes ces options, comme
	  leur performance relative dépend de nombreux facteurs
	  et variera de façon significative avec le
	  matériel.</para>

	<para>Pour lire un DVD, remplacez
	 <filename>testfile.avi</filename> par <option>dvd://<replaceable>N</replaceable> -dvd-device
	 <replaceable>DEVICE</replaceable></option> où <replaceable>N</replaceable> est
	 le numéro du titre &agrave; jouer et
	 <filename>DEVICE</filename> est
	 le fichier spécial de périphérique correspondant
	 au lecteur de DVD.  Par exemple, pour jouer le titre 3 depuis
	 <filename>/dev/dvd</filename>:</para>

	  <screen>&prompt.root; <userinput>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</userinput></screen>

	<note>
	  <para>Le périphérique DVD par défaut
	    peut être défini lors de la compilation du
	    logiciel porté <application>MPlayer</application> par
	    l'intermédiaire de l'option
	    <varname>WITH_DVD_DEVICE</varname>.  Par défaut, ce
	    périphérique est
	    <filename>/dev/acd0</filename>.  Plus de détails
	    peuvent être trouvés dans le
	    <filename>Makefile</filename> du logiciel
	    porté.</para>
	</note>

	<para>Pour arrêter, avancer, etc..., consultez
	  les combinaisons de touches, qui sont données en
	  exécutant <command>mplayer -h</command> ou lisez
	  la page de manuel.</para>

        <para>D'autres options importantes pour la lecture sont:
          <option>-fs -zoom</option> qui active le mode plein écran
          et <option>-framedrop</option> qui aide au niveau des
	  performances.</para>

	<para>Pour que la ligne de commande &agrave; taper ne devienne pas trop
	  longue, l'utilisateur peut créer un fichier
	  <filename>.mplayer/config</filename> et y fixer les options
	  par défaut:</para>
<programlisting>vo=xv
fs=yes
zoom=yes</programlisting>

	<para>Enfin, <command>mplayer</command> peut être
	  utilisé pour extraire une piste du DVD dans un fichier
	  <filename>.vob</filename>.
	  Pour récupérer la seconde piste vidéo
	  d'un DVD, tapez ceci:</para>

	  <screen>&prompt.root; <userinput>mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd</userinput></screen>

        <para>Le fichier de sortie, <filename>out.vob</filename>, sera du
	  MPEG et peut être manipulé par les autres
	  logiciels décrits dans cette section.</para>

      </sect4>
      <sect4 xml:id="video-mencoder">
        <title>mencoder</title>
        <indexterm>
	  <primary>mencoder</primary>
	</indexterm>

	<para>Avant
	  d'utiliser <command>mencoder</command> c'est une bonne
	  idée de vous familiariser avec les options données
	  par la documentation HTML.  Il existe une page de manuel, mais
	  elle n'est pas très utile sans la documentation en HTML.
	  Il y a d'innombrables façons d'améliorer la
	  qualité, diminuer le débit binaire, et
	  modifier les formats, et certaines de ces options peuvent faire
	  la différence entre de bonnes et mauvaises performances.
	  Voici quelques exemples pour y arriver.  Tout d'abord une
	  simple copie:</para>

	 <screen>&prompt.user; <userinput>mencoder input.avi -oac copy -ovc copy -o output.avi</userinput></screen>

         <para>De mauvaises combinaisons d'options peuvent conduire
	   &agrave; des fichiers illisibles
	   même par <command>mplayer</command>.  Aussi, si
	   vous voulez juste extraire un fichier, restez sur l'option
	   <option>-dumpfile</option> de <command>mplayer</command>.</para>

	 <para>Pour convertir <filename>input.avi</filename> au format MPEG4
	   avec un codage audio MPEG3 (<package>audio/lame</package> est nécessaire):</para>

	 <screen>&prompt.user; <userinput>mencoder input.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o output.avi</userinput></screen>

	 <para>Ceci a produit un fichier lisible par <command>mplayer</command>
	   et <command>xine</command>.</para>

	 <para><filename>input.avi</filename> peut être remplacé
	   par <option>dvd://1 -dvd-device /dev/dvd</option> et exécuté en tant
	   que <systemitem class="username">root</systemitem> pour ré-encoder directement un
	   titre DVD.  Puisque vous êtes susceptible de ne pas
	   être satisfait du résultat la première fois, il
	   est recommandé d'extraire le titre vers un fichier et de
	   travailler sur le fichier.</para>
      </sect4>
    </sect3>

    <sect3 xml:id="video-xine">
    <title>Le lecteur xine</title>

    <para>Le lecteur <application>xine</application> est un projet de grande
      envergure visant non seulement
      &agrave; être une solution vidéo tout-en-un, mais
      également de produire une bibliothèque de base
      réutilisable et un exécutable modulaire qui peut
      être étendu grâce &agrave; des greffons.
      Il est fourni sous forme
      pré-compilée et de logiciel porté, <package>multimedia/xine</package>.</para>

    <para>Le lecteur <application>xine</application>
      est encore un peu brut, mais c'est
      clairement un bon début.  Dans la pratique,
      <application>xine</application> demande soit un
      processeur rapide avec une carte vidéo rapide, soit
      l'extension XVideo.  L'interface graphique est utilisable, mais
      peu pratique.</para>

    <para>Au moment de l'écriture de ces lignes, il n'y a pas
      de module d'entrée fourni avec <application>xine</application>
      qui lira les DVDs codés
      en CSS.  Il existe des versions tiers qui ont des modules
      &agrave; cet effet intégrés, mais aucune de ces
      dernières ne se trouve dans le catalogue des logiciels
      portés de FreeBSD.</para>

    <para>Comparé &agrave; <application>MPlayer</application>,
      <application>xine</application> fait plus pour l'utilisateur,
      mais au même moment, rend inaccessible &agrave; l'utilisateur
      certains contrôles bien précis.  Le lecteur
      <application>xine</application> se comporte le mieux
      sur les interfaces XVideo.</para>

    <para>Par défaut, le lecteur <application>xine</application>
      lancera une interface graphique.  Les menus peuvent alors
      être utilisés pour ouvrir un fichier précis:</para>

      <screen>&prompt.user; <userinput>xine</userinput></screen>

    <para>Alternativement, le lecteur peut être invoqué
      pour jouer directement un fichier sans l'interface
      graphique avec la commande:</para>

      <screen>&prompt.user; <userinput>xine -g -p mymovie.avi</userinput></screen>

    </sect3>

    <sect3 xml:id="video-ports-transcode">
    <title>Les utilitaires transcode</title>

    <para>Le logiciel <application>transcode</application> n'est pas un
      lecteur, mais une suite d'outils pour
      ré-encoder les fichiers audio et vidéo.
      Avec <application>transcode</application>,
      on a la capacité de fusionner des fichiers vidéos,
      réparer les fichiers endommagés, en utilisant les outils
      en ligne de commande avec des interfaces de flots
      <filename>stdin/stdout</filename>.</para>

    <para>Un grand nombre d'options peut être
      précisé lors de la compilation du logiciel
      porté <package>multimedia/transcode</package>, nous
      recommandons d'utiliser la ligne de commande suivante pour
      compiler <application>transcode</application>:</para>

    <screen>&prompt.root; <userinput>make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes</userinput></screen>

    <para>Le paramétrage proposé devrait convenir
      &agrave; la plupart des utilisateurs.</para>

    <para>Pour illustrer les capacités de
      <command>transcode</command>, voici un exemple montrant comment
      convertir un fichier DivX en fichier MPEG-1 en standard PAL (VCD
      PAL):</para>

      <screen>&prompt.user; <userinput>transcode -i input.avi -V --export_prof vcd-pal -o output_vcd</userinput>
&prompt.user; <userinput>mplex -f 1 -o output_vcd.mpg output_vcd.m1v output_vcd.mpa</userinput></screen>

    <para>Le fichier MPEG résultant,
      <filename>output_vcd.mpg</filename>, peut être directement
      lu avec <application>MPlayer</application>.  Vous pourrez
      même le graver sur un CD pour créer ainsi un
      Vidéo CD; dans ce cas vous devrez installer et utiliser
      les programmes <package>multimedia/vcdimager</package> et <package>sysutils/cdrdao</package>.</para>

    <para>Il existe une page de manuel pour
      <command>transcode</command>, mais il est conseillé de
      consulter également le <link xlink:href="http://www.transcoding.org/cgi-bin/transcode">wiki de
      transcode</link> pour plus d'information et des
      exemples.</para>
    </sect3>

  </sect2>

  <sect2 xml:id="video-further-reading">
    <title>Lectures supplémentaires</title>

    <para>Les différents logiciels vidéo pour &os; se développent
      rapidement.  Il est fort possible que dans un futur proche
      plusieurs des problèmes abordés ici seront résolus.
      Entre temps
      ceux qui veulent tirer partie des possibilités
      audio/vidéo de FreeBSD devront se débrouiller avec des
      connaissances extraites de plusieurs FAQs et guides et utiliser
      différentes applications.
      Cette section existe pour fournir au lecteur des références
      sur ces documentations additionnelles.</para>

    <para>La
      <link xlink:href="http://www.mplayerhq.hu/DOCS/">documentation de
      MPlayer</link> est techniquement très instructive.
      Ces documents devraient probablement être consultés
      par quiconque désirant obtenir un niveau élevé
      d'expertise sur la vidéo et &unix;.
      La liste de diffusion de <application>MPlayer</application> est hostile &agrave;
      toute personne qui n'a pas pris la peine de lire la documentation,
      aussi si vous projetez de leur envoyer des rapports de bogue,
      lisez la documentation!</para>

    <para>Le
      <link xlink:href="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html">       HOWTO de xine</link>
      contient un chapitre sur l'amélioration des performances qui est
      général &agrave; tous les lecteurs
      de vidéo.</para>

    <para>Et enfin, il y a quelques autres applications prometteuses que
      le lecteur devrait essayer:</para>

    <itemizedlist>

       <listitem>
         <para><link xlink:href="http://avifile.sourceforge.net/">Avifile</link> qui est
	   également un logiciel porté <package>multimedia/avifile</package>.</para>
       </listitem>

       <listitem>
         <para><link xlink:href="http://www.dtek.chalmers.se/groups/dvd/">Ogle</link>
	   qui est également un logiciel porté <package>multimedia/ogle</package>.</para>
       </listitem>

       <listitem>
         <para><link xlink:href="http://xtheater.sourceforge.net/">Xtheater</link></para>
       </listitem>

      <listitem>
	<para><package>multimedia/dvdauthor</package>, un logiciel
	libre pour la création de DVDs.</para>
      </listitem>

    </itemizedlist>

  </sect2>
 </sect1>

  <sect1 xml:id="tvcard">
    <info><title>Configuration des cartes TV</title>
      <authorgroup>
	<author><personname><firstname>Josef</firstname><surname>El-Rayes</surname></personname><contrib>Contibution originale de </contrib></author>
      </authorgroup>
      <authorgroup>
	<author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname><contrib>Augmentée et adaptée par </contrib></author>
      </authorgroup>
    </info>

    
    <indexterm>
      <primary>cartes TV</primary>
    </indexterm>

    <sect2>
      <title>Introduction</title>

      <para>Les cartes TV vous permettent de regarder sur votre
	ordinateur la télévision par voie hertzienne ou
	par câble.  La plupart d'entre elles acceptent de la
	vidéo composite par l'intermédiaire de
	connecteurs RCA ou S-video et certaines de ces cartes
	disposent d'un tuner radio FM.</para>

      <para>&os; founit le support pour les cartes TV PCI utilisant un
	circuit de capture video Brooktree Bt848/849/878/879 ou
	Conexant CN-878/Fusion 878a &agrave; l'aide du pilote
	&man.bktr.4;.  Vous devez également vous assurer que la
	carte dispose d'un tuner supporté, consultez la page de
	manuel &man.bktr.4; pour une liste des tuners
	supportés.</para> </sect2>

    <sect2>
      <title>Ajout du pilote de périphérique</title>

      <para>Pour utiliser votre carte, vous devrez charger le pilote
	&man.bktr.4;, cela peut être effectué en ajoutant
	la ligne suivante au fichier
	<filename>/boot/loader.conf</filename>:</para>

      <programlisting>bktr_load="YES"</programlisting>

      <para>Alternativement, vous pouvez compiler en statique dans le
	noyau le support pour la carte TV, dans ce cas ajouter les
	lignes suivantes dans votre fichier de configuration du
	noyau:</para>

      <programlisting>device	 bktr
device	iicbus
device	iicbb
device	smbus</programlisting>

      <para>Ces pilotes de périphériques
	supplémentaires sont nécessaires étant
	donné que les composants de la carte sont
	interconnectés via un bus I2C.  Compilez et installez,
	ensuite, un nouveau noyau.</para>

      <para>Une fois que le support a été ajouté
	au système, vous devez redémarrer votre machine.
	Durant le processus de démarrage, votre carte TV
	devrait apparaître de cette manière:</para>

      <programlisting>bktr0: &lt;BrookTree 848A&gt; mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: &lt;I2C bit-banging driver&gt; on bti2c0
iicbus0: &lt;Philips I2C bus&gt; on iicbb0 master-only
iicbus1: &lt;Philips I2C bus&gt; on iicbb0 master-only
smbus0: &lt;System Management Bus&gt; on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.</programlisting>

      <para>Bien évidemment ces messages peuvent varier en
	fonction de votre matériel.  Cependant assurez-vous que
	le tuner est correctement détecté; il est
	possible de forcer certains des paramètres
	détecté &agrave; l'aide du système
	&man.sysctl.8; et d'options de configuration du noyau.  Par
	exemple, si vous désirez forcer le tuner pour un tuner
	Philips SECAM, vous devrez ajouter la ligne suivante au
	fichier de configuration du noyau:</para>

      <programlisting>options OVERRIDE_TUNER=6</programlisting>

      <para>ou vous pouvez directement utiliser &man.sysctl.8;:</para>

      <screen>&prompt.root; <userinput>sysctl hw.bt848.tuner=6</userinput></screen>

      <para>Consultez la page de manuel &man.bktr.4; et le fichier
	<filename>/usr/src/sys/conf/NOTES</filename> pour plus de
	détails sur les options disponibles.</para>
    </sect2>

    <sect2>
      <title>Applications utiles</title>

      <para>Pour utiliser votre carte TV, vous devrez installer une
	des applications suivantes:</para>

      <itemizedlist>
	<listitem>
	  <para><package>multimedia/fxtv</package>
	    qui permet de regarder la télévision et
	    d'enregistrer des images, du son et de la
	    vidéo.</para>
	</listitem>
	<listitem>
	  <para><package>multimedia/xawtv</package>
	    est également une application pour regarder la
	    télévision avec les mêmes
	    fonctionnalités que
	    <application>fxtv</application>.</para>
	</listitem>
	<listitem>
	  <para><package>misc/alevt</package>
	    décode et affiche les informations
	    Vidéotexte/Télétexte.</para>
	</listitem>
	<listitem>
	  <para><package>audio/xmradio</package>, un
	    programme pour utiliser le tuner FM fourni avec certaines
	    cartes TV.</para>
	</listitem>
	<listitem>
	  <para><package>audio/wmtune</package>, une
	    application intégrable dans votre environnement de
	    travail pour gérer les tuners radio.</para>
	</listitem>
      </itemizedlist>

      <para>Plus d'applications sont disponibles dans le catalogue
	des logiciels portés de &os;.</para>
    </sect2>

    <sect2>
      <title>En cas de problème</title>

      <para>Si vous rencontrez un quelconque problème avec
	votre carte TV, vous devriez contrôler tout d'abord que
	le circuit de capture video et le tuner sont vraiment
	supportés par le pilote &man.bktr.4; et si vous avez
	utilisé les bonnes options de configuration.  Pour plus
	de support et pour les diverses questions que vous pouvez vous
	poser &agrave; propos de votre carte TV, vous pouvez contacter
	et utiliser les archives de la liste de diffusion
	&a.multimedia.name;.</para>
    </sect2>
  </sect1>

  <sect1 xml:id="scanners">
    <info><title>Scanners</title>
      <authorgroup>
	<author><personname><firstname>Marc</firstname><surname>Fonvieille</surname></personname><contrib>Ecrit par </contrib></author>
      </authorgroup>
    </info>

    
    <indexterm>
      <primary>scanners</primary>
    </indexterm>

    <sect2>
      <title>Introduction</title>

      <para>Sous &os;, l'accès aux scanners est
	possible grâce &agrave; l'<acronym role="Interface de Programmation d'Applications">API</acronym>
	<application>SANE</application> (Scanner Access Now Easy)
	disponible dans le catalogue des logiciels portés.
	<application>SANE</application> utilisera également
	certains pilotes de périphériques &os; pour
	accéder &agrave; la partie matérielle du
	scanner.</para>

      <para>&os; supporte les scanners SCSI et USB.  Assurez-vous que
	votre scanner est supporté par
	<application>SANE</application> avant d'effectuer une
	quelconque configuration.  <application>SANE</application>
	dispose d'une liste des <link xlink:href="http://www.sane-project.org/sane-supported-devices.html">périphériques
	supportés</link> qui peut vous informer sur le support
	et son statut pour un scanner particulier.  La page de manuel
	&man.uscanner.4; donne également une liste des scanners
	USB supportés.</para>
    </sect2>

    <sect2>
      <title>Configuration du noyau</title>

      <para>Comme mentionné plus haut les interfaces SCSI et
	USB sont supportées.  En fonction de l'interface de
	votre scanner, différents pilotes de
	périphérique sont nécessaires.</para>

      <sect3 xml:id="scanners-kernel-usb">
	<title>Interface USB</title>

	<para>Le noyau <filename>GENERIC</filename> inclut par
	  défaut les pilotes nécessaires au support des
	  scanners USB.  Si vous décidez d'utiliser un noyau
	  personnalisé, assurez-vous que les lignes suivantes
	  sont présentes dans votre fichier de configuration du
	  noyau:</para>

	<programlisting>device usb
device uhci
device ohci
device uscanner</programlisting>

	<para>En fonction du contrôleur USB présent sur
	  votre carte mère, vous n'avez besoin que d'une des
	  deux lignes <literal>device uhci</literal> et
	  <literal>device ohci</literal>, cependant avoir ces deux
	  lignes simultanément dans la configuration du noyau
	  est sans risque.</para>

	<para>Si vous ne désirez pas recompiler votre noyau et
	  que votre noyau n'est pas le <filename>GENERIC</filename>,
	  vous pouvez directement charger le module du pilote
	  &man.uscanner.4; &agrave; l'aide de la commande
	  &man.kldload.8;:</para>

	<screen>&prompt.root; <userinput>kldload uscanner</userinput></screen>

	<para>Pour charger ce module &agrave; chaque démarrage
	  du système, ajoutez la ligne suivante au fichier
	  <filename>/boot/loader.conf</filename>:</para>

	<programlisting>uscanner_load="YES"</programlisting>

	<para>Après avoir redémarré avec le bon
	  noyau, ou après avoir chargé le module
	  nécessaire, branchez votre scanner USB.  Une ligne
	  montrant la détection de votre scanner
	  devrait apparaître dans le tampon des messages du
	  système (&man.dmesg.8;):</para>

	<screen>uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2</screen>

	<para>Ceci nous indique que notre scanner utilise le fichier
	  spécial de périphérique
	  <filename>/dev/uscanner0</filename>.</para>
      </sect3>

      <sect3>
	<title>Interface SCSI</title>

	<para>Si votre scanner dispose d'une interface SCSI, il est
	  important de connaître quelle carte contrôleur
	  SCSI vous utiliserez.  En fonction du contrôleur sur
	  la carte, vous devrez adapter votre configuration du noyau.
	  Le noyau <filename>GENERIC</filename> supporte les
	  contrôleurs SCSI les plus courants.  Assurez-vous
	  d'avoir lu le fichier <filename>NOTES</filename>
	  et ajoutez la
	  ligne adéquate dans votre fichier de configuration du
	  noyau.  En plus du pilote de votre carte SCSI, vous avez
	  besoin des lignes suivantes dans votre fichier de
	  configuration du noyau:</para>

	<programlisting>device scbus
device pass</programlisting>

	<para>Une fois que votre noyau a été
	  correctement compilé et installé, vous devriez être en
	  mesure de voir les périphériques au
	  démarrage:</para>

	<screen>pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</screen>

	<para>Si votre scanner n'était pas alimenté au
	  démarrage du système, il est encore possible
	  de forcer sa détection, en en sondant le bus SCSI
	  avec la commande &man.camcontrol.8;:</para>

	<screen>&prompt.root; <userinput>camcontrol rescan all</userinput>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</screen>

	<para>Ensuite le scanner apparaîtra dans la liste des
	  périphériques SCSI:</para>

	<screen>&prompt.root; <userinput>camcontrol devlist</userinput>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</screen>

	<para>Plus de détails sur les
	  périphériques SCSI sont disponibles dans les
	  pages de manuel &man.scsi.4; et &man.camcontrol.8;.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Configuration de SANE</title>

      <para>Le système <application>SANE</application> est
	divisé en deux parties: les
	<quote>backend</quote>s (<package>graphics/sane-backends</package>) et les
	<quote>frontend</quote>s (<package>graphics/sane-frontends</package>).  Les
	<quote>backend</quote>s fournissent l'accès au scanner.
	La liste des <link xlink:href="http://www.sane-project.org/sane-supported-devices.html">périphériques
	supportés</link> par <application>SANE</application>
	indique quel <quote>backend</quote> supportera votre scanner.
	Il est indispensable de déterminer correctement le
	<quote>backend</quote> relatif &agrave; votre scanner si vous
	voulez être en mesure d'utiliser votre
	périphérique.  La partie
	<quote>frontend</quote>s fournie l'interface graphique de
	numérisation
	(<application>xscanimage</application>).</para>

      <para>La première étape est d'installer le
	logiciel porté <package>graphics/sane-backends</package> ou sa version
	pré-compilée.  Ensuite, utilisez la commande
	<command>sane-find-scanner</command> pour contrôler la
	détection du scanner par l'ensemble
	<application>SANE</application>:</para>

      <screen>&prompt.root; <userinput>sane-find-scanner -q</userinput>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</screen>

      <para>Le résultat de la commande affichera le type
	d'interface utilisée par le scanner et le fichier
	spécial de périphérique utilisé
	pour attacher le scanner au système.  Le fabricant et
	le modèle peuvent ne pas apparaître, cela n'est
	pas important.</para>

      <note>
	<para>Certains scanners USB requièrent le chargement
	  préalable d'un <quote>firmware</quote>, cela est
	  expliqué dans la page de manuel du
	  <quote>backend</quote> utilisé.  Vous devriez
	  également consulter les pages de manuel de
	  &man.sane-find-scanner.1; et &man.sane.7;.</para>
      </note>

      <para>Nous devons maintenant vérifier si le scanner sera
	identifié par un <quote>frontend</quote> de
	numérisation.  Par défaut, les
	<quote>backend</quote>s <application>SANE</application> sont
	fournies avec un outil en ligne de commande appelé
	&man.scanimage.1;.  Cette commande vous permet de lister les
	périphériques et d'effectuer une acquisition
	d'image &agrave; partir de la ligne de commande.  L'option
	<option>-L</option> est employée pour afficher les
	scanners présents sur le système:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</screen>

      <para>Aucun résultat, ou un message disant qu'aucun
	scanner n'a été identifié indiquent que
	&man.scanimage.1; est incapable d'identifier le scanner.  Si
	cela se produit, vous devrez éditer le fichier de
	configuration du <quote>backend</quote> du scanner et
	définir le type de scanner utilisé.  Le
	répertoire <filename>/usr/local/etc/sane.d/</filename> contient
	tous les fichiers de configurations des
	<quote>backend</quote>s.  Ce problème d'identification
	apparaît essentiellement avec certains scanners
	USB.</para>

      <para>Par exemple, avec le scanner USB utilisé dans la
	<xref linkend="scanners-kernel-usb"/>,
	<command>sane-find-scanner</command> nous donne l'information
	suivante:</para>

      <screen>&prompt.root; <userinput>sane-find-scanner -q</userinput>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</screen>
      <para>Le scanner est correctement détecté, il
	utilise l'interface USB et est attaché au fichier
	spécial de périphérique
	<filename>/dev/uscanner0</filename>.  Nous pouvons maintenant
	vérifier si le scanner est correctement
	identifié:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</screen>

      <para>Comme le scanner n'est pas identifié, nous devons
	éditer le fichier
	<filename>/usr/local/etc/sane.d/epson.conf</filename>.  Le
	scanner utilisé était un &epson.perfection;
	1650, nous en déduisons donc que ce scanner utilisera
	le <quote>backend</quote> <literal>epson</literal>.
	Assurez-vous de bien lire les commentaires d'aide
	présents dans les fichiers de configuration des
	<quote>backend</quote>s.  Les modifications &agrave; faire
	sont relativement simples: commentez toutes les lignes
	concernant une interface différente de celle
	utilisée par votre scanner (dans notre cas, nous
	commenterons toutes les lignes débutant par le mot
	<literal>scsi</literal> étant donné que notre
	scanner utilise une interface USB), ajoutez ensuite &agrave;
	la fin du fichier une ligne indiquant l'interface et le
	fichier spécial de périphérique
	utilisé.  Dans ce cas, nous ajoutons la ligne
	suivante:</para>

      <programlisting>usb /dev/uscanner0</programlisting>

      <para>Veuillez vous assurer de bien lire les commentaires
	fournis dans les fichiers de configurations des
	<quote>backend</quote>s ainsi que les pages de manuel
	correspondantes pour plus de détails concernant la
	syntaxe correcte &agrave; utiliser.  Nous pouvons maintenant
	vérifier si le scanner est identifié:</para>

      <screen>&prompt.root; <userinput>scanimage -L</userinput>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</screen>

      <para>Notre scanner a été identifié.  Ce
	n'est pas important si la marque et le modèle ne
	correspondent pas au scanner.  L'important est le champ
	<literal>`epson:/dev/uscanner0'</literal>, qui nous donne le
	<quote>backend</quote> et le fichier spécial de
	périphérique corrects.</para>

      <para>Une fois que la commande <command>scanimage -L</command>
	est en mesure d'identifier le scanner, la configuration est
	terminée.  Le périphérique est prêt
	&agrave; effectuer sa première
	numérisation.</para>

      <para>Bien que &man.scanimage.1; permette d'effectuer une
	numérisation &agrave; partir de la ligne de commande,
	il est préférable d'utiliser une interface
	graphique.  <application>SANE</application> offre une
	interface graphique simple mais efficace:
	<application>xscanimage</application> (<package>graphics/sane-frontends</package>).</para>

      <para><application>Xsane</application> (<package>graphics/xsane</package>) est une autre
	interface graphique de numérisation assez populaire.
	Ce programme offre des fonctions avancées comme
	différents mode de numérisation (photocopie,
	fax, etc.), la correction des couleurs, la numérisation
	par lots, etc.  Ces deux applications sont utilisables comme
	greffon pour <application>GIMP</application>.</para>
    </sect2>

    <sect2>
      <title>Donner l'accès au scanner aux autres
	utilisateurs</title>

      <para>Toutes les opérations précédentes ont
	été effectuées avec les privilèges
	<systemitem class="username">root</systemitem>.  Vous pourrez, cependant, avoir
	besoin que d'autres utilisateurs puissent accéder au
	scanner.  L'utilisateur devra avoir les permissions de lecture
	et d'écriture sur le fichier spécial de
	périphérique <filename>/dev/uscanner0</filename>
	dont le propriétaire est le groupe
	<systemitem class="groupname">operator</systemitem>.  L'ajout de l'utilisateur
	<systemitem class="username">joe</systemitem> au groupe
	<systemitem class="groupname">operator</systemitem> lui autorisera l'accès
	au scanner:</para>

      <screen>&prompt.root; <userinput>pw groupmod operator -m joe</userinput></screen>

      <para>Pour plus de détails, consultez la page de manuel
	de &man.pw.8;.  Vous devez également fixer les
	permissions d'écriture correctes (0660 or 0664) sur le
	fichier spécial de périphérique
	<filename>/dev/uscanner0</filename>, par défaut le
	groupe <systemitem class="groupname">operator</systemitem> n'a qu'un accès
	en lecture.  Cela se fait en ajoutant les lignes suivantes au
	fichier <filename>/etc/devfs.rules</filename>:</para>

      <programlisting>[system=5]
add path uscanner0 mode 660</programlisting>

      <para>Ajoutez ensuite ce qui suit au fichier
	<filename>/etc/rc.conf</filename> et redémarrez la
	machine:</para>

      <programlisting>devfs_system_ruleset="system"</programlisting>

      <para>Plus d'information concernant ces lignes peut être
	trouvée dans la page de manuel &man.devfs.8;.</para>

      <note>
	<para>Bien sûr, pour des raisons de
	  sécurité, vous devriez réfléchir
	  &agrave; deux fois avant d'ajouter un utilisateur &agrave;
	  n'importe quel groupe, tout particulièrement au groupe
	  <systemitem class="groupname">operator</systemitem>.</para>
      </note>
    </sect2>
  </sect1>
</chapter>
